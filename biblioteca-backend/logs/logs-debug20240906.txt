2024-09-06 14:13:54.927 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-09-06 14:13:55.112 -05:00 [DBG] Hosting starting
2024-09-06 14:13:55.195 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-06 14:13:55.217 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-09-06 14:13:55.233 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-09-06 14:13:55.248 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-09-06 14:13:55.252 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-06 14:13:55.263 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-09-06 14:13:55.272 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-09-06 14:13:55.289 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-09-06 14:13:55.291 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-09-06 14:13:55.293 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-09-06 14:13:55.294 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-09-06 14:13:55.716 -05:00 [INF] Now listening on: https://localhost:7299
2024-09-06 14:13:55.716 -05:00 [INF] Now listening on: http://localhost:5219
2024-09-06 14:13:55.717 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-09-06 14:13:55.717 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-09-06 14:13:55.717 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-09-06 14:13:55.717 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-06 14:13:55.717 -05:00 [INF] Hosting environment: Development
2024-09-06 14:13:55.717 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-09-06 14:13:55.718 -05:00 [DBG] Hosting started
2024-09-06 14:13:55.870 -05:00 [DBG] Connection id "0HN6EL06QF3TE" accepted.
2024-09-06 14:13:55.872 -05:00 [DBG] Connection id "0HN6EL06QF3TE" started.
2024-09-06 14:13:55.874 -05:00 [DBG] Connection id "0HN6EL06QF3TF" accepted.
2024-09-06 14:13:55.874 -05:00 [DBG] Connection id "0HN6EL06QF3TF" started.
2024-09-06 14:13:55.940 -05:00 [DBG] Connection id "0HN6EL06QF3TF" received FIN.
2024-09-06 14:13:55.940 -05:00 [DBG] Connection id "0HN6EL06QF3TE" received FIN.
2024-09-06 14:13:55.983 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-09-06 14:13:56.008 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-09-06 14:13:56.074 -05:00 [DBG] Connection id "0HN6EL06QF3TF" stopped.
2024-09-06 14:13:56.076 -05:00 [DBG] Connection id "0HN6EL06QF3TE" stopped.
2024-09-06 14:13:56.082 -05:00 [DBG] Connection id "0HN6EL06QF3TE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:13:56.082 -05:00 [DBG] Connection id "0HN6EL06QF3TF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:13:57.800 -05:00 [DBG] Connection id "0HN6EL06QF3TG" accepted.
2024-09-06 14:13:57.801 -05:00 [DBG] Connection id "0HN6EL06QF3TG" started.
2024-09-06 14:13:58.085 -05:00 [DBG] Connection 0HN6EL06QF3TG established using the following protocol: "Tls12"
2024-09-06 14:13:58.256 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-09-06 14:13:58.744 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-09-06 14:13:58.808 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-09-06 14:13:58.809 -05:00 [DBG] Request did not match any endpoints
2024-09-06 14:13:59.175 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-09-06 14:13:59.177 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-09-06 14:13:59.409 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-09-06 14:13:59.410 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-09-06 14:13:59.414 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1161.1768ms
2024-09-06 14:13:59.473 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-09-06 14:13:59.476 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-09-06 14:13:59.486 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 12.7795ms
2024-09-06 14:13:59.706 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 230.5844ms
2024-09-06 14:13:59.999 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-09-06 14:13:59.999 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-09-06 14:13:59.999 -05:00 [DBG] Request did not match any endpoints
2024-09-06 14:14:00.236 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/favicon-32x32.png - null null
2024-09-06 14:14:00.237 -05:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2024-09-06 14:14:00.237 -05:00 [DBG] Request did not match any endpoints
2024-09-06 14:14:00.255 -05:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-09-06 14:14:00.255 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/favicon-32x32.png - 200 628 image/png 18.9399ms
2024-09-06 14:14:00.885 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 886.9945ms
2024-09-06 14:14:30.170 -05:00 [DBG] Connection id "0HN6EL06QF3TG" received FIN.
2024-09-06 14:14:30.252 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TG completed.
2024-09-06 14:14:30.257 -05:00 [DBG] Connection id "0HN6EL06QF3TG" is closed. The last processed stream ID was 9.
2024-09-06 14:14:30.257 -05:00 [DBG] Connection id "0HN6EL06QF3TG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:14:30.264 -05:00 [DBG] Connection id "0HN6EL06QF3TG" stopped.
2024-09-06 14:15:54.030 -05:00 [DBG] Connection id "0HN6EL06QF3TH" accepted.
2024-09-06 14:15:54.032 -05:00 [DBG] Connection id "0HN6EL06QF3TH" started.
2024-09-06 14:15:54.102 -05:00 [DBG] Connection 0HN6EL06QF3TH established using the following protocol: "Tls12"
2024-09-06 14:15:54.104 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-09-06 14:15:54.132 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:15:54.132 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:15:54.134 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:54.136 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:54.136 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:54.137 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:15:54.138 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 34.306ms
2024-09-06 14:15:54.142 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-09-06 14:15:54.143 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:15:54.149 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-09-06 14:15:54.149 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-09-06 14:15:54.150 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:54.150 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:54.150 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:54.308 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-06 14:15:54.312 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-09-06 14:15:54.351 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-09-06 14:15:54.353 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:15:54.353 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:15:54.353 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:15:54.354 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:15:54.354 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:15:54.356 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:15:54.594 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-09-06 14:15:54.650 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:15:54.688 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-09-06 14:15:54.692 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-09-06 14:15:54.695 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-09-06 14:15:54.703 -05:00 [DBG] Connection id "0HN6EL06QF3TH", Request id "0HN6EL06QF3TH:00000003": started reading request body.
2024-09-06 14:15:54.703 -05:00 [DBG] Connection id "0HN6EL06QF3TH", Request id "0HN6EL06QF3TH:00000003": done reading request body.
2024-09-06 14:15:54.712 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-09-06 14:15:54.712 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-09-06 14:15:54.713 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-09-06 14:15:54.713 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-09-06 14:15:54.722 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-09-06 14:15:54.757 -05:00 [DBG] Iniciando sesión...
2024-09-06 14:15:56.178 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:15:56.286 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-09-06 14:15:56.645 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-06 14:15:56.704 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:15:56.741 -05:00 [DBG] Created DbConnection. (37ms).
2024-09-06 14:15:56.747 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.407 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.410 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:15:57.416 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-09-06 14:15:57.425 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2024-09-06 14:15:57.438 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-09-06 14:15:57.582 -05:00 [INF] Executed DbCommand (144ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-09-06 14:15:57.649 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:57.720 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.747 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 151ms reading results.
2024-09-06 14:15:57.748 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.755 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (6ms).
2024-09-06 14:15:57.758 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-09-06 14:15:57.766 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-06 14:15:57.767 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.768 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.768 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:15:57.768 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:57.768 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:57.769 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-09-06 14:15:57.780 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-09-06 14:15:57.801 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:57.818 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:57.823 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.823 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 42ms reading results.
2024-09-06 14:15:57.824 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.824 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:15:57.921 -05:00 [INF] Inicio de sesión exitoso
2024-09-06 14:15:57.933 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:15:57.937 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:15:57.937 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:15:57.937 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:15:57.940 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:15:57.941 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:15:57.961 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 3598.4097ms
2024-09-06 14:15:57.961 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-09-06 14:15:57.965 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:15:57.980 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:57.984 -05:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-09-06 14:15:57.989 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 3843.3509ms
2024-09-06 14:15:58.016 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-09-06 14:15:58.017 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:15:58.018 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:15:58.018 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:15:58.018 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:15:58.018 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:15:58.019 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:58.019 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:58.019 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:58.019 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:58.019 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:58.019 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:58.020 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:15:58.020 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:15:58.020 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 2.8085ms
2024-09-06 14:15:58.020 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 4.0492ms
2024-09-06 14:15:58.028 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-09-06 14:15:58.028 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:15:58.029 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-09-06 14:15:58.029 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.029 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:15:58.030 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:15:58.030 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:58.030 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:15:58.030 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:58.030 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:58.030 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.030 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:15:58.030 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:15:58.031 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:15:58.148 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:15:58.148 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:15:58.151 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:15:58.151 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:15:58.163 -05:00 [DBG] Authorization was successful.
2024-09-06 14:15:58.163 -05:00 [DBG] Authorization was successful.
2024-09-06 14:15:58.164 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.164 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.169 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:15:58.169 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:15:58.169 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:15:58.170 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:15:58.170 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:15:58.170 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:15:58.170 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:15:58.172 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-09-06 14:15:58.172 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:15:58.172 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:15:58.172 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:15:58.173 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:15:58.173 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:15:58.173 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:15:58.173 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:15:58.179 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:15:58.181 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:15:58.182 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:15:58.185 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:15:58.185 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:15:58.185 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:15:58.187 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:15:58.230 -05:00 [DBG] Consultando libros...
2024-09-06 14:15:58.236 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:15:58.240 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-09-06 14:15:58.248 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:15:58.268 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:15:58.269 -05:00 [DBG] Created DbConnection. (1ms).
2024-09-06 14:15:58.273 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.277 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.278 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:15:58.278 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:58.278 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:58.279 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:15:58.304 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:15:58.331 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-09-06 14:15:58.381 -05:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:15:58.399 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.412 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.412 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.413 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.414 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.414 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.414 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:15:58.420 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.420 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 38ms reading results.
2024-09-06 14:15:58.423 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.423 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:15:58.429 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:15:58.429 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:15:58.429 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:15:58.429 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:15:58.430 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:15:58.430 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:15:58.439 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 265.7107ms
2024-09-06 14:15:58.440 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.441 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:15:58.442 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.442 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:15:58.443 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 415.2229ms
2024-09-06 14:15:58.446 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:15:58.448 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:15:58.448 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:15:58.448 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.448 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.448 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:15:58.448 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:58.449 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:15:58.449 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:15:58.520 -05:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:15:58.522 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.522 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:15:58.522 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.522 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:15:58.527 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:15:58.527 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:15:58.527 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:15:58.527 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:15:58.528 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:15:58.528 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:15:58.528 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:15:58.533 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 363.2853ms
2024-09-06 14:15:58.534 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:15:58.534 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:15:58.534 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:15:58.534 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:15:58.534 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 504.841ms
2024-09-06 14:16:00.277 -05:00 [DBG] Connection id "0HN6EL06QF3TH" received FIN.
2024-09-06 14:16:00.277 -05:00 [DBG] Connection id "0HN6EL06QF3TH" is closed. The last processed stream ID was 11.
2024-09-06 14:16:00.277 -05:00 [DBG] Connection id "0HN6EL06QF3TH" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:16:00.281 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TH completed.
2024-09-06 14:16:00.282 -05:00 [DBG] Connection id "0HN6EL06QF3TH" stopped.
2024-09-06 14:16:22.129 -05:00 [DBG] Connection id "0HN6EL06QF3TI" accepted.
2024-09-06 14:16:22.130 -05:00 [DBG] Connection id "0HN6EL06QF3TI" started.
2024-09-06 14:16:22.138 -05:00 [DBG] Connection 0HN6EL06QF3TI established using the following protocol: "Tls12"
2024-09-06 14:16:22.218 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:16:22.218 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:16:22.218 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:22.218 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:22.218 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:22.218 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:22.219 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:22.219 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.1347ms
2024-09-06 14:16:22.244 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-09-06 14:16:22.244 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:16:22.244 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:22.244 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:22.244 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:22.244 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:22.244 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:22.245 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.9724ms
2024-09-06 14:16:22.245 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:16:22.245 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:16:22.245 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:16:22.245 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.245 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:22.245 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:22.245 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:22.263 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:22.263 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:22.303 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:22.310 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.313 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:16:22.314 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-09-06 14:16:22.314 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:22.314 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:16:22.314 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:22.314 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-09-06 14:16:22.314 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.314 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:22.314 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:22.314 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:22.314 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:22.314 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:22.314 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:22.315 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:16:22.315 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:22.315 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:22.315 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:22.315 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.315 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:16:22.315 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-09-06 14:16:22.315 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:22.316 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:22.316 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:22.316 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:22.316 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:16:22.316 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:22.316 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:16:22.318 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:16:22.318 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:22.319 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:22.319 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:16:22.319 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:16:22.319 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:22.322 -05:00 [DBG] Consultando libros...
2024-09-06 14:16:22.411 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:22.411 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:22.412 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:22.412 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:22.412 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.413 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.413 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:22.413 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:22.413 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:22.413 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:16:22.419 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:16:22.420 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.420 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.420 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.420 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.420 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.421 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.421 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.421 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.421 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:22.422 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:22.422 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.422 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.422 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.422 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.422 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.422 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:22.423 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.423 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-09-06 14:16:22.423 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.423 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:22.423 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:22.424 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:22.424 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:22.424 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:22.426 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:22.426 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:22.426 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 110.3254ms
2024-09-06 14:16:22.426 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.427 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:22.427 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.427 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:22.427 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 113.5303ms
2024-09-06 14:16:22.436 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.436 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:22.437 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:22.437 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:22.437 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:16:22.443 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:16:22.443 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.444 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:16:22.444 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.444 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:22.447 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:16:22.447 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:22.447 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:22.447 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:22.447 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:22.447 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:22.447 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:22.448 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 133.1472ms
2024-09-06 14:16:22.448 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:22.448 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:22.448 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:22.448 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:22.448 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 203.4712ms
2024-09-06 14:16:30.327 -05:00 [DBG] Connection id "0HN6EL06QF3TI" received FIN.
2024-09-06 14:16:30.327 -05:00 [DBG] Connection id "0HN6EL06QF3TI" is closed. The last processed stream ID was 7.
2024-09-06 14:16:30.327 -05:00 [DBG] Connection id "0HN6EL06QF3TI" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:16:30.330 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TI completed.
2024-09-06 14:16:30.330 -05:00 [DBG] Connection id "0HN6EL06QF3TI" stopped.
2024-09-06 14:16:42.362 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" accepted.
2024-09-06 14:16:42.363 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" started.
2024-09-06 14:16:42.366 -05:00 [DBG] Connection 0HN6EL06QF3TJ established using the following protocol: "Tls12"
2024-09-06 14:16:42.371 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-09-06 14:16:42.372 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-09-06 14:16:42.372 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:42.372 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:42.372 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:42.372 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:42.372 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:42.373 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.338ms
2024-09-06 14:16:42.378 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-09-06 14:16:42.380 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-09-06 14:16:42.381 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-09-06 14:16:42.381 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-09-06 14:16:42.381 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:42.381 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:42.381 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:42.381 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:42.381 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:42.382 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:42.382 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-09-06 14:16:42.389 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-09-06 14:16:42.390 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:42.390 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:42.391 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:42.392 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:42.392 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:42.392 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-09-06 14:16:42.394 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-09-06 14:16:42.401 -05:00 [DBG] Consultando archivos sin eliminar...
2024-09-06 14:16:42.402 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:42.406 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-09-06 14:16:42.427 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:16:42.443 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:42.443 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:42.443 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:42.444 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:42.444 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:42.444 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:42.444 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:42.444 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-09-06 14:16:42.461 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-09-06 14:16:42.473 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.517 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.518 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.518 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.518 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.518 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:42.520 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:42.520 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 58ms reading results.
2024-09-06 14:16:42.520 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:42.520 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:42.529 -05:00 [INF] Consulta de archivos exitosa
2024-09-06 14:16:42.530 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:42.530 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:42.530 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:42.530 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:42.530 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:42.530 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:42.551 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 158.6549ms
2024-09-06 14:16:42.551 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-09-06 14:16:42.551 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:42.551 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:42.551 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:42.552 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 173.8336ms
2024-09-06 14:16:45.856 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-09-06 14:16:45.856 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-09-06 14:16:45.856 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:45.856 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:45.856 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:45.856 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:45.856 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:45.859 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 0.9241ms
2024-09-06 14:16:45.864 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-09-06 14:16:45.864 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-09-06 14:16:45.864 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-09-06 14:16:45.864 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-09-06 14:16:45.864 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-09-06 14:16:45.864 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:45.864 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-09-06 14:16:45.864 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:45.864 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:45.864 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-09-06 14:16:45.865 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-09-06 14:16:45.865 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-09-06 14:16:45.865 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:45.865 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:45.865 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:45.865 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-09-06 14:16:45.865 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:45.865 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:45.866 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:45.867 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-09-06 14:16:45.870 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-09-06 14:16:45.870 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:45.870 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:45.870 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:45.870 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-09-06 14:16:45.870 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:45.870 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:45.871 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:45.871 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:45.871 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-09-06 14:16:45.871 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:45.871 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:45.871 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:45.871 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-09-06 14:16:45.871 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-09-06 14:16:45.871 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-09-06 14:16:45.877 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:45.879 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-09-06 14:16:45.884 -05:00 [DBG] Consultando historial de registros de archivos...
2024-09-06 14:16:45.886 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:16:45.886 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:45.887 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:45.887 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:45.887 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.887 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.887 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:45.887 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:45.887 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:45.887 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-09-06 14:16:45.896 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-09-06 14:16:45.896 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-09-06 14:16:45.901 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:45.905 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:45.905 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:45.905 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.905 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 9ms reading results.
2024-09-06 14:16:45.905 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.905 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:45.906 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:45.906 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:45.906 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:45.906 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:45.906 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:45.906 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:45.910 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 39.5668ms
2024-09-06 14:16:45.910 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-09-06 14:16:45.911 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:45.911 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.911 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:45.911 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 47.1588ms
2024-09-06 14:16:45.933 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:16:45.936 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:45.936 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:45.936 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.936 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.936 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:45.936 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:45.936 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:45.936 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-09-06 14:16:45.966 -05:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-09-06 14:16:45.970 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.970 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-09-06 14:16:45.971 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.971 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:45.975 -05:00 [INF] Consulta de historial exitosa
2024-09-06 14:16:45.976 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:45.976 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:45.976 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:45.976 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:45.976 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:45.976 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:45.983 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 112.1961ms
2024-09-06 14:16:45.983 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-09-06 14:16:45.983 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:45.983 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:45.984 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:45.984 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 119.372ms
2024-09-06 14:16:50.325 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" received FIN.
2024-09-06 14:16:50.325 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" is closed. The last processed stream ID was 9.
2024-09-06 14:16:50.325 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:16:50.326 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TJ completed.
2024-09-06 14:16:50.326 -05:00 [DBG] Connection id "0HN6EL06QF3TJ" stopped.
2024-09-06 14:16:51.710 -05:00 [DBG] Connection id "0HN6EL06QF3TK" accepted.
2024-09-06 14:16:51.711 -05:00 [DBG] Connection id "0HN6EL06QF3TK" started.
2024-09-06 14:16:51.717 -05:00 [DBG] Connection 0HN6EL06QF3TK established using the following protocol: "Tls12"
2024-09-06 14:16:51.719 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:16:51.719 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-09-06 14:16:51.719 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:16:51.719 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:16:51.719 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:51.720 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:51.720 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:51.720 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:51.720 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:51.720 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:51.720 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:51.720 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:51.720 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:51.720 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:51.720 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.9802ms
2024-09-06 14:16:51.720 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 0.9803ms
2024-09-06 14:16:51.742 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:16:51.742 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-09-06 14:16:51.742 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:16:51.742 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:16:51.742 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-09-06 14:16:51.742 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.742 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:16:51.742 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.743 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:51.743 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:51.743 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:51.743 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:51.743 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:51.743 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:51.743 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:51.743 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:51.743 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:51.743 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:51.743 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:51.743 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:51.743 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.743 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.743 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-09-06 14:16:51.743 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:16:51.743 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:51.744 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:51.744 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:16:51.744 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:16:51.744 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:16:51.744 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:16:51.744 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:16:51.745 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:16:51.745 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:51.745 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:51.745 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:16:51.745 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:51.745 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:16:51.746 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:51.746 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:51.751 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.751 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.752 -05:00 [DBG] Consultando libros...
2024-09-06 14:16:51.753 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:51.753 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:51.753 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:51.753 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:16:51.754 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:51.757 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:51.757 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:51.757 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.758 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.758 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:51.758 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:51.758 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:51.758 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:16:51.760 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:16:51.760 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.760 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.760 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.760 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:51.761 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.762 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:16:51.762 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.762 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:51.762 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:51.762 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:51.762 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:51.762 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:51.762 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:51.763 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:51.763 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 18.9162ms
2024-09-06 14:16:51.763 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.763 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:51.763 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.763 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:51.763 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 21.3098ms
2024-09-06 14:16:51.764 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:16:51.764 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.764 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:16:51.764 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.764 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:51.768 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:16:51.768 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:51.769 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:51.769 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:51.769 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:51.769 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:51.769 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:16:51.769 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 25.1998ms
2024-09-06 14:16:51.769 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:16:51.769 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:51.769 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:51.770 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:51.770 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 27.6543ms
2024-09-06 14:16:52.506 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-09-06 14:16:52.506 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:16:52.506 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:52.506 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:52.508 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:52.508 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:52.508 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:52.509 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 2.8815ms
2024-09-06 14:16:52.514 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-09-06 14:16:52.514 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:16:52.515 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-09-06 14:16:52.515 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:52.515 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:52.515 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:52.515 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:52.516 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:52.516 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:52.516 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:52.516 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:52.519 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-09-06 14:16:52.519 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:52.519 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:52.519 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:52.519 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:52.519 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:52.519 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:16:52.520 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:16:52.520 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-09-06 14:16:52.520 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-09-06 14:16:52.521 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:52.521 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:52.521 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-09-06 14:16:52.521 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:52.530 -05:00 [DBG] Consultando perfil con id 31
2024-09-06 14:16:52.531 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:52.532 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Id == __id_0)'
2024-09-06 14:16:52.539 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Id == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-09-06 14:16:52.542 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:52.542 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:52.542 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:52.542 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:52.542 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:52.543 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:52.543 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:52.543 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:16:52.560 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:16:52.560 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:52.561 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:52.562 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:16:52.562 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:52.563 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:52.572 -05:00 [INF] Perfil encontrado con id: 31
2024-09-06 14:16:52.572 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:52.573 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:52.573 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:52.573 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:52.575 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:52.575 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-09-06 14:16:52.578 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 58.9962ms
2024-09-06 14:16:52.578 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:52.579 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:52.579 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:52.579 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:52.579 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 64.8712ms
2024-09-06 14:16:57.610 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-09-06 14:16:57.611 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:16:57.611 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:16:57.611 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:57.611 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:57.611 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:57.611 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:16:57.612 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 1.3667ms
2024-09-06 14:16:57.617 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-09-06 14:16:57.617 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-09-06 14:16:57.618 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-09-06 14:16:57.618 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:57.618 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:16:57.618 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:16:57.618 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:16:57.620 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:16:57.620 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:16:57.620 -05:00 [DBG] Authorization was successful.
2024-09-06 14:16:57.620 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:57.621 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-09-06 14:16:57.621 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:16:57.621 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:16:57.621 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:16:57.621 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:16:57.621 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:16:57.622 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:16:57.622 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-09-06 14:16:57.622 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-09-06 14:16:57.622 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-09-06 14:16:57.622 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:57.623 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:57.624 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-09-06 14:16:57.624 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-09-06 14:16:57.631 -05:00 [DBG] Consultando perfil con id 31
2024-09-06 14:16:57.632 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:16:57.633 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:16:57.633 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:16:57.634 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:57.634 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:57.634 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:16:57.634 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:57.634 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:16:57.634 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:16:57.640 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:16:57.641 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:16:57.641 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:57.641 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:16:57.641 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:57.641 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:16:57.646 -05:00 [INF] Perfil encontrado con id: 31
2024-09-06 14:16:57.646 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:16:57.646 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:16:57.646 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:16:57.646 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:16:57.646 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:16:57.646 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-09-06 14:16:57.647 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 25.1343ms
2024-09-06 14:16:57.647 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-09-06 14:16:57.647 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:16:57.647 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:16:57.647 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:16:57.647 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 30.4652ms
2024-09-06 14:17:02.771 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:02.771 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:02.772 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:02.772 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:02.772 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:02.772 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:02.772 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:02.775 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 1.4699ms
2024-09-06 14:17:02.782 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:02.782 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:02.783 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:17:02.783 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:02.783 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:02.783 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:02.783 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:02.783 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:02.783 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:02.783 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:02.783 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:02.784 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:17:02.784 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:02.784 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:02.784 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:02.784 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:02.784 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:02.784 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:02.784 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:02.785 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:02.785 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:17:02.785 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:02.785 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:02.785 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:02.785 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:02.792 -05:00 [DBG] Consultando libros...
2024-09-06 14:17:02.793 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:02.795 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-09-06 14:17:02.802 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:17:02.804 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:02.804 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:02.804 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:02.804 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:02.804 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:02.804 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:02.805 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:02.805 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:02.821 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:02.822 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:02.822 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:02.822 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:02.822 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:02.829 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:17:02.829 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:02.830 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:02.830 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:02.830 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:02.830 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:02.830 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:02.830 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 46.0557ms
2024-09-06 14:17:02.830 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:02.830 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:02.830 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:02.831 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:02.831 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 48.5042ms
2024-09-06 14:17:07.331 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-09-06 14:17:07.332 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:07.332 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:07.332 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:07.332 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:07.332 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:07.332 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:07.332 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 1.0556ms
2024-09-06 14:17:07.335 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 396
2024-09-06 14:17:07.335 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:07.335 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:07.335 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:07.336 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:07.336 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:07.336 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:07.336 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:07.336 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:07.336 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:07.336 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:07.344 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:07.344 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:07.344 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:07.344 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:07.344 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:07.344 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:07.344 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:07.345 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:07.345 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:07.345 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-09-06 14:17:07.346 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-09-06 14:17:07.347 -05:00 [DBG] Connection id "0HN6EL06QF3TK", Request id "0HN6EL06QF3TK:00000017": started reading request body.
2024-09-06 14:17:07.347 -05:00 [DBG] Connection id "0HN6EL06QF3TK", Request id "0HN6EL06QF3TK:00000017": done reading request body.
2024-09-06 14:17:07.352 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-09-06 14:17:07.352 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:07.352 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:07.352 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:07.363 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:07.368 -05:00 [DBG] Guardando préstamo...
2024-09-06 14:17:07.374 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:07.376 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:07.380 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:07.383 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .Join(
        inner: DbSet<Prestamo>(), 
        outerKeySelector: P => P.Id, 
        innerKeySelector: PR => PR.IdPerfil, 
        resultSelector: (P, PR) => new { 
            P = P, 
            PR = PR
         })
    .Join(
        inner: DbSet<DetallePrestamoLibro>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.PR.Id, 
        innerKeySelector: DP => DP.IdPrestamo, 
        resultSelector: (<>h__TransparentIdentifier0, DP) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            DP = DP
         })
    .Join(
        inner: DbSet<Libro>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.DP.IdLibro, 
        innerKeySelector: L => L.Id, 
        resultSelector: (<>h__TransparentIdentifier1, L) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            L = L
         })
    .Where(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.P.Id == __idPerfil_0)
    .Select(<>h__TransparentIdentifier2 => new Libro{ 
        Id = <>h__TransparentIdentifier2.L.Id, 
        Titulo = <>h__TransparentIdentifier2.L.Titulo, 
        Autor = <>h__TransparentIdentifier2.L.Autor, 
        IdGenero = <>h__TransparentIdentifier2.L.IdGenero, 
        Anio = <>h__TransparentIdentifier2.L.Anio, 
        Activo = <>h__TransparentIdentifier2.L.Activo 
    }
    )'
2024-09-06 14:17:07.394 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Libro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            Titulo -> 1
            Autor -> 2
            IdGenero -> 3
            Anio -> 4
            Activo -> 5
        SELECT l.Id, l.Titulo, l.Autor, l.IdGenero, l.Anio, l.Activo
        FROM Perfil AS p
        INNER JOIN Prestamo AS p0 ON p.Id == p0.IdPerfil
        INNER JOIN DetallePrestamoLibro AS d ON p0.Id == d.IdPrestamo
        INNER JOIN Libro AS l ON d.IdLibro == l.Id
        WHERE p.Id == @__idPerfil_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:17:07.395 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:07.395 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:07.395 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.395 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.395 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.395 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.395 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.395 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:07.406 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:07.406 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.406 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:07.407 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.407 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.439 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Prestamo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.455 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.459 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.462 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.472 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.593 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.593 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.595 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.595 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.596 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.596 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.623 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.633 -05:00 [DBG] The foreign key property 'Prestamo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:07.640 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.640 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 16ms reading results.
2024-09-06 14:17:07.641 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.641 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.652 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.654 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.656 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.663 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.666 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.666 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.666 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.668 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.669 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.670 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.670 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.670 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.670 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.670 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.674 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.675 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:07.676 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.676 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:07.676 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.677 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.677 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.677 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.695 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.697 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.698 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.698 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.699 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.708 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.708 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.709 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.709 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.709 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.709 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.725 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.730 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.730 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-09-06 14:17:07.730 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.730 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.731 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.732 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.733 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.734 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.734 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.734 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.734 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.737 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.737 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.737 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.738 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.738 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.738 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.738 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.741 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.742 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:07.743 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.743 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:07.743 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.744 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.744 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.744 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.745 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.745 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.745 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.745 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.745 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.746 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.746 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.747 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.747 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.747 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.747 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.750 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.751 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.751 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:07.751 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.751 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.751 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.751 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.751 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.752 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.752 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.752 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.752 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.753 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.753 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.753 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.754 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.754 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.754 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.755 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.768 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:07.768 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:07.768 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.768 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:07.770 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.770 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (1ms).
2024-09-06 14:17:07.770 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.771 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.771 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.772 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.772 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.772 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:07.776 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:07.777 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.777 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.778 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.778 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.778 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.778 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.784 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:07.784 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.784 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:07.784 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.784 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.785 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:07.785 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:07.795 -05:00 [INF] Préstamo realizado exitosamente
2024-09-06 14:17:07.796 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:07.796 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:07.796 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:07.796 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:07.796 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:07.796 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:07.796 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 451.7878ms
2024-09-06 14:17:07.796 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:07.796 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:07.796 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.797 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:07.797 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 200 null application/json; charset=utf-8 461.885ms
2024-09-06 14:17:07.815 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:07.815 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:07.815 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:07.815 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:07.816 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:07.816 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:07.816 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:07.816 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.652ms
2024-09-06 14:17:07.826 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:07.826 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:07.828 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:17:07.828 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:07.828 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:07.830 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:07.830 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:07.836 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:07.836 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:07.836 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:07.836 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:07.836 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:17:07.836 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:07.837 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:07.837 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:07.837 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:07.837 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:07.837 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:07.837 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:07.838 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:07.838 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:17:07.838 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:07.838 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:07.838 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:07.838 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:07.842 -05:00 [DBG] Consultando libros...
2024-09-06 14:17:07.843 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:07.844 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:07.845 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:07.845 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.845 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.845 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:07.845 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.845 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:07.845 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:07.854 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:07.854 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.854 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:07.855 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.855 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:07.860 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:17:07.860 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:07.861 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:07.861 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:07.861 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:07.861 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:07.861 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:07.861 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 24.1522ms
2024-09-06 14:17:07.861 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:07.861 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:07.861 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:07.861 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:07.862 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 35.9547ms
2024-09-06 14:17:10.350 -05:00 [DBG] Connection id "0HN6EL06QF3TK" received FIN.
2024-09-06 14:17:10.350 -05:00 [DBG] Connection id "0HN6EL06QF3TK" is closed. The last processed stream ID was 27.
2024-09-06 14:17:10.350 -05:00 [DBG] Connection id "0HN6EL06QF3TK" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:17:10.350 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TK completed.
2024-09-06 14:17:10.352 -05:00 [DBG] Connection id "0HN6EL06QF3TK" stopped.
2024-09-06 14:17:11.933 -05:00 [DBG] Connection id "0HN6EL06QF3TL" accepted.
2024-09-06 14:17:11.933 -05:00 [DBG] Connection id "0HN6EL06QF3TL" started.
2024-09-06 14:17:11.937 -05:00 [DBG] Connection 0HN6EL06QF3TL established using the following protocol: "Tls12"
2024-09-06 14:17:11.940 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:11.941 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:11.941 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:11.941 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:11.941 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:11.941 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:11.941 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:11.942 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 1.4535ms
2024-09-06 14:17:11.946 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:11.946 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:11.947 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:11.947 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:11.947 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:11.947 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:11.947 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:11.948 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:11.948 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:11.949 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:11.949 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:11.952 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:11.952 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:11.952 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:11.952 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:11.952 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:11.952 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:11.952 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:11.952 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:11.953 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:11.953 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:11.953 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:11.953 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:11.953 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:11.953 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:11.961 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:11.962 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:11.965 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:11.967 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:11.968 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:11.968 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:11.968 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:11.968 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:11.968 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:11.968 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:11.968 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:11.984 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:11.984 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:11.984 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:11.985 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:11.985 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:11.985 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:11.985 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:11.985 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:11.986 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:11.986 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:11.986 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:11.990 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 38.141ms
2024-09-06 14:17:11.990 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:11.990 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:11.991 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:11.991 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:11.991 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 45.0499ms
2024-09-06 14:17:17.367 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:17.368 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:17.368 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:17.368 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:17.368 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:17.368 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:17.368 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:17.368 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.5867ms
2024-09-06 14:17:17.387 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:17.387 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:17.387 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:17:17.387 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:17.388 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:17.388 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:17.388 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:17.388 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:17.390 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:17.390 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:17.391 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:17.391 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:17:17.392 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:17.392 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:17.392 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:17.392 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:17.392 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:17.393 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:17.393 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:17.393 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:17.394 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:17:17.394 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:17.394 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:17.394 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:17.394 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:17.397 -05:00 [DBG] Consultando libros...
2024-09-06 14:17:17.398 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:17.399 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:17.399 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:17.399 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:17.399 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:17.399 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:17.399 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:17.399 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:17.399 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:17.404 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:17.404 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:17.404 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:17.404 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:17.404 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:17.410 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:17:17.410 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:17.410 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:17.410 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:17.410 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:17.410 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:17.410 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:17.411 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 17.9917ms
2024-09-06 14:17:17.411 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:17.411 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:17.411 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:17.411 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:17.411 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 36.424ms
2024-09-06 14:17:20.367 -05:00 [DBG] Connection id "0HN6EL06QF3TL" received FIN.
2024-09-06 14:17:20.367 -05:00 [DBG] Connection id "0HN6EL06QF3TL" is closed. The last processed stream ID was 7.
2024-09-06 14:17:20.368 -05:00 [DBG] Connection id "0HN6EL06QF3TL" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:17:20.368 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TL completed.
2024-09-06 14:17:20.368 -05:00 [DBG] Connection id "0HN6EL06QF3TL" stopped.
2024-09-06 14:17:21.059 -05:00 [DBG] Connection id "0HN6EL06QF3TM" accepted.
2024-09-06 14:17:21.059 -05:00 [DBG] Connection id "0HN6EL06QF3TM" started.
2024-09-06 14:17:21.061 -05:00 [DBG] Connection 0HN6EL06QF3TM established using the following protocol: "Tls12"
2024-09-06 14:17:21.062 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-09-06 14:17:21.063 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:21.063 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:21.063 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:21.063 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:21.063 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:21.063 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:21.063 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 0.8643ms
2024-09-06 14:17:21.065 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 297
2024-09-06 14:17:21.066 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:21.066 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:21.066 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:21.066 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:21.066 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:21.066 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:21.066 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:21.066 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:21.066 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:21.066 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:21.066 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:21.066 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:21.066 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:21.066 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:21.066 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:21.067 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:21.067 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:21.067 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:21.067 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:21.067 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-09-06 14:17:21.067 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-09-06 14:17:21.067 -05:00 [DBG] Connection id "0HN6EL06QF3TM", Request id "0HN6EL06QF3TM:00000003": started reading request body.
2024-09-06 14:17:21.067 -05:00 [DBG] Connection id "0HN6EL06QF3TM", Request id "0HN6EL06QF3TM:00000003": done reading request body.
2024-09-06 14:17:21.067 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-09-06 14:17:21.067 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:21.067 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:21.067 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:21.068 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:21.070 -05:00 [DBG] Guardando préstamo...
2024-09-06 14:17:21.074 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:21.075 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:21.078 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:21.078 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:21.078 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:21.079 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:21.079 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:21.079 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:21.079 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:21.079 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:21.079 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:21.085 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:21.086 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:21.086 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:21.086 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:21.086 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:21.107 -05:00 [WRN] Aún hay préstamos activos del perfil con id 31
2024-09-06 14:17:21.346 -05:00 [ERR] Error al hacer el préstamo: Aún tiene préstamos activos
2024-09-06 14:17:21.598 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:21.599 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:21.599 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:21.599 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:21.599 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-09-06 14:17:21.599 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-09-06 14:17:21.599 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 532.7785ms
2024-09-06 14:17:21.600 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:21.600 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:21.600 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:21.600 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:21.600 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 400 null text/plain; charset=utf-8 534.9053ms
2024-09-06 14:17:26.673 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:26.673 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:26.673 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:26.673 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:26.673 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:26.673 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:26.673 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:26.674 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.7283ms
2024-09-06 14:17:26.692 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:26.692 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:26.692 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:26.692 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:26.692 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:26.692 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:26.692 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:26.693 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:26.693 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:26.693 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:26.693 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:26.693 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:26.693 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:26.693 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:26.693 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:26.694 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:26.694 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:26.694 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:26.694 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:26.694 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:26.695 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:26.695 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:26.695 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:26.695 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:26.696 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:26.702 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:26.703 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:26.717 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:26.717 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:26.717 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:26.718 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:26.718 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:26.718 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:26.719 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:26.719 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:26.719 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:26.731 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:26.732 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:26.732 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:26.732 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:26.732 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:26.732 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:26.732 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:26.732 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:26.732 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:26.733 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:26.733 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:26.733 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 39.0781ms
2024-09-06 14:17:26.733 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:26.733 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:26.733 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:26.733 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:26.733 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 41.7771ms
2024-09-06 14:17:27.628 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:27.628 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:27.628 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:27.628 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:27.628 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:27.629 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:27.629 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:27.629 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.7948ms
2024-09-06 14:17:27.631 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:27.631 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:27.632 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:27.632 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:27.632 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:27.632 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:27.632 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:27.632 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:27.632 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:27.632 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:27.633 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:27.641 -05:00 [INF] Route matched with {action = "EliminarPrestamo", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarPrestamo(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:27.641 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:27.641 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:27.641 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:27.641 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:27.641 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:27.642 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:27.642 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:27.642 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:27.642 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:27.642 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.642 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.643 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:27.643 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.651 -05:00 [DBG] Eliminando préstamo del perfil con id 31
2024-09-06 14:17:27.654 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:27.656 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:27.661 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:27.661 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:27.661 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:27.662 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.662 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.662 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.662 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.662 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.662 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:27.676 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:27.676 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.677 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.677 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.677 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.679 -05:00 [DBG] Compiling query expression: 
'DbSet<Prestamo>()
    .FirstOrDefault(p => p.IdPerfil == __idPerfil_0)'
2024-09-06 14:17:27.685 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Prestamo>(
    asyncEnumerable: new SingleQueryingEnumerable<Prestamo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Prestamo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Prestamo.FechaPrestamo (DateTime) Required, 1], [Property: Prestamo.IdPerfil (int) Required FK Index, 2] }
            SELECT TOP(1) p.Id, p.FechaPrestamo, p.IdPerfil
            FROM Prestamo AS p
            WHERE p.IdPerfil == @__idPerfil_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Prestamo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-09-06 14:17:27.688 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.689 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.689 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.689 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.690 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.690 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-09-06 14:17:27.699 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-09-06 14:17:27.699 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.701 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.701 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:27.701 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.701 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.703 -05:00 [DBG] Compiling query expression: 
'DbSet<DetallePrestamoLibro>()
    .Where(d => d.IdPrestamo == __prestamo_Id_0)'
2024-09-06 14:17:27.713 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<DetallePrestamoLibro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DetallePrestamoLibro.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DetallePrestamoLibro.IdLibro (int) Required FK Index, 1], [Property: DetallePrestamoLibro.IdPrestamo (int) Required FK Index, 2] }
        SELECT d.Id, d.IdLibro, d.IdPrestamo
        FROM DetallePrestamoLibro AS d
        WHERE d.IdPrestamo == @__prestamo_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, DetallePrestamoLibro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:17:27.716 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.716 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.716 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.717 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.717 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.717 -05:00 [DBG] Executing DbCommand [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-09-06 14:17:27.724 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-09-06 14:17:27.725 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.725 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.725 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.725 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.725 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:27.725 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.725 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.726 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.727 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.727 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.727 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.727 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.728 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:27.733 -05:00 [DBG] Executing 3 update commands as a batch.
2024-09-06 14:17:27.737 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.738 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.742 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-09-06 14:17:27.750 -05:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-09-06 14:17:27.752 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.752 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.753 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-09-06 14:17:27.753 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p2;
2024-09-06 14:17:27.758 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p2;
2024-09-06 14:17:27.760 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.760 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:27.763 -05:00 [DBG] Committing transaction.
2024-09-06 14:17:27.769 -05:00 [DBG] Committed transaction.
2024-09-06 14:17:27.774 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.775 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.778 -05:00 [DBG] Disposing transaction.
2024-09-06 14:17:27.786 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.786 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.786 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.786 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 3 entities written to the database.
2024-09-06 14:17:27.787 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.789 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.789 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.789 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:27.789 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.789 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.789 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.789 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.789 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.789 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-09-06 14:17:27.800 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-09-06 14:17:27.800 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.801 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.801 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.801 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.801 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.801 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:27.801 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.801 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.801 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.801 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:27.802 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.802 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.802 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.802 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.802 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.802 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.807 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.807 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.807 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.807 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.807 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.807 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.807 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:27.807 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.808 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.808 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.808 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:27.808 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.808 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.808 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.809 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.809 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.809 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.810 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.810 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.810 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.810 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.810 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.811 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.811 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:27.811 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.811 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.811 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:27.811 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:27.811 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.812 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.812 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.812 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.812 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.812 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.814 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:27.814 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.814 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.814 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.814 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.814 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:27.814 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:27.817 -05:00 [INF] Se eliminó el préstamo del perfil con id 31
2024-09-06 14:17:27.817 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:27.818 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:27.818 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:27.818 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:27.818 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:27.818 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:27.819 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend) in 177.6078ms
2024-09-06 14:17:27.819 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:27.819 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:27.819 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.820 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:27.820 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 188.8263ms
2024-09-06 14:17:27.824 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:27.824 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:27.824 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:27.824 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:27.824 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:27.824 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:27.824 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:27.825 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:27.825 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:27.825 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:27.825 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:27.825 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:27.825 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:27.825 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:27.825 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:27.826 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:27.828 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:27.828 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:27.829 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:27.829 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:27.829 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:27.829 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.829 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.829 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:27.830 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:27.835 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:27.836 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:27.840 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:27.842 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:27.842 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:27.842 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.842 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.842 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:27.842 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.842 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:27.843 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:27.849 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:27.849 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.849 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:27.849 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.849 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:27.849 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:27.849 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:27.849 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:27.850 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:27.850 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:27.850 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:27.850 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 21.5871ms
2024-09-06 14:17:27.850 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:27.850 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:27.850 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:27.850 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:27.850 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 26.6815ms
2024-09-06 14:17:30.383 -05:00 [DBG] Connection id "0HN6EL06QF3TM" received FIN.
2024-09-06 14:17:30.384 -05:00 [DBG] Connection id "0HN6EL06QF3TM" is closed. The last processed stream ID was 13.
2024-09-06 14:17:30.384 -05:00 [DBG] Connection id "0HN6EL06QF3TM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:17:30.389 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TM completed.
2024-09-06 14:17:30.391 -05:00 [DBG] Connection id "0HN6EL06QF3TM" stopped.
2024-09-06 14:17:35.042 -05:00 [DBG] Connection id "0HN6EL06QF3TN" accepted.
2024-09-06 14:17:35.042 -05:00 [DBG] Connection id "0HN6EL06QF3TN" started.
2024-09-06 14:17:35.044 -05:00 [DBG] Connection 0HN6EL06QF3TN established using the following protocol: "Tls12"
2024-09-06 14:17:35.046 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-09-06 14:17:35.047 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:35.047 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:35.047 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:35.047 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:35.047 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:35.047 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:35.047 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 0.5261ms
2024-09-06 14:17:35.052 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-09-06 14:17:35.052 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:35.052 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:35.052 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:35.052 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:35.052 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:35.052 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:35.053 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:35.053 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:35.054 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:35.054 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:35.063 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:35.063 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:35.063 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:35.063 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:35.063 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:35.063 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:35.063 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:35.063 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:35.067 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:35.067 -05:00 [DBG] Compiling query expression: 
'DbSet<Prestamo>()'
2024-09-06 14:17:35.070 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Prestamo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Prestamo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Prestamo.FechaPrestamo (DateTime) Required, 1], [Property: Prestamo.IdPerfil (int) Required FK Index, 2] }
        SELECT p.Id, p.FechaPrestamo, p.IdPerfil
        FROM Prestamo AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Prestamo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-09-06 14:17:35.070 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:35.070 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:35.070 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:35.070 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:35.070 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:35.070 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:35.071 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:35.071 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-09-06 14:17:35.080 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-09-06 14:17:35.080 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:35.080 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:35.080 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:35.080 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:35.081 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:35.081 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:35.081 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:35.081 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:35.081 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:35.081 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:35.082 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 18.9598ms
2024-09-06 14:17:35.082 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:35.082 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:35.083 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:35.083 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:35.083 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 30.9676ms
2024-09-06 14:17:38.378 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:38.378 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:38.379 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:38.379 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:38.379 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:38.379 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:38.379 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:38.383 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 5.2154ms
2024-09-06 14:17:38.395 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:38.395 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:38.395 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:17:38.395 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:38.395 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:38.395 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:38.396 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:38.396 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:38.396 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:38.397 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:38.397 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:38.397 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:17:38.398 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:38.398 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:38.398 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:38.399 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:38.399 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:38.399 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:38.399 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:38.400 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:38.400 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:17:38.400 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:38.400 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:38.400 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:38.400 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:38.403 -05:00 [DBG] Consultando libros...
2024-09-06 14:17:38.406 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:38.407 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:38.407 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:38.407 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:38.407 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:38.407 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:38.407 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:38.407 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:38.407 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:38.418 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:38.418 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:38.418 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:38.419 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:38.419 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:38.424 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:17:38.424 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:38.424 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:38.424 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:38.424 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:38.424 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:38.424 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:38.425 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 25.7522ms
2024-09-06 14:17:38.425 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:38.425 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:38.425 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:38.425 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:38.425 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 30.4752ms
2024-09-06 14:17:40.402 -05:00 [DBG] Connection id "0HN6EL06QF3TN" received FIN.
2024-09-06 14:17:40.403 -05:00 [DBG] Connection id "0HN6EL06QF3TN" is closed. The last processed stream ID was 7.
2024-09-06 14:17:40.403 -05:00 [DBG] Connection id "0HN6EL06QF3TN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:17:40.408 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TN completed.
2024-09-06 14:17:40.409 -05:00 [DBG] Connection id "0HN6EL06QF3TN" stopped.
2024-09-06 14:17:41.107 -05:00 [DBG] Connection id "0HN6EL06QF3TO" accepted.
2024-09-06 14:17:41.107 -05:00 [DBG] Connection id "0HN6EL06QF3TO" started.
2024-09-06 14:17:41.109 -05:00 [DBG] Connection 0HN6EL06QF3TO established using the following protocol: "Tls12"
2024-09-06 14:17:41.111 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-09-06 14:17:41.111 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:41.111 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:41.111 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:41.111 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:41.111 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:41.112 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:41.112 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 1.6675ms
2024-09-06 14:17:41.115 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 297
2024-09-06 14:17:41.115 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:41.115 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:41.115 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:41.115 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:41.115 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:41.115 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:41.116 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:41.116 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:41.116 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:41.116 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:41.116 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:41.116 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:41.116 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:41.116 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:41.116 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:41.116 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:41.117 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:41.117 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:41.117 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:41.117 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-09-06 14:17:41.117 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-09-06 14:17:41.117 -05:00 [DBG] Connection id "0HN6EL06QF3TO", Request id "0HN6EL06QF3TO:00000003": started reading request body.
2024-09-06 14:17:41.117 -05:00 [DBG] Connection id "0HN6EL06QF3TO", Request id "0HN6EL06QF3TO:00000003": done reading request body.
2024-09-06 14:17:41.117 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-09-06 14:17:41.118 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:41.118 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:41.118 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-09-06 14:17:41.118 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-09-06 14:17:41.125 -05:00 [DBG] Guardando préstamo...
2024-09-06 14:17:41.129 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:41.130 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:41.134 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:41.135 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:41.135 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:41.135 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.136 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.136 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.136 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.136 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.136 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:41.158 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:41.158 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.158 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.158 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.158 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.158 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Prestamo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.159 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.159 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.159 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.159 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:41.159 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.160 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.160 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.160 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.160 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.160 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.164 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.164 -05:00 [DBG] The foreign key property 'Prestamo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:41.164 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.164 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.164 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.164 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.164 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.165 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:41.165 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.165 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.165 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.165 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.165 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.165 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:41.166 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.166 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.166 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.166 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.166 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.166 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.170 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.170 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:41.170 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.170 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.170 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.171 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.172 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.172 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:41.172 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.172 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.172 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.172 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.173 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:41.174 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.174 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.174 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.174 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.174 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.174 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:41.178 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:41.178 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.178 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.178 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.178 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.178 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.178 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:41.178 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.178 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.178 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.178 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.178 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.178 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:41.179 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.179 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.179 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.179 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.179 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.179 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.180 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-09-06 14:17:41.180 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-09-06 14:17:41.180 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.181 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.181 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.181 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.181 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.181 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:41.181 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.181 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.181 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.181 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:41.181 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:41.182 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.182 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.182 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.182 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.182 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.182 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:41.183 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:41.183 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.183 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.183 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.183 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.183 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:41.183 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:41.185 -05:00 [INF] Préstamo realizado exitosamente
2024-09-06 14:17:41.185 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:41.186 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:41.186 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:41.186 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:41.186 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:41.186 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:41.186 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 69.4887ms
2024-09-06 14:17:41.186 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-09-06 14:17:41.186 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:41.186 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.186 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:41.187 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 200 null application/json; charset=utf-8 72.336ms
2024-09-06 14:17:41.194 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:17:41.194 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:17:41.194 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:17:41.194 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:41.194 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:41.194 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:41.194 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:41.194 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:41.194 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:41.194 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:41.195 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:41.195 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:17:41.195 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:41.195 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:41.195 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:41.195 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:41.195 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:41.195 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:41.195 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:17:41.195 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:41.195 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:17:41.196 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:41.196 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:41.196 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:17:41.196 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:17:41.199 -05:00 [DBG] Consultando libros...
2024-09-06 14:17:41.199 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:41.200 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:41.200 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:41.200 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.200 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.200 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:41.201 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.201 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:41.201 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:41.209 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:17:41.209 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.209 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:41.209 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.209 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:41.213 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:17:41.214 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:41.214 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:41.214 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:41.214 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:41.214 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:41.214 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:41.214 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 19.3635ms
2024-09-06 14:17:41.215 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:17:41.215 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:41.215 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:41.215 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:41.215 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 21.4491ms
2024-09-06 14:17:42.669 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-09-06 14:17:42.670 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:42.670 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:42.670 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:42.670 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:42.671 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:42.671 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:42.671 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 5.706ms
2024-09-06 14:17:42.676 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-09-06 14:17:42.677 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:42.677 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-09-06 14:17:42.677 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:42.677 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:42.677 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:42.677 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:42.677 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:42.677 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:42.677 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:42.678 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:42.678 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:42.678 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:42.678 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:42.678 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:42.678 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:42.678 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:42.678 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:42.678 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:42.679 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:42.679 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:42.679 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:42.680 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.680 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.680 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:42.680 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.680 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.680 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-09-06 14:17:42.704 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-09-06 14:17:42.707 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:42.708 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.708 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-09-06 14:17:42.708 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.708 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:42.716 -05:00 [DBG] Consultando perfil con id 31
2024-09-06 14:17:42.716 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.716 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.716 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:42.716 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.716 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.717 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:17:42.719 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-09-06 14:17:42.719 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:42.724 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:42.724 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.724 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-09-06 14:17:42.724 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.724 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:42.727 -05:00 [INF] Perfil encontrado con id: 31
2024-09-06 14:17:42.731 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:42.734 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:42.734 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.735 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.735 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:42.735 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.735 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:42.735 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:42.744 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:42.744 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.744 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:42.744 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.744 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:42.746 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:42.746 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:42.746 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:42.746 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:42.746 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:42.746 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:17:42.747 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 69.4239ms
2024-09-06 14:17:42.748 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-09-06 14:17:42.748 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:42.748 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:42.748 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:42.748 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 71.7057ms
2024-09-06 14:17:50.407 -05:00 [DBG] Connection id "0HN6EL06QF3TO" received FIN.
2024-09-06 14:17:50.408 -05:00 [DBG] Connection id "0HN6EL06QF3TO" is closed. The last processed stream ID was 9.
2024-09-06 14:17:50.408 -05:00 [DBG] Connection id "0HN6EL06QF3TO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:17:50.411 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TO completed.
2024-09-06 14:17:50.411 -05:00 [DBG] Connection id "0HN6EL06QF3TO" stopped.
2024-09-06 14:17:55.293 -05:00 [DBG] Connection id "0HN6EL06QF3TP" accepted.
2024-09-06 14:17:55.294 -05:00 [DBG] Connection id "0HN6EL06QF3TP" started.
2024-09-06 14:17:55.303 -05:00 [DBG] Connection 0HN6EL06QF3TP established using the following protocol: "Tls12"
2024-09-06 14:17:55.316 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:55.316 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:55.316 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:55.316 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:55.316 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:55.316 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:55.317 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:55.317 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.836ms
2024-09-06 14:17:55.334 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:55.334 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:55.335 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:55.335 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:55.335 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:55.336 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:55.336 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:55.336 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:55.336 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:55.336 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:55.336 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:55.337 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:55.338 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:55.340 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:55.340 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:55.340 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:55.340 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:55.340 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:55.342 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:55.342 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:55.343 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:55.343 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:55.343 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:55.343 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:55.343 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:55.346 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:55.347 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:55.351 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:55.351 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:55.351 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:55.352 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:55.352 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:55.352 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:55.352 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:55.352 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:55.352 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:55.365 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:55.365 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:55.365 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:55.366 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:55.366 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:55.366 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:55.366 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:55.366 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:55.366 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:55.366 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:55.367 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:55.367 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 26.9236ms
2024-09-06 14:17:55.367 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:55.368 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:55.368 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:55.368 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:55.368 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 34.057ms
2024-09-06 14:17:56.184 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:56.184 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:56.184 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:17:56.185 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:56.185 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:56.185 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:56.185 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:17:56.185 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 1.2278ms
2024-09-06 14:17:56.188 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:56.188 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:56.188 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:56.188 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:56.188 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:56.189 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:56.189 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:56.189 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:56.189 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:56.189 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:56.189 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:56.189 -05:00 [INF] Route matched with {action = "EliminarPrestamo", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarPrestamo(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:56.189 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:56.189 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:56.189 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:56.189 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:56.190 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:56.190 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:56.190 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:56.190 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:56.190 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:56.190 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.190 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.190 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:56.191 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.193 -05:00 [DBG] Eliminando préstamo del perfil con id 31
2024-09-06 14:17:56.196 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:56.197 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:56.199 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:56.200 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:56.200 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:56.200 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.200 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.200 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.200 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.200 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.201 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:56.218 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:56.219 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.219 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.219 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.219 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.221 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.221 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.221 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.221 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.222 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.222 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-09-06 14:17:56.226 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-09-06 14:17:56.226 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.227 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.227 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.227 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.227 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.227 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.228 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.228 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.228 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.228 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.228 -05:00 [DBG] Executing DbCommand [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-09-06 14:17:56.231 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-09-06 14:17:56.231 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.231 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.231 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.232 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.232 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.232 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.232 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.232 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.232 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.232 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.232 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:56.233 -05:00 [DBG] Executing 2 update commands as a batch.
2024-09-06 14:17:56.233 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.233 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.233 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-09-06 14:17:56.234 -05:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-09-06 14:17:56.234 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.234 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.234 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.234 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
2024-09-06 14:17:56.240 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
2024-09-06 14:17:56.241 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.241 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.241 -05:00 [DBG] Committing transaction.
2024-09-06 14:17:56.242 -05:00 [DBG] Committed transaction.
2024-09-06 14:17:56.242 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.242 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.242 -05:00 [DBG] Disposing transaction.
2024-09-06 14:17:56.242 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.242 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.242 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 2 entities written to the database.
2024-09-06 14:17:56.242 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.242 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.242 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.242 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:56.243 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.243 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.243 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.243 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.243 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.243 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-09-06 14:17:56.247 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-09-06 14:17:56.248 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.248 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.248 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.248 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.248 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.248 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:56.249 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.249 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.249 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.249 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:56.250 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.250 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.250 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.250 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.250 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.250 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:56.257 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:56.257 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.257 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.257 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.257 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.257 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.257 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:56.257 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.257 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.257 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-09-06 14:17:56.258 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-09-06 14:17:56.258 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.258 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.258 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.258 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.258 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.258 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:56.259 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-09-06 14:17:56.259 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.259 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.260 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.260 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.260 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:17:56.260 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-09-06 14:17:56.262 -05:00 [INF] Se eliminó el préstamo del perfil con id 31
2024-09-06 14:17:56.263 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:56.263 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:56.263 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:56.263 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:56.263 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:56.263 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:56.263 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend) in 73.8453ms
2024-09-06 14:17:56.264 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-09-06 14:17:56.264 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:56.264 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.264 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:56.264 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 75.8287ms
2024-09-06 14:17:56.268 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-09-06 14:17:56.269 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-09-06 14:17:56.269 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-09-06 14:17:56.269 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:56.269 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:17:56.269 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:17:56.269 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:17:56.269 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:17:56.269 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:17:56.269 -05:00 [DBG] Authorization was successful.
2024-09-06 14:17:56.269 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:56.269 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-09-06 14:17:56.269 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:17:56.270 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:17:56.270 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:17:56.270 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:17:56.270 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:17:56.270 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:56.272 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-09-06 14:17:56.272 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:56.272 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-09-06 14:17:56.272 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.272 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.272 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-09-06 14:17:56.272 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-09-06 14:17:56.275 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-09-06 14:17:56.276 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:17:56.283 -05:00 [INF] Libros encontrados exitosamente
2024-09-06 14:17:56.284 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:17:56.284 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:17:56.284 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.284 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.284 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:17:56.284 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.284 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:17:56.285 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:56.285 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-09-06 14:17:56.285 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.286 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:17:56.286 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.286 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:17:56.286 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:17:56.286 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:17:56.286 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:17:56.286 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:17:56.286 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:17:56.286 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-09-06 14:17:56.286 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 16.5213ms
2024-09-06 14:17:56.286 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-09-06 14:17:56.288 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:17:56.288 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:17:56.288 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:17:56.288 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 20.2435ms
2024-09-06 14:18:00.417 -05:00 [DBG] Connection id "0HN6EL06QF3TP" received FIN.
2024-09-06 14:18:00.425 -05:00 [DBG] Connection id "0HN6EL06QF3TP" is closed. The last processed stream ID was 9.
2024-09-06 14:18:00.425 -05:00 [DBG] Connection id "0HN6EL06QF3TP" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:18:00.427 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TP completed.
2024-09-06 14:18:00.429 -05:00 [DBG] Connection id "0HN6EL06QF3TP" stopped.
2024-09-06 14:18:03.540 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" accepted.
2024-09-06 14:18:03.541 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" started.
2024-09-06 14:18:03.544 -05:00 [DBG] Connection 0HN6EL06QF3TQ established using the following protocol: "Tls12"
2024-09-06 14:18:03.545 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:18:03.545 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-09-06 14:18:03.545 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:18:03.545 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:18:03.545 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:18:03.545 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:18:03.545 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:03.545 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:03.545 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:03.546 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:18:03.546 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.603ms
2024-09-06 14:18:03.546 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:03.546 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:03.546 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:03.546 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:18:03.546 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.3969ms
2024-09-06 14:18:03.553 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-09-06 14:18:03.553 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:18:03.553 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-09-06 14:18:03.554 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:18:03.554 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.554 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-09-06 14:18:03.554 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:03.554 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-09-06 14:18:03.554 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:03.554 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.554 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:03.554 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:03.555 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:03.555 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:03.555 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:18:03.555 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:18:03.555 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:18:03.555 -05:00 [DBG] Authorization was successful.
2024-09-06 14:18:03.555 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:18:03.555 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.555 -05:00 [DBG] Authorization was successful.
2024-09-06 14:18:03.555 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.555 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:18:03.555 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:18:03.556 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:18:03.556 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:18:03.556 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:18:03.556 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:18:03.557 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:03.557 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:03.557 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:18:03.557 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:03.555 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:18:03.561 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:18:03.561 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:18:03.561 -05:00 [DBG] Consultando libros...
2024-09-06 14:18:03.561 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:18:03.561 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:18:03.562 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-09-06 14:18:03.562 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:18:03.562 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:18:03.562 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:18:03.563 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:18:03.563 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.563 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.563 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:18:03.563 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:18:03.563 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:18:03.563 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:03.563 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.563 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:03.563 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:18:03.563 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.563 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:18:03.563 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:03.563 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:03.564 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:18:03.568 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-09-06 14:18:03.569 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.569 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.569 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.570 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.570 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.572 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.572 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.572 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-09-06 14:18:03.573 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.574 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-09-06 14:18:03.574 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.574 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:18:03.574 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:18:03.574 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:18:03.574 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:18:03.574 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:18:03.574 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:18:03.574 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:18:03.575 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 13.2942ms
2024-09-06 14:18:03.575 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.575 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:18:03.575 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.575 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:18:03.575 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 22.5722ms
2024-09-06 14:18:03.576 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-09-06 14:18:03.576 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.576 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:18:03.576 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.576 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:18:03.580 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:18:03.580 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:18:03.580 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:18:03.580 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:18:03.580 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:18:03.580 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:18:03.580 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:18:03.580 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 24.8659ms
2024-09-06 14:18:03.580 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:03.581 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:18:03.581 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:03.581 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:18:03.581 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 28.2684ms
2024-09-06 14:18:06.974 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:18:06.974 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:18:06.974 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-09-06 14:18:06.974 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:06.974 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:06.974 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:06.974 -05:00 [DBG] The request is a preflight request.
2024-09-06 14:18:06.975 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.6523ms
2024-09-06 14:18:06.979 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-09-06 14:18:06.979 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-09-06 14:18:06.979 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-09-06 14:18:06.979 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:06.980 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-09-06 14:18:06.980 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-09-06 14:18:06.980 -05:00 [INF] CORS policy execution successful.
2024-09-06 14:18:06.980 -05:00 [DBG] Successfully validated the token.
2024-09-06 14:18:06.980 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-09-06 14:18:06.981 -05:00 [DBG] Authorization was successful.
2024-09-06 14:18:06.981 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:06.981 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-09-06 14:18:06.981 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-09-06 14:18:06.981 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-09-06 14:18:06.981 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-09-06 14:18:06.981 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-09-06 14:18:06.981 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-09-06 14:18:06.981 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:18:06.982 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-09-06 14:18:06.982 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:18:06.982 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-09-06 14:18:06.982 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:06.982 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:06.983 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-09-06 14:18:06.983 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-09-06 14:18:06.986 -05:00 [DBG] Consultando libros...
2024-09-06 14:18:06.988 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-09-06 14:18:06.989 -05:00 [DBG] Creating DbConnection.
2024-09-06 14:18:06.989 -05:00 [DBG] Created DbConnection. (0ms).
2024-09-06 14:18:06.989 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:06.989 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:06.989 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-09-06 14:18:06.990 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:06.990 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-09-06 14:18:06.990 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:18:06.995 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-09-06 14:18:06.996 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:06.996 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-09-06 14:18:06.996 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:06.996 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-09-06 14:18:07.002 -05:00 [INF] Consulta de libros exitosa
2024-09-06 14:18:07.002 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-09-06 14:18:07.002 -05:00 [DBG] No information found on request to perform content negotiation.
2024-09-06 14:18:07.002 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-09-06 14:18:07.003 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-09-06 14:18:07.003 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-09-06 14:18:07.003 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-09-06 14:18:07.006 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 24.0547ms
2024-09-06 14:18:07.006 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-09-06 14:18:07.006 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-09-06 14:18:07.006 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-09-06 14:18:07.006 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-09-06 14:18:07.006 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 27.0388ms
2024-09-06 14:18:10.423 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" received FIN.
2024-09-06 14:18:10.423 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" is closed. The last processed stream ID was 11.
2024-09-06 14:18:10.423 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-09-06 14:18:10.424 -05:00 [DBG] The connection queue processing loop for 0HN6EL06QF3TQ completed.
2024-09-06 14:18:10.424 -05:00 [DBG] Connection id "0HN6EL06QF3TQ" stopped.
