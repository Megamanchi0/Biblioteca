2024-08-01 09:12:11.880 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-01 09:12:12.329 -05:00 [DBG] Hosting starting
2024-08-01 09:12:12.530 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-01 09:12:12.550 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-08-01 09:12:12.603 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-08-01 09:12:12.630 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-08-01 09:12:12.636 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:12:12.640 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-01 09:12:12.643 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:12:12.654 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-01 09:12:12.662 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-01 09:12:12.670 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-08-01 09:12:12.673 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-08-01 09:12:13.830 -05:00 [INF] Now listening on: https://localhost:7299
2024-08-01 09:12:13.830 -05:00 [INF] Now listening on: http://localhost:5219
2024-08-01 09:12:13.830 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-08-01 09:12:13.830 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-01 09:12:13.830 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-01 09:12:13.831 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-01 09:12:13.832 -05:00 [INF] Hosting environment: Development
2024-08-01 09:12:13.832 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-08-01 09:12:13.833 -05:00 [DBG] Hosting started
2024-08-01 09:12:14.152 -05:00 [DBG] Connection id "0HN5I6FOL3M7E" accepted.
2024-08-01 09:12:14.152 -05:00 [DBG] Connection id "0HN5I6FOL3M7D" accepted.
2024-08-01 09:12:14.154 -05:00 [DBG] Connection id "0HN5I6FOL3M7E" started.
2024-08-01 09:12:14.154 -05:00 [DBG] Connection id "0HN5I6FOL3M7D" started.
2024-08-01 09:12:14.173 -05:00 [DBG] Connection id "0HN5I6FOL3M7D" received FIN.
2024-08-01 09:12:14.178 -05:00 [DBG] Connection id "0HN5I6FOL3M7E" received FIN.
2024-08-01 09:12:14.258 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:12:14.258 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:12:14.361 -05:00 [DBG] Connection id "0HN5I6FOL3M7D" stopped.
2024-08-01 09:12:14.362 -05:00 [DBG] Connection id "0HN5I6FOL3M7E" stopped.
2024-08-01 09:12:14.374 -05:00 [DBG] Connection id "0HN5I6FOL3M7D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:12:14.374 -05:00 [DBG] Connection id "0HN5I6FOL3M7E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:12:14.776 -05:00 [DBG] Connection id "0HN5I6FOL3M7F" accepted.
2024-08-01 09:12:14.795 -05:00 [DBG] Connection id "0HN5I6FOL3M7F" started.
2024-08-01 09:12:15.007 -05:00 [DBG] Connection 0HN5I6FOL3M7F established using the following protocol: "Tls12"
2024-08-01 09:12:15.165 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-08-01 09:12:16.227 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-01 09:12:16.277 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-01 09:12:16.278 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:12:16.511 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-08-01 09:12:16.513 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-01 09:12:16.607 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-08-01 09:12:16.608 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-01 09:12:16.612 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1458.5114ms
2024-08-01 09:12:16.654 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-08-01 09:12:16.669 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-08-01 09:12:16.730 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 51.0706ms
2024-08-01 09:12:17.413 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 744.0755ms
2024-08-01 09:12:18.259 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-08-01 09:12:18.259 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-01 09:12:18.260 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:12:18.652 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 394.2386ms
2024-08-01 09:12:24.709 -05:00 [DBG] Connection id "0HN5I6FOL3M7G" accepted.
2024-08-01 09:12:24.709 -05:00 [DBG] Connection id "0HN5I6FOL3M7G" started.
2024-08-01 09:12:24.736 -05:00 [DBG] Connection 0HN5I6FOL3M7G established using the following protocol: "Tls12"
2024-08-01 09:12:24.739 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-08-01 09:12:24.752 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-01 09:12:24.753 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:24.756 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:24.757 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:24.758 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:24.759 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:24.761 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 21.9917ms
2024-08-01 09:12:24.763 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-08-01 09:12:24.767 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-01 09:12:24.770 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-08-01 09:12:24.770 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-01 09:12:24.770 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:24.771 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:24.771 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:24.918 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:12:24.921 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-01 09:12:24.956 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-08-01 09:12:24.958 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:24.958 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:24.958 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:24.959 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:24.959 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:24.963 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-01 09:12:25.261 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-01 09:12:25.301 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-01 09:12:25.340 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-01 09:12:25.346 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-08-01 09:12:25.350 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-01 09:12:25.367 -05:00 [DBG] Connection id "0HN5I6FOL3M7G", Request id "0HN5I6FOL3M7G:00000003": started reading request body.
2024-08-01 09:12:25.368 -05:00 [DBG] Connection id "0HN5I6FOL3M7G", Request id "0HN5I6FOL3M7G:00000003": done reading request body.
2024-08-01 09:12:25.387 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-08-01 09:12:25.388 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-01 09:12:25.388 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-01 09:12:25.389 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-01 09:12:25.406 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-01 09:12:25.551 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:25.588 -05:00 [DBG] Iniciando sesión...
2024-08-01 09:12:27.521 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:27.633 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-08-01 09:12:28.075 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-08-01 09:12:28.130 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:28.175 -05:00 [DBG] Created DbConnection. (41ms).
2024-08-01 09:12:28.180 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:28.939 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:28.945 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:28.961 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2024-08-01 09:12:28.982 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (36ms).
2024-08-01 09:12:29.002 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-01 09:12:29.135 -05:00 [INF] Executed DbCommand (135ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-01 09:12:29.229 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:29.304 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.335 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 186ms reading results.
2024-08-01 09:12:29.338 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.350 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (11ms).
2024-08-01 09:12:29.353 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-08-01 09:12:29.360 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-08-01 09:12:29.367 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.369 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.369 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:29.369 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:29.370 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:29.371 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-01 09:12:29.379 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-01 09:12:29.409 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:29.433 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:29.438 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.438 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 58ms reading results.
2024-08-01 09:12:29.438 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.439 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:12:29.515 -05:00 [INF] Inicio de sesión exitoso
2024-08-01 09:12:29.532 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3968.268ms.
2024-08-01 09:12:29.548 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:29.552 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:29.552 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:29.553 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:29.555 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:29.556 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-01 09:12:29.574 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 4608.5643ms
2024-08-01 09:12:29.577 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-01 09:12:29.585 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:29.601 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.617 -05:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-08-01 09:12:29.621 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 4856.3478ms
2024-08-01 09:12:29.623 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-08-01 09:12:29.623 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-01 09:12:29.623 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 09:12:29.623 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:29.623 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:29.624 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-01 09:12:29.624 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:29.624 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:29.624 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:29.624 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:29.625 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:29.625 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:29.625 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.8565ms
2024-08-01 09:12:29.625 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:29.625 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:29.625 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 2.312ms
2024-08-01 09:12:29.634 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-08-01 09:12:29.634 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-01 09:12:29.635 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-01 09:12:29.635 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-08-01 09:12:29.635 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 09:12:29.635 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 09:12:29.635 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-01 09:12:29.635 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 09:12:29.635 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:29.635 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:29.635 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:29.635 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:29.635 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:29.635 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:29.743 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:12:29.743 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:12:29.746 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:12:29.746 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:12:29.758 -05:00 [DBG] Authorization was successful.
2024-08-01 09:12:29.758 -05:00 [DBG] Authorization was successful.
2024-08-01 09:12:29.759 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 09:12:29.759 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 09:12:29.765 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-01 09:12:29.766 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:29.766 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:29.766 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:29.766 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:29.766 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:29.766 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 09:12:29.768 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 09:12:29.776 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 09:12:29.776 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-08-01 09:12:29.776 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:29.776 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:29.777 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:29.777 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:29.777 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:29.777 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-01 09:12:29.777 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-01 09:12:29.780 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 09:12:29.780 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 09:12:29.780 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 09:12:29.783 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 09:12:29.786 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-01 09:12:29.842 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:29.896 -05:00 [DBG] Consultando libros...
2024-08-01 09:12:29.896 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:29.925 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:29.925 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:29.928 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-08-01 09:12:29.968 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:12:29.979 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-08-01 09:12:29.984 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:29.985 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:12:29.988 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.990 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:29.991 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:29.991 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:29.991 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:29.992 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-01 09:12:30.151 -05:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-01 09:12:30.172 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:12:30.174 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:30.175 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:12:30.175 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.176 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.185 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.185 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:30.185 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:30.186 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:30.186 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-01 09:12:30.186 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.186 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.186 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.187 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.187 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.187 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.187 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.188 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.188 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.188 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.188 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.189 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:30.193 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-01 09:12:30.194 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.195 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 41ms reading results.
2024-08-01 09:12:30.195 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.195 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:12:30.195 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.195 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:12:30.201 -05:00 [INF] Consulta de libros exitosa
2024-08-01 09:12:30.202 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 359.4813ms.
2024-08-01 09:12:30.202 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:30.203 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:30.203 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:30.203 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.203 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:30.204 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:12:30.204 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:30.204 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:12:30.206 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 309.8056ms.
2024-08-01 09:12:30.209 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:30.209 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:30.209 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:30.209 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:30.209 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:30.210 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:12:30.215 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 448.3952ms
2024-08-01 09:12:30.215 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 09:12:30.215 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:30.216 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.216 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:12:30.216 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 581.4972ms
2024-08-01 09:12:30.216 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 439.0967ms
2024-08-01 09:12:30.217 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 09:12:30.220 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:30.220 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:30.220 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:12:30.221 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 587.167ms
2024-08-01 09:12:35.548 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:35.549 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:35.551 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:35.551 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:35.552 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:35.552 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:35.552 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:35.552 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 5.739ms
2024-08-01 09:12:35.556 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:35.558 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:35.559 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:35.559 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:35.559 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:35.559 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:35.559 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:35.566 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:12:35.566 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:12:35.570 -05:00 [DBG] Authorization was successful.
2024-08-01 09:12:35.571 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:35.575 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:12:35.576 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:35.576 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:35.576 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:35.576 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:35.576 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:35.576 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:35.578 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:35.610 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:35.616 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:12:35.702 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:35.704 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-08-01 09:12:35.716 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:12:35.726 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:35.726 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:12:35.726 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:35.727 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:35.727 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:35.727 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:35.727 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:35.727 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:35.729 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 119.0676ms.
2024-08-01 09:12:35.729 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:35.730 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:35.730 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:35.730 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:35.733 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:35.733 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:12:35.741 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:35.746 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 169.5849ms
2024-08-01 09:12:35.746 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:35.752 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.784 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Collections.Generic.List`1[biblioteca_backend.Models.Archivo],biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-01 09:12:35.785 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.785 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.786 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.787 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.787 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.787 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.788 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.788 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.788 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:35.788 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:35.789 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 47ms reading results.
2024-08-01 09:12:35.789 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:35.789 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:12:35.793 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:12:35.813 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:35.813 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:35.813 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:12:35.815 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 500 null text/plain; charset=utf-8 257.2904ms
2024-08-01 09:12:45.505 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:45.505 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:45.505 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:45.505 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:45.506 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:45.506 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:45.506 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:45.506 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.9868ms
2024-08-01 09:12:45.509 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:45.509 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:45.509 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:45.509 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:45.510 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:45.510 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:45.510 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:45.510 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:12:45.510 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:12:45.511 -05:00 [DBG] Authorization was successful.
2024-08-01 09:12:45.511 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:45.511 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:12:45.511 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:45.511 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:45.511 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:45.511 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:45.512 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:45.512 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:45.512 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:45.578 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:45.583 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:12:45.584 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:45.591 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:45.592 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:12:45.592 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:45.592 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:45.592 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:45.592 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:45.592 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:45.593 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:45.594 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.7962ms.
2024-08-01 09:12:45.594 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:45.594 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:45.594 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:45.595 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:45.595 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:45.595 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.595 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:45.595 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:12:45.595 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.595 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.596 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.596 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.596 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.599 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.599 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.600 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.600 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:45.600 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 88.696ms
2024-08-01 09:12:45.600 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:45.601 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 6ms reading results.
2024-08-01 09:12:45.601 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:45.601 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:45.604 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (2ms).
2024-08-01 09:12:45.607 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:12:45.628 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Collections.Generic.List`1[biblioteca_backend.Models.Archivo],biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-01 09:12:45.635 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:45.636 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:45.636 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:12:45.637 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 500 null text/plain; charset=utf-8 127.9859ms
2024-08-01 09:12:53.341 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:53.342 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:53.342 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:12:53.342 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:53.342 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:53.342 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:53.342 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:12:53.342 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.824ms
2024-08-01 09:12:53.425 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:12:53.425 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:53.426 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:12:53.426 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:53.426 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:12:53.426 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:12:53.426 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:12:53.426 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:12:53.426 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:12:53.426 -05:00 [DBG] Authorization was successful.
2024-08-01 09:12:53.426 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:53.427 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:12:53.427 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:12:53.427 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:12:53.427 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:12:53.427 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:12:53.427 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:12:53.427 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:53.428 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:12:53.658 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:12:53.673 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:12:53.675 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:12:53.675 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:12:53.675 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:12:53.675 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:53.676 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:53.676 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:12:53.676 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:53.676 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:12:53.676 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:53.688 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.5577ms.
2024-08-01 09:12:53.688 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:12:53.688 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:12:53.688 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:12:53.688 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:12:53.688 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:12:53.689 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:12:53.690 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 262.6314ms
2024-08-01 09:12:53.690 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:12:53.703 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:12:53.704 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.704 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.705 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.705 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.706 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.706 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.707 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.707 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:12:53.708 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:53.709 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-08-01 09:12:53.709 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:53.709 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:12:53.788 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:12:53.788 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The type 'System.Threading.ExecutionContext&' of property 'Context' on type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[System.Collections.Generic.List`1[biblioteca_backend.Models.Archivo],biblioteca_backend.Clases.clsArchivo+<ConsultarTodos>d__3]' is invalid for serialization or deserialization because it is a pointer type, is a ref struct, or contains generic parameters that have not been replaced by specific types.
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_CannotSerializeInvalidType(Type typeToConvert, Type declaringType, MemberInfo memberInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreatePropertyInfo(JsonTypeInfo typeInfo, Type typeToConvert, MemberInfo memberInfo, JsonSerializerOptions options, Boolean shouldCheckForRequiredKeyword, Boolean hasJsonIncludeAttribute)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.AddMembersDeclaredBySuperType(JsonTypeInfo typeInfo, Type currentType, Boolean constructorHasSetsRequiredMembersAttribute, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.PopulateProperties(JsonTypeInfo typeInfo)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.CreateTypeInfoCore(Type type, JsonConverter converter, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.DefaultJsonTypeInfoResolver.GetTypeInfo(Type type, JsonSerializerOptions options)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoNoCaching(Type type)
   at System.Text.Json.JsonSerializerOptions.CachingContext.CreateCacheEntry(Type type, CachingContext context)
--- End of stack trace from previous location ---
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-01 09:12:53.795 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:12:53.795 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:12:53.795 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:12:53.795 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 500 null text/plain; charset=utf-8 370.0404ms
2024-08-01 09:13:44.073 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-01 09:13:44.220 -05:00 [DBG] Hosting starting
2024-08-01 09:13:44.276 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-01 09:13:44.283 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-08-01 09:13:44.294 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-08-01 09:13:44.306 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-08-01 09:13:44.309 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:13:44.312 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-01 09:13:44.313 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:13:44.319 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-01 09:13:44.322 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-01 09:13:44.324 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-08-01 09:13:44.325 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-08-01 09:13:44.608 -05:00 [INF] Now listening on: https://localhost:7299
2024-08-01 09:13:44.608 -05:00 [INF] Now listening on: http://localhost:5219
2024-08-01 09:13:44.608 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-08-01 09:13:44.609 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-01 09:13:44.609 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-01 09:13:44.609 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-01 09:13:44.609 -05:00 [INF] Hosting environment: Development
2024-08-01 09:13:44.610 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-08-01 09:13:44.610 -05:00 [DBG] Hosting started
2024-08-01 09:13:44.874 -05:00 [DBG] Connection id "0HN5I6GJM9U6E" accepted.
2024-08-01 09:13:44.879 -05:00 [DBG] Connection id "0HN5I6GJM9U6E" received FIN.
2024-08-01 09:13:44.879 -05:00 [DBG] Connection id "0HN5I6GJM9U6E" started.
2024-08-01 09:13:44.879 -05:00 [DBG] Connection id "0HN5I6GJM9U6F" received FIN.
2024-08-01 09:13:44.890 -05:00 [DBG] Connection id "0HN5I6GJM9U6F" accepted.
2024-08-01 09:13:44.893 -05:00 [DBG] Connection id "0HN5I6GJM9U6F" started.
2024-08-01 09:13:44.929 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:13:44.929 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:13:44.994 -05:00 [DBG] Connection id "0HN5I6GJM9U6E" stopped.
2024-08-01 09:13:44.994 -05:00 [DBG] Connection id "0HN5I6GJM9U6F" stopped.
2024-08-01 09:13:45.002 -05:00 [DBG] Connection id "0HN5I6GJM9U6E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:13:45.009 -05:00 [DBG] Connection id "0HN5I6GJM9U6F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:13:45.152 -05:00 [DBG] Connection id "0HN5I6GJM9U6G" accepted.
2024-08-01 09:13:45.153 -05:00 [DBG] Connection id "0HN5I6GJM9U6G" started.
2024-08-01 09:13:45.326 -05:00 [DBG] Connection 0HN5I6GJM9U6G established using the following protocol: "Tls12"
2024-08-01 09:13:45.442 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-08-01 09:13:45.772 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-01 09:13:45.795 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-01 09:13:45.796 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:13:45.908 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-08-01 09:13:45.910 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-01 09:13:45.970 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-08-01 09:13:45.971 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-01 09:13:45.976 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 548.3148ms
2024-08-01 09:13:45.995 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-08-01 09:13:45.995 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-08-01 09:13:46.009 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 14.7153ms
2024-08-01 09:13:46.126 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 130.7158ms
2024-08-01 09:13:46.217 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-08-01 09:13:46.217 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-01 09:13:46.217 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:13:46.426 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.2609ms
2024-08-01 09:13:51.464 -05:00 [DBG] Connection id "0HN5I6GJM9U6H" accepted.
2024-08-01 09:13:51.465 -05:00 [DBG] Connection id "0HN5I6GJM9U6H" started.
2024-08-01 09:13:51.492 -05:00 [DBG] Connection 0HN5I6GJM9U6H established using the following protocol: "Tls12"
2024-08-01 09:13:51.883 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:13:51.934 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:13:51.934 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:13:51.940 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:13:51.943 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:13:51.943 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:13:51.945 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:13:51.946 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 63.2459ms
2024-08-01 09:13:51.951 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:13:51.952 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:13:51.957 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:13:51.957 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:13:51.958 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:13:51.959 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:13:51.959 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:13:52.326 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:13:52.332 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:13:52.342 -05:00 [DBG] Authorization was successful.
2024-08-01 09:13:52.346 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:13:52.396 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:13:52.400 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:13:52.401 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:13:52.402 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:13:52.402 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:13:52.403 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:13:52.407 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:13:52.740 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-01 09:13:52.789 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:13:52.938 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:13:52.969 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:13:54.604 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:13:54.706 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-08-01 09:13:55.113 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:13:55.161 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:13:55.186 -05:00 [DBG] Created DbConnection. (24ms).
2024-08-01 09:13:55.190 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:13:55.629 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:13:55.632 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:13:55.641 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-01 09:13:55.643 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-08-01 09:13:55.654 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:13:55.721 -05:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:13:55.784 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.812 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.813 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:13:55.818 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:13:55.825 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 98ms reading results.
2024-08-01 09:13:55.829 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:13:55.835 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (5ms).
2024-08-01 09:13:55.837 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:13:55.843 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2900.8367ms.
2024-08-01 09:13:55.848 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:13:55.850 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:13:55.850 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:13:55.850 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:13:55.851 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:13:55.852 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:13:55.884 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 3476.1703ms
2024-08-01 09:13:55.885 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:13:55.889 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:13:55.895 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:13:55.896 -05:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-08-01 09:13:55.897 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 3945.1374ms
2024-08-01 09:14:08.970 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-08-01 09:14:08.973 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-01 09:14:08.973 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:14:08.973 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:14:08.974 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:14:08.974 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:14:08.974 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:14:08.974 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 204 null null 5.0289ms
2024-08-01 09:14:08.979 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-08-01 09:14:08.979 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-01 09:14:08.979 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentosZip' is valid for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-01 09:14:08.980 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-01 09:14:08.980 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:14:08.980 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:14:08.980 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:14:08.983 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:14:08.983 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:14:08.986 -05:00 [DBG] Authorization was successful.
2024-08-01 09:14:08.987 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-01 09:14:08.991 -05:00 [INF] Route matched with {action = "ConsultarTodosZip", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodosZip() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:14:08.991 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:14:08.991 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:14:08.992 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:14:08.992 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:14:08.992 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:14:08.992 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:14:08.996 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:14:09.029 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:14:09.033 -05:00 [DBG] Consultando archivos en una lista...
2024-08-01 09:14:09.048 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:14:09.050 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)'
2024-08-01 09:14:09.055 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:14:09.058 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:14:09.059 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:14:09.060 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:14:09.063 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:14:09.063 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:14:09.063 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:14:09.063 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:14:09.064 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-08-01 09:14:09.069 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-08-01 09:14:09.070 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.070 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.070 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.070 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.070 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.071 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.071 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.071 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.071 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.071 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:14:09.072 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:14:09.072 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-08-01 09:14:09.073 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:14:09.073 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:14:09.087 -05:00 [DBG] Comprimiendo archivos en un archivo .zip...
2024-08-01 09:14:09.138 -05:00 [INF] Archivos comprimidos exitosamente
2024-08-01 09:14:09.140 -05:00 [INF] Consulta de archivos comprimidos exitosa
2024-08-01 09:14:09.141 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 111.0763ms.
2024-08-01 09:14:09.142 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-01 09:14:09.146 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-01 09:14:09.171 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) in 179.37ms
2024-08-01 09:14:09.171 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-01 09:14:09.172 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:14:09.172 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:14:09.172 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:14:09.172 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 200 460396 application/zip 193.5843ms
2024-08-01 09:43:00.790 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-01 09:43:01.042 -05:00 [DBG] Hosting starting
2024-08-01 09:43:01.142 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-01 09:43:01.156 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-08-01 09:43:01.176 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-08-01 09:43:01.199 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-08-01 09:43:01.210 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:43:01.217 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-01 09:43:01.219 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-01 09:43:01.226 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-01 09:43:01.228 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-01 09:43:01.232 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-08-01 09:43:01.233 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-08-01 09:43:01.573 -05:00 [INF] Now listening on: https://localhost:7299
2024-08-01 09:43:01.573 -05:00 [INF] Now listening on: http://localhost:5219
2024-08-01 09:43:01.573 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-08-01 09:43:01.574 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-01 09:43:01.574 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-01 09:43:01.574 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-01 09:43:01.574 -05:00 [INF] Hosting environment: Development
2024-08-01 09:43:01.574 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-08-01 09:43:01.574 -05:00 [DBG] Hosting started
2024-08-01 09:43:01.701 -05:00 [DBG] Connection id "0HN5I70V8MV2N" accepted.
2024-08-01 09:43:01.703 -05:00 [DBG] Connection id "0HN5I70V8MV2N" started.
2024-08-01 09:43:01.708 -05:00 [DBG] Connection id "0HN5I70V8MV2O" accepted.
2024-08-01 09:43:01.709 -05:00 [DBG] Connection id "0HN5I70V8MV2O" started.
2024-08-01 09:43:01.735 -05:00 [DBG] Connection id "0HN5I70V8MV2O" received FIN.
2024-08-01 09:43:01.739 -05:00 [DBG] Connection id "0HN5I70V8MV2N" received FIN.
2024-08-01 09:43:01.755 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:43:01.755 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-01 09:43:01.841 -05:00 [DBG] Connection id "0HN5I70V8MV2O" stopped.
2024-08-01 09:43:01.856 -05:00 [DBG] Connection id "0HN5I70V8MV2O" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:43:01.861 -05:00 [DBG] Connection id "0HN5I70V8MV2N" stopped.
2024-08-01 09:43:01.862 -05:00 [DBG] Connection id "0HN5I70V8MV2N" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-01 09:43:01.994 -05:00 [DBG] Connection id "0HN5I70V8MV2P" accepted.
2024-08-01 09:43:02.012 -05:00 [DBG] Connection id "0HN5I70V8MV2P" started.
2024-08-01 09:43:02.194 -05:00 [DBG] Connection 0HN5I70V8MV2P established using the following protocol: "Tls12"
2024-08-01 09:43:02.318 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-08-01 09:43:02.829 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-01 09:43:02.873 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-01 09:43:02.874 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:43:03.075 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-08-01 09:43:03.078 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-01 09:43:03.196 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-08-01 09:43:03.197 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-01 09:43:03.202 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 896.6713ms
2024-08-01 09:43:03.212 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-08-01 09:43:03.213 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-08-01 09:43:03.223 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 10.687ms
2024-08-01 09:43:03.471 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 257.6263ms
2024-08-01 09:43:03.577 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-08-01 09:43:03.577 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-01 09:43:03.577 -05:00 [DBG] Request did not match any endpoints
2024-08-01 09:43:03.802 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.3199ms
2024-08-01 09:45:08.639 -05:00 [DBG] Connection id "0HN5I70V8MV2Q" accepted.
2024-08-01 09:45:08.641 -05:00 [DBG] Connection id "0HN5I70V8MV2Q" started.
2024-08-01 09:45:08.675 -05:00 [DBG] Connection 0HN5I70V8MV2Q established using the following protocol: "Tls12"
2024-08-01 09:45:08.680 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-08-01 09:45:08.686 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:45:08.686 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:45:08.689 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:08.690 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:08.690 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:08.691 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:45:08.693 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 204 null null 12.4967ms
2024-08-01 09:45:08.697 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-08-01 09:45:08.698 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:45:08.701 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-01 09:45:08.701 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-01 09:45:08.702 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:08.702 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:08.702 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:08.870 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:45:08.871 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:45:08.878 -05:00 [DBG] Authorization was successful.
2024-08-01 09:45:08.879 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-01 09:45:08.910 -05:00 [INF] Route matched with {action = "EliminarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:45:08.911 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:45:08.911 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:45:08.911 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:45:08.912 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:45:08.912 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:45:08.913 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:09.070 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-01 09:45:09.097 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:09.114 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-01 09:45:09.116 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-01 09:45:09.118 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:45:09.118 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:45:09.118 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-01 09:45:09.120 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:45:09.121 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:45:09.122 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-01 09:45:09.122 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:09.122 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:09.122 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:45:09.122 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:09.227 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:45:09.242 -05:00 [DBG] Eliminando archivo con id: $21...
2024-08-01 09:45:10.260 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:45:10.317 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(a => a.Id == __idArchivo_0)'
2024-08-01 09:45:10.573 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-01 09:45:10.620 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:45:10.646 -05:00 [DBG] Created DbConnection. (23ms).
2024-08-01 09:45:10.650 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.050 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.055 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:11.064 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-08-01 09:45:11.076 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2024-08-01 09:45:11.090 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-01 09:45:11.164 -05:00 [INF] Executed DbCommand (76ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-01 09:45:11.228 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.302 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.320 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 145ms reading results.
2024-08-01 09:45:11.325 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.333 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (8ms).
2024-08-01 09:45:11.346 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.351 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:11.355 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:11.373 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:45:11.440 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.442 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.445 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:11.445 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:11.447 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-08-01 09:45:11.447 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-01 09:45:11.478 -05:00 [INF] Executed DbCommand (31ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-01 09:45:11.483 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.483 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-08-01 09:45:11.485 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.485 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:11.491 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.493 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:45:11.525 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.543 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.556 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:11.556 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:11.562 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:45:11.584 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.584 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.584 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:11.585 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:11.585 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:11.585 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:45:11.592 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:45:11.602 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-01 09:45:11.607 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.607 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 15ms reading results.
2024-08-01 09:45:11.607 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.607 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:11.610 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.610 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:45:11.613 -05:00 [INF] Archivo eliminado exitosamente
2024-08-01 09:45:11.618 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2387.525ms.
2024-08-01 09:45:11.623 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:45:11.626 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:45:11.626 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:45:11.626 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:45:11.627 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:45:11.628 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-01 09:45:11.642 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) in 2726.5648ms
2024-08-01 09:45:11.643 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-01 09:45:11.647 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:45:11.651 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.652 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-08-01 09:45:11.653 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 200 null application/json; charset=utf-8 2956.2146ms
2024-08-01 09:45:11.658 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:45:11.659 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:11.659 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:45:11.659 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:11.660 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:11.660 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:11.660 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:45:11.660 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.8635ms
2024-08-01 09:45:11.663 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:45:11.664 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:11.665 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:11.665 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:11.665 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:11.665 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:11.665 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:11.669 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:45:11.669 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:45:11.676 -05:00 [DBG] Authorization was successful.
2024-08-01 09:45:11.676 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:11.693 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:45:11.693 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:45:11.694 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:45:11.694 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:45:11.694 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:45:11.694 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:45:11.695 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:11.697 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:11.736 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:45:11.742 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:45:11.767 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:45:11.773 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-08-01 09:45:11.785 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:45:11.793 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:45:11.794 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:45:11.794 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.794 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.794 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:11.794 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:11.794 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:11.795 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:45:11.799 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:45:11.800 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.803 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.803 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:11.803 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.803 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-08-01 09:45:11.803 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.803 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:11.806 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:45:11.807 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.8539ms.
2024-08-01 09:45:11.807 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:45:11.807 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:45:11.807 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:45:11.807 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:45:11.808 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:45:11.808 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:45:11.822 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 127.4183ms
2024-08-01 09:45:11.822 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:11.823 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:45:11.823 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:11.823 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:45:11.824 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 160.9171ms
2024-08-01 09:45:42.972 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-08-01 09:45:42.987 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:45:42.993 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:45:42.993 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:42.993 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:42.993 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:42.993 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:45:42.994 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 22.1858ms
2024-08-01 09:45:42.999 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundaryXp480p1HUlIYJwac 60169
2024-08-01 09:45:43.000 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:45:43.000 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-01 09:45:43.000 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:45:43.000 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:43.000 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:43.000 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:43.005 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:45:43.005 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:45:43.008 -05:00 [DBG] Authorization was successful.
2024-08-01 09:45:43.008 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:45:43.016 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:45:43.016 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:45:43.016 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-01 09:45:43.017 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:45:43.017 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:45:43.017 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:45:43.018 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:43.020 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:43.028 -05:00 [DBG] Connection id "0HN5I70V8MV2Q", Request id "0HN5I70V8MV2Q:0000000B": started reading request body.
2024-08-01 09:45:43.028 -05:00 [DBG] Connection id "0HN5I70V8MV2Q", Request id "0HN5I70V8MV2Q:0000000B": done reading request body.
2024-08-01 09:45:43.038 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-01 09:45:43.041 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-08-01 09:45:43.043 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:45:43.043 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:45:43.043 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-01 09:45:43.049 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:45:43.049 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:45:43.049 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-01 09:45:43.050 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:43.050 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:43.050 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:45:43.050 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:45:43.085 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:45:43.093 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-08-01 09:45:43.172 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:45:43.175 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.RutaDocumento == __ruta_0 && A.FechaEliminacion == null)'
2024-08-01 09:45:43.182 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE (a.RutaDocumento == @__ruta_0) && (a.FechaEliminacion == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-01 09:45:43.185 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:45:43.185 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:45:43.186 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.186 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.186 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:43.186 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.186 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.186 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-01 09:45:43.192 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-01 09:45:43.192 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.192 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:45:43.192 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.192 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:43.195 -05:00 [DBG] Creando archivo en la ruta: $Archivos\2. FDE-074-Guia-No-1-Funciones-o-competencias-de-desempeño-RV V8.docx...
2024-08-01 09:45:43.206 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Archivo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.209 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.209 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:43.209 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:43.210 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:45:43.213 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.213 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.214 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:43.214 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.214 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.214 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-01 09:45:43.218 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-01 09:45:43.219 -05:00 [DBG] The foreign key property 'Archivo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-01 09:45:43.222 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.222 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-08-01 09:45:43.222 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.223 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:43.224 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.224 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:45:43.226 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.227 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.227 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.227 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:43.227 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:45:43.228 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:45:43.229 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.229 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.229 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:43.229 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.229 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:43.229 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:45:43.236 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:45:43.236 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-01 09:45:43.236 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.236 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:45:43.236 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.237 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:43.237 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:43.237 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:45:43.240 -05:00 [INF] Archivo cargado exitosamente
2024-08-01 09:45:43.240 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 154.9785ms.
2024-08-01 09:45:43.242 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:45:43.242 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:45:43.242 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:45:43.242 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:45:43.242 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:45:43.242 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-01 09:45:43.243 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 226.5828ms
2024-08-01 09:45:43.244 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:45:43.245 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:45:43.245 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:43.245 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:45:43.245 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 246.1908ms
2024-08-01 09:45:45.044 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:45:45.044 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:45.044 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:45:45.045 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:45.045 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:45.045 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:45.046 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:45:45.046 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.0202ms
2024-08-01 09:45:45.052 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:45:45.053 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:45.053 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:45:45.053 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:45.053 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:45:45.053 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:45:45.053 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:45:45.054 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:45:45.054 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:45:45.054 -05:00 [DBG] Authorization was successful.
2024-08-01 09:45:45.055 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:45.055 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:45:45.055 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:45:45.055 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:45:45.055 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:45:45.055 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:45:45.055 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:45:45.056 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:45.056 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:45:45.095 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:45:45.097 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:45:45.098 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:45:45.101 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:45:45.101 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:45:45.101 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:45.101 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:45.101 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:45:45.101 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:45.101 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:45:45.102 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:45:45.105 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:45:45.105 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.105 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.105 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.105 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:45:45.106 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:45.106 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:45:45.106 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:45.106 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:45:45.111 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:45:45.111 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.973ms.
2024-08-01 09:45:45.111 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:45:45.111 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:45:45.112 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:45:45.112 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:45:45.112 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:45:45.112 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:45:45.112 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 56.619ms
2024-08-01 09:45:45.112 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:45:45.112 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:45:45.113 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:45:45.113 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:45:45.113 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 62.2101ms
2024-08-01 09:46:04.158 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - null null
2024-08-01 09:46:04.158 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:46:04.158 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:46:04.158 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:04.159 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:04.159 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:04.159 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:46:04.159 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - 204 null null 1.1168ms
2024-08-01 09:46:04.162 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - null null
2024-08-01 09:46:04.162 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:46:04.162 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-01 09:46:04.162 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-01 09:46:04.162 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:04.162 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:04.162 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:04.163 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:46:04.163 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:46:04.163 -05:00 [DBG] Authorization was successful.
2024-08-01 09:46:04.163 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-01 09:46:04.170 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:46:04.171 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:46:04.171 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:46:04.171 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:46:04.171 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:46:04.171 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:46:04.171 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:04.172 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:04.172 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-01 09:46:04.172 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-01 09:46:04.172 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:46:04.173 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:46:04.173 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-01 09:46:04.173 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-01 09:46:04.173 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:46:04.173 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-01 09:46:04.174 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:04.174 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:04.174 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:46:04.175 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:04.214 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:46:04.221 -05:00 [DBG] Descargando archivo...
2024-08-01 09:46:04.222 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:46:04.223 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.Id == __idArchivo_0)'
2024-08-01 09:46:04.231 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-01 09:46:04.232 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:46:04.232 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:46:04.232 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.233 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.233 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:04.233 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.233 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.233 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-01 09:46:04.238 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-01 09:46:04.238 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.238 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.238 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:46:04.238 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.239 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:04.240 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.240 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.240 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.240 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:46:04.241 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:46:04.241 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:46:04.241 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.241 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.242 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:04.242 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.242 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.242 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:46:04.243 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-01 09:46:04.244 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-01 09:46:04.244 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.244 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:46:04.244 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.244 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:04.244 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.245 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:46:04.245 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.245 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:46:04.245 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-01 09:46:04.245 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-01 09:46:04.246 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.247 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.247 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:04.247 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.247 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.247 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-01 09:46:04.252 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-01 09:46:04.252 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.252 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:46:04.252 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.252 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:04.253 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.253 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-01 09:46:04.256 -05:00 [INF] Archivo descargado exitosamente
2024-08-01 09:46:04.257 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 42.6341ms.
2024-08-01 09:46:04.259 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-01 09:46:04.262 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-01 09:46:04.288 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 116.1353ms
2024-08-01 09:46:04.288 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-01 09:46:04.288 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:46:04.288 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.288 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:46:04.289 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - 200 59861 application/octet-stream 127.212ms
2024-08-01 09:46:04.299 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:04.299 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:04.299 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:46:04.299 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:04.299 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:04.299 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:04.299 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:46:04.300 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.7185ms
2024-08-01 09:46:04.302 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:04.303 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:04.303 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:04.303 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:04.303 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:04.303 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:04.303 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:04.303 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:46:04.303 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:46:04.304 -05:00 [DBG] Authorization was successful.
2024-08-01 09:46:04.304 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:04.304 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:46:04.304 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:46:04.304 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:46:04.304 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:46:04.304 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:46:04.304 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:46:04.304 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:04.304 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:04.376 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:46:04.479 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:46:04.480 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:46:04.481 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:46:04.481 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:46:04.481 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.481 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.481 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:04.481 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.481 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:04.482 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:04.518 -05:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:04.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.519 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:04.520 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.520 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-08-01 09:46:04.521 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.521 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:04.538 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:46:04.545 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 162.2783ms.
2024-08-01 09:46:04.546 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:46:04.546 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:46:04.546 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:46:04.546 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:46:04.546 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:46:04.547 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:46:04.547 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 242.8813ms
2024-08-01 09:46:04.547 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:04.547 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:46:04.547 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:04.547 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:46:04.548 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 245.8727ms
2024-08-01 09:46:48.191 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:48.191 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:48.191 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:46:48.191 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:48.191 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:48.192 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:48.192 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:46:48.192 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.7975ms
2024-08-01 09:46:48.201 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:48.201 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:48.202 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:48.202 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:48.202 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:48.202 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:48.203 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:48.205 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:46:48.205 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:46:48.205 -05:00 [DBG] Authorization was successful.
2024-08-01 09:46:48.208 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:48.208 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:46:48.208 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:46:48.209 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:46:48.209 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:46:48.209 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:46:48.209 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:46:48.209 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:48.210 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:48.314 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:46:48.317 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:46:48.319 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:46:48.319 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:46:48.319 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:46:48.320 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:48.320 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:48.320 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:48.320 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:48.320 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:48.320 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:48.331 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:48.331 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.331 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.332 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.333 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:48.333 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:48.333 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:46:48.333 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:48.333 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:48.341 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:46:48.341 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.828ms.
2024-08-01 09:46:48.341 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:46:48.341 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:46:48.341 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:46:48.341 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:46:48.342 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:46:48.342 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:46:48.342 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 132.9838ms
2024-08-01 09:46:48.342 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:48.342 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:46:48.342 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:48.343 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:46:48.343 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 141.4111ms
2024-08-01 09:46:55.599 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-08-01 09:46:55.599 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:46:55.599 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:46:55.599 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:55.600 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:55.600 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:55.600 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:46:55.600 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 1.3855ms
2024-08-01 09:46:55.604 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundary98kucbhS6qvjqlaW 60169
2024-08-01 09:46:55.605 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-01 09:46:55.605 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-01 09:46:55.605 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:46:55.606 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:55.606 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:55.606 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:55.606 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:46:55.606 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:46:55.608 -05:00 [DBG] Authorization was successful.
2024-08-01 09:46:55.608 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:46:55.608 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:46:55.608 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:46:55.608 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-01 09:46:55.608 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:46:55.608 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:46:55.608 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:46:55.608 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:55.609 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:55.609 -05:00 [DBG] Connection id "0HN5I70V8MV2Q", Request id "0HN5I70V8MV2Q:0000001F": started reading request body.
2024-08-01 09:46:55.609 -05:00 [DBG] Connection id "0HN5I70V8MV2Q", Request id "0HN5I70V8MV2Q:0000001F": done reading request body.
2024-08-01 09:46:55.610 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-01 09:46:55.611 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-08-01 09:46:55.611 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:46:55.611 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:46:55.611 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-01 09:46:55.614 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-01 09:46:55.614 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:46:55.625 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-01 09:46:55.625 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:55.625 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:55.625 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 09:46:55.625 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 09:46:55.669 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:46:55.671 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-08-01 09:46:55.672 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:46:55.672 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:46:55.672 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:46:55.672 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:55.672 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:55.672 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:55.673 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:55.673 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:55.673 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-01 09:46:55.676 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-01 09:46:55.676 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:55.676 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:55.676 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:46:55.676 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:55.676 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:55.683 -05:00 [WRN] Ya existe un archivo con el mismo nombre
2024-08-01 09:46:55.693 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.6635ms.
2024-08-01 09:46:55.693 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:46:55.693 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:46:55.693 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:46:55.693 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:46:55.693 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:46:55.693 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-01 09:46:55.693 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 85.0982ms
2024-08-01 09:46:55.693 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-01 09:46:55.694 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:46:55.694 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:55.694 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:46:55.694 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 89.7472ms
2024-08-01 09:46:57.269 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:57.269 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:57.270 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:46:57.270 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:57.270 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:57.270 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:57.270 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:46:57.271 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.2241ms
2024-08-01 09:46:57.275 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 09:46:57.275 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:57.275 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 09:46:57.275 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:57.275 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:46:57.275 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:46:57.275 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:46:57.275 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:46:57.276 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:46:57.276 -05:00 [DBG] Authorization was successful.
2024-08-01 09:46:57.276 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:57.276 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:46:57.276 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:46:57.276 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:46:57.276 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:46:57.276 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:46:57.276 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:46:57.276 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:57.276 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:46:57.311 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:46:57.313 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 09:46:57.314 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:46:57.315 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:46:57.315 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:46:57.315 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:57.315 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:57.315 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:46:57.315 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:57.315 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:46:57.315 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:57.317 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 09:46:57.318 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.318 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.318 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:46:57.319 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:57.319 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:46:57.319 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:57.319 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:46:57.324 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 09:46:57.324 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.1459ms.
2024-08-01 09:46:57.324 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:46:57.325 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:46:57.325 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:46:57.325 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:46:57.325 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:46:57.325 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:46:57.325 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 48.8094ms
2024-08-01 09:46:57.325 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 09:46:57.325 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:46:57.325 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:46:57.325 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:46:57.326 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 51.2076ms
2024-08-01 09:47:26.086 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:47:26.086 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:47:26.087 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:47:26.087 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:47:26.087 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:47:26.087 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:47:26.087 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:47:26.087 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 0.6461ms
2024-08-01 09:47:26.094 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 09:47:26.094 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 09:47:26.094 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 09:47:26.094 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:47:26.094 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:47:26.095 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:47:26.095 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:47:26.096 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:47:26.097 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:47:26.097 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:47:26.097 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:47:26.097 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:47:26.097 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:47:26.097 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:47:26.097 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:47:26.097 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:47:26.097 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:47:26.097 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:47:26.098 -05:00 [DBG] Authorization was successful.
2024-08-01 09:47:26.098 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:47:26.103 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 09:47:26.103 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:47:26.103 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:47:26.104 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:47:26.104 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:47:26.104 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:47:26.104 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:47:26.104 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:47:26.105 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:47:26.105 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:47:26.105 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:47:26.105 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:47:26.105 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:47:26.105 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:47:26.106 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:47:26.106 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:47:26.138 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:47:26.175 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:47:26.179 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:47:26.179 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-08-01 09:47:26.184 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 09:47:26.185 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:47:26.187 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:47:26.187 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:47:26.187 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.188 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.188 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:47:26.188 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:47:26.188 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:47:26.188 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:47:26.189 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:47:26.202 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:47:26.209 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-08-01 09:47:26.210 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:47:26.213 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:47:26.213 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:47:26.213 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.214 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 11ms reading results.
2024-08-01 09:47:26.214 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.214 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:47:26.214 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.438ms.
2024-08-01 09:47:26.214 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:47:26.214 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:47:26.214 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:47:26.214 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:47:26.214 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:47:26.214 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:47:26.216 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 112.3663ms
2024-08-01 09:47:26.216 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:47:26.217 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:47:26.217 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.217 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:47:26.217 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 123.4471ms
2024-08-01 09:47:26.289 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:47:26.291 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:47:26.291 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:47:26.291 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.291 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.291 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:47:26.291 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:47:26.291 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:47:26.291 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:47:26.299 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:47:26.308 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.308 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 8ms reading results.
2024-08-01 09:47:26.308 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.309 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:47:26.313 -05:00 [INF] Consulta de historial exitosa
2024-08-01 09:47:26.313 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 137.8159ms.
2024-08-01 09:47:26.313 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:47:26.313 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:47:26.313 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:47:26.313 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:47:26.313 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:47:26.313 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:47:26.324 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 218.6351ms
2024-08-01 09:47:26.324 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:47:26.324 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:47:26.324 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:47:26.324 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:47:26.325 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 228.1734ms
2024-08-01 09:48:26.913 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:48:26.913 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:48:26.913 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:48:26.913 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:48:26.913 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:48:26.913 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:48:26.914 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:48:26.914 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 0.9964ms
2024-08-01 09:48:26.929 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 09:48:26.929 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 09:48:26.930 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 09:48:26.930 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:48:26.930 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:48:26.930 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:48:26.930 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:48:26.930 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:48:26.930 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:48:26.931 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 09:48:26.931 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:48:26.931 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:48:26.931 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:48:26.931 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:48:26.931 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:48:26.931 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:48:26.931 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:48:27.035 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:48:27.036 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:48:27.037 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:48:27.037 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:48:27.037 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:48:27.037 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:48:27.037 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:48:27.037 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:48:27.037 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:48:27.037 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:48:27.037 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:48:27.037 -05:00 [DBG] Authorization was successful.
2024-08-01 09:48:27.037 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:48:27.038 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:48:27.038 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:48:27.038 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:48:27.038 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.038 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:48:27.038 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:48:27.038 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:48:27.038 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.038 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:48:27.038 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:48:27.038 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:48:27.038 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:48:27.038 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:48:27.038 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:48:27.038 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:48:27.038 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:48:27.109 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:48:27.111 -05:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:48:27.111 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:48:27.113 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:48:27.113 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:48:27.113 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.113 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-08-01 09:48:27.113 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.113 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:48:27.114 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.0553ms.
2024-08-01 09:48:27.114 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:48:27.114 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:48:27.114 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:48:27.114 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:48:27.114 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:48:27.114 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:48:27.115 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 183.7728ms
2024-08-01 09:48:27.115 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:48:27.115 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:48:27.115 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.116 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:48:27.117 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 186.7528ms
2024-08-01 09:48:27.123 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 09:48:27.124 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:48:27.126 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:48:27.126 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:48:27.127 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.127 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.127 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:48:27.127 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:48:27.127 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:48:27.127 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:48:27.164 -05:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:48:27.185 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.185 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 21ms reading results.
2024-08-01 09:48:27.185 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.185 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:48:27.201 -05:00 [INF] Consulta de historial exitosa
2024-08-01 09:48:27.201 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.4461ms.
2024-08-01 09:48:27.201 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:48:27.202 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:48:27.202 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:48:27.202 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:48:27.202 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:48:27.202 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:48:27.203 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 165.2602ms
2024-08-01 09:48:27.204 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:48:27.204 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:48:27.204 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:48:27.204 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:48:27.204 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 167.7284ms
2024-08-01 09:49:47.201 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 09:49:47.201 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:49:47.201 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:49:47.202 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:49:47.202 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:49:47.202 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:49:47.202 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:49:47.202 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 1.4862ms
2024-08-01 09:49:47.217 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 09:49:47.217 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:49:47.217 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:49:47.217 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:49:47.217 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:49:47.217 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:49:47.217 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:49:47.218 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:49:47.218 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:49:47.218 -05:00 [DBG] Authorization was successful.
2024-08-01 09:49:47.218 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:49:47.228 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-08-01 09:49:47.229 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:49:47.229 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:49:47.229 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:49:47.231 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:49:47.231 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:49:47.232 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:49:47.233 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:49:47.281 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:49:47.285 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:49:47.286 -05:00 [DBG] Compiling query expression: 
'DbSet<Prestamo>()'
2024-08-01 09:49:47.292 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Prestamo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Prestamo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Prestamo.FechaPrestamo (DateTime) Required, 1], [Property: Prestamo.IdPerfil (int) Required FK Index, 2] }
        SELECT p.Id, p.FechaPrestamo, p.IdPerfil
        FROM Prestamo AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Prestamo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:49:47.293 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:49:47.293 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:49:47.293 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.293 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.293 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.293 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.294 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.294 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:49:47.300 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:49:47.303 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.308 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.308 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 8ms reading results.
2024-08-01 09:49:47.308 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.308 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.312 -05:00 [DBG] Consultando perfil con id 34
2024-08-01 09:49:47.315 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Id == __id_0)'
2024-08-01 09:49:47.319 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Id == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-08-01 09:49:47.325 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.326 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.326 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.326 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.326 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.327 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.332 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.339 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.343 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.375 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.375 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 43ms reading results.
2024-08-01 09:49:47.376 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.376 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.380 -05:00 [INF] Perfil encontrado con id: 34
2024-08-01 09:49:47.388 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-08-01 09:49:47.394 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:49:47.402 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .Join(
        inner: DbSet<Prestamo>(), 
        outerKeySelector: P => P.Id, 
        innerKeySelector: PR => PR.IdPerfil, 
        resultSelector: (P, PR) => new { 
            P = P, 
            PR = PR
         })
    .Join(
        inner: DbSet<DetallePrestamoLibro>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.PR.Id, 
        innerKeySelector: DP => DP.IdPrestamo, 
        resultSelector: (<>h__TransparentIdentifier0, DP) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            DP = DP
         })
    .Join(
        inner: DbSet<Libro>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.DP.IdLibro, 
        innerKeySelector: L => L.Id, 
        resultSelector: (<>h__TransparentIdentifier1, L) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            L = L
         })
    .Where(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.P.Id == __idPerfil_0)
    .Select(<>h__TransparentIdentifier2 => new Libro{ 
        Id = <>h__TransparentIdentifier2.L.Id, 
        Titulo = <>h__TransparentIdentifier2.L.Titulo, 
        Autor = <>h__TransparentIdentifier2.L.Autor, 
        IdGenero = <>h__TransparentIdentifier2.L.IdGenero, 
        Anio = <>h__TransparentIdentifier2.L.Anio, 
        Activo = <>h__TransparentIdentifier2.L.Activo 
    }
    )'
2024-08-01 09:49:47.422 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Libro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            Titulo -> 1
            Autor -> 2
            IdGenero -> 3
            Anio -> 4
            Activo -> 5
        SELECT l.Id, l.Titulo, l.Autor, l.IdGenero, l.Anio, l.Activo
        FROM Perfil AS p
        INNER JOIN Prestamo AS p0 ON p.Id == p0.IdPerfil
        INNER JOIN DetallePrestamoLibro AS d ON p0.Id == d.IdPrestamo
        INNER JOIN Libro AS l ON d.IdLibro == l.Id
        WHERE p.Id == @__idPerfil_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 09:49:47.432 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.433 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.433 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.433 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.433 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.433 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.449 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.450 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.450 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:49:47.450 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.450 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.453 -05:00 [DBG] Consultando perfil con id 40
2024-08-01 09:49:47.453 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.453 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.453 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.453 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.454 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.454 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.454 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.455 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.455 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.455 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.455 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:49:47.455 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.455 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.458 -05:00 [INF] Perfil encontrado con id: 40
2024-08-01 09:49:47.462 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-08-01 09:49:47.466 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:49:47.468 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.469 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.469 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.469 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.469 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.469 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.470 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.470 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.470 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:49:47.470 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.470 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.473 -05:00 [DBG] Consultando perfil con id 31
2024-08-01 09:49:47.474 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.474 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.474 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.474 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.474 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.474 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.475 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:49:47.475 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.475 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:49:47.475 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.475 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:49:47.475 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.475 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.477 -05:00 [INF] Perfil encontrado con id: 31
2024-08-01 09:49:47.481 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-08-01 09:49:47.484 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:49:47.484 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.485 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.485 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:49:47.485 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.485 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:49:47.485 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.485 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:49:47.486 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.486 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:49:47.486 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.486 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:49:47.486 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 204.5566ms.
2024-08-01 09:49:47.486 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:49:47.486 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:49:47.486 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:49:47.486 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:49:47.486 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:49:47.486 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:49:47.491 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 259.4761ms
2024-08-01 09:49:47.491 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:49:47.491 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:49:47.492 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:49:47.492 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:49:47.492 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 279.6283ms
2024-08-01 09:50:03.782 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 09:50:03.782 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:50:03.782 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:50:03.782 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:03.783 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:03.783 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:03.783 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:50:03.783 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 0.8518ms
2024-08-01 09:50:03.787 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 09:50:03.787 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:50:03.787 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:50:03.787 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:03.787 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:03.787 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:03.787 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:03.788 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:50:03.788 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:50:03.788 -05:00 [DBG] Authorization was successful.
2024-08-01 09:50:03.788 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:03.788 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-08-01 09:50:03.789 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:03.789 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:03.789 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:03.789 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:03.789 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:03.789 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:50:03.789 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:50:03.876 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:03.877 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:03.877 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:03.877 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:03.877 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.877 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.877 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.878 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.878 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.878 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:50:03.884 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:50:03.885 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.893 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.895 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.895 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.895 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 10ms reading results.
2024-08-01 09:50:03.895 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.896 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.903 -05:00 [DBG] Consultando perfil con id 34
2024-08-01 09:50:03.904 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.904 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.904 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.904 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.904 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.904 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.905 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.905 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.905 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.905 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.905 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.905 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.905 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.907 -05:00 [INF] Perfil encontrado con id: 34
2024-08-01 09:50:03.910 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-08-01 09:50:03.917 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:03.917 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.917 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.917 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.917 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.917 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.918 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.918 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.918 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.918 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.918 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.918 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.921 -05:00 [DBG] Consultando perfil con id 40
2024-08-01 09:50:03.921 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.921 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.921 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.921 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.921 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.922 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.922 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.922 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.922 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.922 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.922 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.922 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.922 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.924 -05:00 [INF] Perfil encontrado con id: 40
2024-08-01 09:50:03.927 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-08-01 09:50:03.932 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:03.932 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.932 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.932 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.933 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.933 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.933 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.933 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.934 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.934 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.934 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.934 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.936 -05:00 [DBG] Consultando perfil con id 31
2024-08-01 09:50:03.936 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.937 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.937 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.937 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.937 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.937 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.937 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:03.937 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.938 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:03.938 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.938 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.938 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.938 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.940 -05:00 [INF] Perfil encontrado con id: 31
2024-08-01 09:50:03.942 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-08-01 09:50:03.947 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:03.947 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.948 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.948 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:03.948 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.948 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:03.948 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.949 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:03.949 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.949 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:03.950 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.950 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:03.950 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 73.1914ms.
2024-08-01 09:50:03.950 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:03.950 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:03.950 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:03.950 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:03.950 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:03.950 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:03.950 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 161.2761ms
2024-08-01 09:50:03.950 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:03.950 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:03.951 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:03.951 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:03.951 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 164.0984ms
2024-08-01 09:50:05.643 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 09:50:05.643 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:05.643 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 09:50:05.643 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:05.643 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 09:50:05.643 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:50:05.643 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:05.643 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:05.643 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:05.643 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:05.643 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:05.643 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:05.643 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:05.643 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:50:05.644 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:50:05.644 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:05.644 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 1.3188ms
2024-08-01 09:50:05.644 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 09:50:05.644 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:05.644 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:05.649 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:05.649 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:05.649 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:05.649 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:05.649 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:05.681 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:05.681 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:05.681 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:05.681 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:05.681 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:05.681 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:05.681 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:05.681 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:05.682 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:05.682 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:05.682 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:50:05.682 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:05.682 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:50:05.682 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.682 -05:00 [DBG] Authorization was successful.
2024-08-01 09:50:05.682 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:05.682 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.682 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:05.682 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:50:05.682 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:05.682 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:05.682 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:05.682 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:05.682 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:05.682 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:05.682 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:05.682 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:05.682 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:05.683 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:05.710 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:05.710 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:05.712 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:05.712 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:05.713 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:05.713 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.713 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-08-01 09:50:05.714 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 09:50:05.714 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.714 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:05.714 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.1735ms.
2024-08-01 09:50:05.714 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:05.715 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:05.715 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:05.715 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:05.715 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:05.715 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:05.715 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:05.715 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 65.9434ms
2024-08-01 09:50:05.715 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:05.715 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:05.715 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.715 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:05.715 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:05.715 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 72.7787ms
2024-08-01 09:50:05.715 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:05.715 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.716 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.716 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:05.716 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:05.716 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:05.716 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:05.723 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:05.724 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.724 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:05.724 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.724 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:05.727 -05:00 [INF] Consulta de historial exitosa
2024-08-01 09:50:05.727 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.3942ms.
2024-08-01 09:50:05.727 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:05.727 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:05.727 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:05.727 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:05.727 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:05.727 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:05.730 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 47.8966ms
2024-08-01 09:50:05.730 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:05.731 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:05.731 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:05.731 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:05.731 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 77.9818ms
2024-08-01 09:50:08.482 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 09:50:08.483 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:50:08.483 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 09:50:08.484 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:08.484 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:08.484 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:08.484 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:08.485 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:50:08.485 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:50:08.485 -05:00 [DBG] Authorization was successful.
2024-08-01 09:50:08.485 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:08.485 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-08-01 09:50:08.487 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:08.487 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:08.488 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:08.488 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:08.488 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:08.488 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:50:08.489 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 09:50:08.575 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:08.575 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:08.575 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:08.576 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:08.576 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.576 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.576 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.576 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.576 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.576 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:50:08.578 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 09:50:08.580 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.580 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.580 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.580 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.580 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.580 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.580 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.583 -05:00 [DBG] Consultando perfil con id 34
2024-08-01 09:50:08.584 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.584 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.584 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.584 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.584 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.584 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.585 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.585 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.585 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.585 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.585 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.585 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.585 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.588 -05:00 [INF] Perfil encontrado con id: 34
2024-08-01 09:50:08.590 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-08-01 09:50:08.593 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:08.594 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.594 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.594 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.594 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.594 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.594 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.595 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.595 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.595 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.596 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.596 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (1ms).
2024-08-01 09:50:08.599 -05:00 [DBG] Consultando perfil con id 40
2024-08-01 09:50:08.600 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.600 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.600 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.600 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.600 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.600 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.601 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.601 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.601 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.601 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.601 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.601 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.601 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.604 -05:00 [INF] Perfil encontrado con id: 40
2024-08-01 09:50:08.606 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-08-01 09:50:08.609 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:08.610 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.610 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.610 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.610 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.610 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.610 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.611 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.611 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.611 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.611 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.611 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.615 -05:00 [DBG] Consultando perfil con id 31
2024-08-01 09:50:08.616 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.616 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.616 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.616 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.616 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.616 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.617 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 09:50:08.617 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.617 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:08.617 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.617 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.617 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.617 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.620 -05:00 [INF] Perfil encontrado con id: 31
2024-08-01 09:50:08.623 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-08-01 09:50:08.626 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 09:50:08.626 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.626 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.627 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:08.627 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.627 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:08.627 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.627 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 09:50:08.627 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.627 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:08.628 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.628 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:08.628 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.7637ms.
2024-08-01 09:50:08.628 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:08.628 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:08.628 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:08.628 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:08.628 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:08.628 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:08.630 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 141.6835ms
2024-08-01 09:50:08.630 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 09:50:08.630 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:08.630 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:08.630 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:08.630 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 148.2738ms
2024-08-01 09:50:10.683 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:10.683 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:10.683 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:50:10.683 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:10.683 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:10.683 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:10.683 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:50:10.683 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 0.6092ms
2024-08-01 09:50:10.686 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 09:50:10.687 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 09:50:10.687 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 09:50:10.687 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:10.687 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:10.687 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:10.687 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:10.687 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:50:10.688 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:10.688 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:10.688 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:10.688 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:10.688 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:10.688 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:10.688 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:10.689 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:50:10.689 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:50:10.689 -05:00 [DBG] Authorization was successful.
2024-08-01 09:50:10.690 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:10.690 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:50:10.691 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:10.691 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:10.691 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:10.691 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:10.691 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:10.691 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:10.691 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:10.693 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:10.694 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 09:50:10.731 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:10.731 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:10.731 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:10.731 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:10.732 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:10.732 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:10.732 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:10.733 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:10.733 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 09:50:10.772 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:10.772 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:10.773 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:10.773 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:10.773 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:10.773 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:10.773 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:10.773 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.773 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.773 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:10.773 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:10.773 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.773 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:10.773 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:10.792 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:10.794 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.794 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-01 09:50:10.794 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.794 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:10.800 -05:00 [INF] Consulta de historial exitosa
2024-08-01 09:50:10.801 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.8096ms.
2024-08-01 09:50:10.801 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:10.801 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:10.801 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:10.801 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:10.801 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:10.801 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:10.803 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 111.608ms
2024-08-01 09:50:10.803 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:10.803 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:10.803 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.803 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:10.804 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 116.0857ms
2024-08-01 09:50:10.814 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.814 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:10.814 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:10.814 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:10.814 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:10.817 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:10.817 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:10.817 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:10.817 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:10.817 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.817 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:10.817 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.817 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:10.817 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.4898ms.
2024-08-01 09:50:10.817 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:10.818 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:10.818 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:10.818 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:10.818 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:10.818 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:10.818 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 85.5397ms
2024-08-01 09:50:10.818 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:10.818 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:10.818 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:10.818 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:10.818 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 132.108ms
2024-08-01 09:50:49.273 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:49.299 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 09:50:49.300 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:49.300 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 09:50:49.300 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 09:50:49.300 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 09:50:49.300 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:49.300 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:49.300 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:49.300 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:49.300 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:49.300 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:49.300 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:49.300 -05:00 [DBG] The request is a preflight request.
2024-08-01 09:50:49.300 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 09:50:49.300 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:49.300 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 27.1261ms
2024-08-01 09:50:49.300 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 09:50:49.300 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:49.301 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:49.301 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:49.301 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:49.301 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:49.301 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:49.301 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 09:50:49.364 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:49.365 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:49.365 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:49.365 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:49.365 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.365 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.365 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:49.365 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:49.366 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:49.366 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:49.378 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 09:50:49.378 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:49.378 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 09:50:49.378 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:49.378 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 09:50:49.378 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 09:50:49.378 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 09:50:49.379 -05:00 [INF] CORS policy execution successful.
2024-08-01 09:50:49.387 -05:00 [DBG] Successfully validated the token.
2024-08-01 09:50:49.387 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 09:50:49.392 -05:00 [DBG] Authorization was successful.
2024-08-01 09:50:49.393 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:49.395 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 09:50:49.395 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 09:50:49.396 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 09:50:49.396 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 09:50:49.396 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:49.396 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 09:50:49.396 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:49.396 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 09:50:49.396 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 09:50:49.396 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:49.396 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.396 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 17ms reading results.
2024-08-01 09:50:49.396 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.396 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 09:50:49.397 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:49.397 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.7115ms.
2024-08-01 09:50:49.398 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:49.398 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:49.398 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:49.437 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:49.437 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:49.437 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 09:50:49.437 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:49.439 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 137.7442ms
2024-08-01 09:50:49.439 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 09:50:49.439 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:49.439 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.439 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:49.439 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 139.9454ms
2024-08-01 09:50:49.441 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 09:50:49.448 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 09:50:49.450 -05:00 [DBG] Creating DbConnection.
2024-08-01 09:50:49.450 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 09:50:49.450 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.450 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.450 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 09:50:49.450 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:49.450 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 09:50:49.450 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:49.472 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 09:50:49.473 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.473 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 09:50:49.473 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.473 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 09:50:49.480 -05:00 [INF] Consulta de historial exitosa
2024-08-01 09:50:49.480 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.9799ms.
2024-08-01 09:50:49.481 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 09:50:49.481 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 09:50:49.481 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 09:50:49.481 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 09:50:49.481 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 09:50:49.481 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 09:50:49.482 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 85.9446ms
2024-08-01 09:50:49.482 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 09:50:49.482 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 09:50:49.483 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 09:50:49.483 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 09:50:49.483 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 106.9957ms
2024-08-01 10:12:18.572 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 10:12:18.573 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:12:18.573 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:12:18.573 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:18.573 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:18.573 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:18.573 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:12:18.573 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.8795ms
2024-08-01 10:12:18.576 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 10:12:18.576 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:12:18.576 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:12:18.576 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:12:18.577 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:18.577 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:18.577 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:18.577 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:12:18.577 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:12:18.577 -05:00 [DBG] Authorization was successful.
2024-08-01 10:12:18.577 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:12:18.577 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 10:12:18.577 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:12:18.577 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:12:18.577 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:12:18.578 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:12:18.578 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:12:18.578 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:12:18.578 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:12:18.611 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:12:18.613 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 10:12:18.614 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:12:18.614 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:12:18.614 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:12:18.614 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:18.635 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:18.635 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:12:18.636 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:18.636 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:18.636 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 10:12:18.644 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.644 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.645 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:18.645 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:18.645 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:12:18.645 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:18.645 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:12:18.647 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 10:12:18.647 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.4354ms.
2024-08-01 10:12:18.647 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:12:18.648 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:12:18.648 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:12:18.648 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:12:18.648 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:12:18.648 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:12:18.648 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 70.3561ms
2024-08-01 10:12:18.648 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:12:18.648 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:12:18.648 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:18.648 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:12:18.649 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 73.3546ms
2024-08-01 10:12:52.665 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-01 10:12:52.665 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 10:12:52.665 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:12:52.666 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:52.667 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:52.668 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:52.669 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:12:52.669 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-08-01 10:12:52.670 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 4.7643ms
2024-08-01 10:12:52.670 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-01 10:12:52.670 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:12:52.670 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:52.670 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:52.670 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:52.670 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:12:52.670 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 1.5596ms
2024-08-01 10:12:52.674 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-01 10:12:52.674 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 10:12:52.674 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-08-01 10:12:52.675 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-01 10:12:52.675 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-01 10:12:52.675 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-08-01 10:12:52.675 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.675 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.675 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:52.675 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:52.675 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:52.675 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:52.675 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:52.675 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:52.675 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:12:52.675 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:12:52.675 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:12:52.675 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:12:52.675 -05:00 [DBG] Authorization was successful.
2024-08-01 10:12:52.676 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.676 -05:00 [DBG] Authorization was successful.
2024-08-01 10:12:52.676 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.678 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-01 10:12:52.678 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:12:52.678 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:12:52.678 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:12:52.678 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:12:52.678 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:12:52.678 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 10:12:52.679 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 10:12:52.679 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 10:12:52.680 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-01 10:12:52.680 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-08-01 10:12:52.681 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:12:52.682 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:12:52.682 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:12:52.682 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:12:52.682 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:12:52.682 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:12:52.682 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-01 10:12:52.682 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:12:52.682 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 10:12:52.682 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:12:52.683 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-01 10:12:52.733 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:12:52.764 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:12:52.775 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:12:52.776 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-08-01 10:12:52.779 -05:00 [DBG] Consultando libros...
2024-08-01 10:12:52.780 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:12:52.783 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 10:12:52.784 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:12:52.784 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:12:52.784 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.784 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.784 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:12:52.785 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:52.785 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:52.785 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-01 10:12:52.796 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-01 10:12:52.797 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-08-01 10:12:52.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.804 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 10:12:52.805 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:12:52.805 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:12:52.805 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:52.809 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.809 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 12ms reading results.
2024-08-01 10:12:52.809 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.809 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:12:52.810 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.4872ms.
2024-08-01 10:12:52.810 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:12:52.810 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:12:52.810 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:12:52.810 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:12:52.810 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:12:52.810 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:12:52.811 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.811 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:12:52.811 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:52.811 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:52.812 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-01 10:12:52.813 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 131.1124ms
2024-08-01 10:12:52.813 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.814 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:12:52.814 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.814 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:12:52.814 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 139.4031ms
2024-08-01 10:12:52.817 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-01 10:12:52.818 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.818 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:12:52.818 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.818 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:12:52.822 -05:00 [INF] Consulta de libros exitosa
2024-08-01 10:12:52.822 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 89.4878ms.
2024-08-01 10:12:52.823 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:12:52.823 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:12:52.823 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:12:52.823 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:12:52.823 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:12:52.823 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:12:52.827 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 148.8564ms
2024-08-01 10:12:52.827 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:12:52.827 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:12:52.827 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:52.827 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:12:52.828 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 153.4876ms
2024-08-01 10:12:55.134 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-08-01 10:12:55.134 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-01 10:12:55.135 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:12:55.135 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:55.135 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:55.135 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:55.135 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:12:55.135 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 0.9983ms
2024-08-01 10:12:55.141 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-08-01 10:12:55.143 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-01 10:12:55.143 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-08-01 10:12:55.143 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-08-01 10:12:55.143 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:12:55.144 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:12:55.144 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:12:55.145 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:12:55.146 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:12:55.147 -05:00 [DBG] Authorization was successful.
2024-08-01 10:12:55.149 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-08-01 10:12:55.154 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-08-01 10:12:55.154 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:12:55.154 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:12:55.154 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:12:55.154 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:12:55.154 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:12:55.155 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-01 10:12:55.158 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-01 10:12:55.158 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-08-01 10:12:55.159 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-08-01 10:12:55.159 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-01 10:12:55.159 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-08-01 10:12:55.159 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-08-01 10:12:55.159 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-08-01 10:12:55.189 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:12:55.193 -05:00 [DBG] Consultando perfil con id 31
2024-08-01 10:12:55.194 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:12:55.194 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:12:55.194 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:12:55.194 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:55.194 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:55.194 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:12:55.194 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:55.194 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:12:55.194 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:12:55.196 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:12:55.197 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:12:55.197 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:55.197 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:12:55.197 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:55.197 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:12:55.200 -05:00 [INF] Perfil encontrado con id: 31
2024-08-01 10:12:55.200 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.4522ms.
2024-08-01 10:12:55.200 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:12:55.200 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:12:55.200 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:12:55.200 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:12:55.200 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:12:55.200 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-08-01 10:12:55.201 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 46.1541ms
2024-08-01 10:12:55.201 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-08-01 10:12:55.201 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:12:55.201 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:12:55.201 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:12:55.201 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 59.9483ms
2024-08-01 10:13:00.951 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-08-01 10:13:00.951 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-08-01 10:13:00.951 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:13:00.951 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:00.951 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:00.951 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:00.951 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:13:00.951 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.5731ms
2024-08-01 10:13:00.962 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-08-01 10:13:00.962 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-08-01 10:13:00.962 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-08-01 10:13:00.962 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-08-01 10:13:00.962 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:00.962 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:00.962 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:00.963 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:13:00.963 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:13:00.963 -05:00 [DBG] Authorization was successful.
2024-08-01 10:13:00.963 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-08-01 10:13:00.967 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-08-01 10:13:00.967 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:13:00.967 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:13:00.967 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:13:00.967 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:13:00.967 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:13:00.967 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 10:13:00.967 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 10:13:00.967 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 10:13:00.967 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-01 10:13:00.967 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 10:13:00.967 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 10:13:00.967 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-01 10:13:00.967 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-01 10:13:01.008 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:13:01.011 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-08-01 10:13:01.011 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:13:01.014 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 10:13:01.015 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:13:01.015 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:13:01.015 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:01.015 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:01.015 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:01.015 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:01.015 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:01.015 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:01.027 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:01.027 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:01.027 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:01.028 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:01.028 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:01.028 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.7334ms.
2024-08-01 10:13:01.028 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:13:01.028 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:13:01.028 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:13:01.028 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:13:01.028 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:13:01.028 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-01 10:13:01.030 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 62.7026ms
2024-08-01 10:13:01.030 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-08-01 10:13:01.030 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:13:01.030 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:01.030 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:13:01.030 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 68.5662ms
2024-08-01 10:13:02.230 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-08-01 10:13:02.230 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 10:13:02.230 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:13:02.230 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:02.230 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:02.230 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:02.231 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:13:02.231 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 1.3141ms
2024-08-01 10:13:02.236 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-08-01 10:13:02.236 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-01 10:13:02.236 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-01 10:13:02.236 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:13:02.236 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:02.236 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:02.236 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:02.236 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:13:02.237 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:13:02.237 -05:00 [DBG] Authorization was successful.
2024-08-01 10:13:02.237 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:13:02.237 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-01 10:13:02.237 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:13:02.237 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:13:02.237 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:13:02.237 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:13:02.238 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:13:02.238 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 10:13:02.244 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-01 10:13:02.245 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 10:13:02.246 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-01 10:13:02.247 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:13:02.247 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:13:02.247 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-01 10:13:02.247 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-01 10:13:02.279 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:13:02.281 -05:00 [DBG] Consultando libros...
2024-08-01 10:13:02.282 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:13:02.282 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-08-01 10:13:02.287 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-01 10:13:02.289 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:13:02.289 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:13:02.289 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:02.289 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:02.289 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:02.289 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:02.289 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:02.289 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-08-01 10:13:02.293 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-08-01 10:13:02.293 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:02.293 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:02.293 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:02.293 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:02.295 -05:00 [INF] Consulta de libros exitosa
2024-08-01 10:13:02.295 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.4734ms.
2024-08-01 10:13:02.295 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:13:02.295 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:13:02.295 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:13:02.295 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:13:02.295 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:13:02.295 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:13:02.296 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 57.9753ms
2024-08-01 10:13:02.296 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-01 10:13:02.296 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:13:02.296 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:02.296 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:13:02.296 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 61.4466ms
2024-08-01 10:13:04.177 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 10:13:04.177 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 10:13:04.178 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-01 10:13:04.178 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:13:04.178 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:04.178 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-01 10:13:04.178 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-01 10:13:04.178 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:04.178 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 10:13:04.178 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:04.178 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:04.178 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:13:04.178 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:04.178 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:04.178 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 1.2123ms
2024-08-01 10:13:04.178 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-01 10:13:04.178 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 10:13:04.178 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-01 10:13:04.179 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:13:04.179 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:13:04.179 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:13:04.179 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:13:04.179 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:13:04.179 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 10:13:04.180 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-01 10:13:04.212 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-01 10:13:04.212 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:13:04.212 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 10:13:04.212 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-01 10:13:04.212 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 10:13:04.212 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:04.213 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:04.213 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:04.213 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:13:04.213 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:13:04.213 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:13:04.213 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:13:04.213 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:13:04.213 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.213 -05:00 [DBG] Authorization was successful.
2024-08-01 10:13:04.213 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 10:13:04.213 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.213 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:04.213 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 10:13:04.213 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:04.213 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:13:04.213 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:04.213 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:13:04.213 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 10:13:04.213 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:13:04.213 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:13:04.214 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:13:04.214 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:13:04.215 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:13:04.248 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:13:04.251 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-01 10:13:04.254 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:13:04.254 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:13:04.254 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:13:04.254 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.255 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.255 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:04.255 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:04.255 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:04.255 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 10:13:04.264 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-01 10:13:04.264 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:04.264 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:04.266 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:04.276 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-01 10:13:04.276 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.277 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 12ms reading results.
2024-08-01 10:13:04.277 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.280 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (2ms).
2024-08-01 10:13:04.280 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.2078ms.
2024-08-01 10:13:04.281 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.281 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:13:04.281 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-08-01 10:13:04.281 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:13:04.281 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.281 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:13:04.281 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:13:04.281 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:04.281 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:13:04.281 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:13:04.282 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 102.773ms
2024-08-01 10:13:04.283 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-01 10:13:04.283 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:13:04.283 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.283 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:13:04.283 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 106.0365ms
2024-08-01 10:13:04.284 -05:00 [INF] Consulta de historial exitosa
2024-08-01 10:13:04.284 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.943ms.
2024-08-01 10:13:04.284 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:13:04.284 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:13:04.284 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:13:04.284 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:13:04.284 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:13:04.285 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:13:04.293 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 79.5076ms
2024-08-01 10:13:04.293 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-01 10:13:04.294 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:13:04.294 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:04.294 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:13:04.294 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 111.1521ms
2024-08-01 10:13:05.757 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 10:13:05.757 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 10:13:05.757 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:13:05.757 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:05.757 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:05.757 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:05.757 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:13:05.758 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 0.8987ms
2024-08-01 10:13:05.761 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-08-01 10:13:05.761 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 10:13:05.761 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-08-01 10:13:05.761 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 10:13:05.761 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:13:05.761 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:13:05.761 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:13:05.762 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:13:05.762 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:13:05.763 -05:00 [DBG] Authorization was successful.
2024-08-01 10:13:05.763 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 10:13:05.764 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-08-01 10:13:05.764 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:13:05.767 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:13:05.767 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:13:05.767 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:13:05.768 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:13:05.768 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 10:13:05.769 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-08-01 10:13:05.814 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:13:05.815 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:13:05.815 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:13:05.815 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:13:05.815 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.815 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.815 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.815 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.815 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.815 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 10:13:05.820 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-08-01 10:13:05.820 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.820 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.821 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.821 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.821 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.821 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.821 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.823 -05:00 [DBG] Consultando perfil con id 34
2024-08-01 10:13:05.824 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.824 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.824 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.824 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.824 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.824 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.825 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.825 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.825 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.825 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.825 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.825 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.825 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.828 -05:00 [INF] Perfil encontrado con id: 34
2024-08-01 10:13:05.830 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-08-01 10:13:05.833 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 10:13:05.833 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.833 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.833 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.834 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.834 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.834 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.834 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.834 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.834 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.834 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.834 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.840 -05:00 [DBG] Consultando perfil con id 40
2024-08-01 10:13:05.840 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.840 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.840 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.840 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.841 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.841 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.841 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.841 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.841 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.842 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.842 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.842 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.842 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.844 -05:00 [INF] Perfil encontrado con id: 40
2024-08-01 10:13:05.846 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-08-01 10:13:05.849 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 10:13:05.849 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.849 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.850 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.850 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.850 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.850 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.850 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.850 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.850 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.850 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.851 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.855 -05:00 [DBG] Consultando perfil con id 31
2024-08-01 10:13:05.856 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.856 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.856 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.856 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.856 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.856 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.857 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-08-01 10:13:05.857 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.857 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:13:05.857 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.857 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.857 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.857 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.860 -05:00 [INF] Perfil encontrado con id: 31
2024-08-01 10:13:05.862 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-08-01 10:13:05.865 -05:00 [INF] Libros encontrados exitosamente
2024-08-01 10:13:05.865 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.865 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.866 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:13:05.866 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.866 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:13:05.866 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.866 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-08-01 10:13:05.866 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.867 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-01 10:13:05.867 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.867 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:13:05.867 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.5476ms.
2024-08-01 10:13:05.867 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:13:05.867 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:13:05.867 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:13:05.867 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:13:05.867 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:13:05.867 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:13:05.868 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 100.0238ms
2024-08-01 10:13:05.868 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-08-01 10:13:05.868 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:13:05.868 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:13:05.869 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:13:05.870 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 109.2365ms
2024-08-01 10:27:32.403 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 10:27:32.404 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:27:32.404 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-01 10:27:32.404 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:27:32.404 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:27:32.404 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:27:32.404 -05:00 [DBG] The request is a preflight request.
2024-08-01 10:27:32.404 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.6006ms
2024-08-01 10:27:32.428 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-01 10:27:32.439 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:27:32.439 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-01 10:27:32.444 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:27:32.444 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-01 10:27:32.444 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-01 10:27:32.444 -05:00 [INF] CORS policy execution successful.
2024-08-01 10:27:32.444 -05:00 [DBG] Successfully validated the token.
2024-08-01 10:27:32.444 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-01 10:27:32.445 -05:00 [DBG] Authorization was successful.
2024-08-01 10:27:32.445 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:27:32.445 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-01 10:27:32.445 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-01 10:27:32.445 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-01 10:27:32.445 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-01 10:27:32.445 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-01 10:27:32.445 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-01 10:27:32.445 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:27:32.447 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-01 10:27:32.485 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-01 10:27:32.491 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-01 10:27:32.492 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-01 10:27:32.493 -05:00 [DBG] Creating DbConnection.
2024-08-01 10:27:32.493 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-01 10:27:32.493 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:27:32.569 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:27:32.569 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-01 10:27:32.569 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-01 10:27:32.570 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-08-01 10:27:32.571 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 10:27:32.579 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-01 10:27:32.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-01 10:27:32.583 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:27:32.583 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-08-01 10:27:32.583 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:27:32.583 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-01 10:27:32.592 -05:00 [INF] Consulta de archivos exitosa
2024-08-01 10:27:32.592 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 106.3575ms.
2024-08-01 10:27:32.592 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-01 10:27:32.592 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-01 10:27:32.592 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-01 10:27:32.593 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-01 10:27:32.593 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-01 10:27:32.593 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-01 10:27:32.593 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 147.7011ms
2024-08-01 10:27:32.593 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-01 10:27:32.593 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-01 10:27:32.593 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-01 10:27:32.594 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-01 10:27:32.594 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 165.4465ms
