2024-12-03 12:06:43.103 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-03 12:06:43.790 -05:00 [DBG] Hosting starting
2024-12-03 12:06:44.563 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-03 12:06:44.585 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-11da36a6-1b5b-45d1-890d-4d2c5ff23e77.xml'.
2024-12-03 12:06:44.633 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-12-03 12:06:44.645 -05:00 [DBG] Found key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77}.
2024-12-03 12:06:44.694 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-12-03 12:06:44.712 -05:00 [DBG] Considering key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} with expiration date 2024-12-29 20:15:31Z as default key.
2024-12-03 12:06:44.743 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-03 12:06:44.750 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-03 12:06:44.754 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-03 12:06:44.763 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-03 12:06:44.765 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-03 12:06:44.769 -05:00 [DBG] Using key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} as the default key.
2024-12-03 12:06:44.771 -05:00 [DBG] Key ring with default key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} was loaded during application startup.
2024-12-03 12:06:45.856 -05:00 [INF] Now listening on: https://localhost:7299
2024-12-03 12:06:45.857 -05:00 [INF] Now listening on: http://localhost:5219
2024-12-03 12:06:45.857 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-12-03 12:06:45.857 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-03 12:06:45.857 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-03 12:06:45.858 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-03 12:06:45.858 -05:00 [INF] Hosting environment: Development
2024-12-03 12:06:45.858 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-12-03 12:06:45.858 -05:00 [DBG] Hosting started
2024-12-03 12:06:46.092 -05:00 [DBG] Connection id "0HN8JNJF4RTF7" accepted.
2024-12-03 12:06:46.093 -05:00 [DBG] Connection id "0HN8JNJF4RTF7" started.
2024-12-03 12:06:46.106 -05:00 [DBG] Connection id "0HN8JNJF4RTF7" received FIN.
2024-12-03 12:06:46.150 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-03 12:06:46.251 -05:00 [DBG] Connection id "0HN8JNJF4RTF7" stopped.
2024-12-03 12:06:46.261 -05:00 [DBG] Connection id "0HN8JNJF4RTF7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-03 12:06:46.936 -05:00 [DBG] Connection id "0HN8JNJF4RTF8" accepted.
2024-12-03 12:06:46.972 -05:00 [DBG] Connection id "0HN8JNJF4RTF8" started.
2024-12-03 12:06:47.244 -05:00 [DBG] Connection 0HN8JNJF4RTF8 established using the following protocol: "Tls12"
2024-12-03 12:06:47.381 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-12-03 12:06:48.093 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-03 12:06:48.159 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-03 12:06:48.160 -05:00 [DBG] Request did not match any endpoints
2024-12-03 12:06:48.463 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-03 12:06:48.468 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-03 12:06:48.559 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-03 12:06:48.563 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-03 12:06:48.573 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1204.8347ms
2024-12-03 12:06:48.643 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-12-03 12:06:48.643 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-12-03 12:06:48.659 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 16.2346ms
2024-12-03 12:06:48.808 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 164.8909ms
2024-12-03 12:06:48.956 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-12-03 12:06:48.956 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-03 12:06:48.956 -05:00 [DBG] Request did not match any endpoints
2024-12-03 12:06:49.474 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 518.4069ms
2024-12-03 12:07:05.091 -05:00 [DBG] Connection id "0HN8JNJF4RTF9" accepted.
2024-12-03 12:07:05.092 -05:00 [DBG] Connection id "0HN8JNJF4RTF9" started.
2024-12-03 12:07:05.105 -05:00 [DBG] Connection 0HN8JNJF4RTF9 established using the following protocol: "Tls12"
2024-12-03 12:07:05.137 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:05.149 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:05.149 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:05.152 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:05.154 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:05.154 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:05.155 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:05.155 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 18.5858ms
2024-12-03 12:07:05.160 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:05.167 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:05.170 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:05.171 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:05.171 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:05.171 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:05.171 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:05.379 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:05.380 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:05.386 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:05.387 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:05.409 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:05.412 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:05.412 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:05.413 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:05.413 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:05.413 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:05.415 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:05.613 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-03 12:07:05.645 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:05.747 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:05.771 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:07:06.799 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:06.890 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-12-03 12:07:07.192 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:07:07.245 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:07.272 -05:00 [DBG] Created DbConnection. (26ms).
2024-12-03 12:07:07.275 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:07.715 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:07.721 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:07.732 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-12-03 12:07:07.734 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2024-12-03 12:07:07.745 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:07.833 -05:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:07.901 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:07.938 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:07.947 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:07.965 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 120ms reading results.
2024-12-03 12:07:07.968 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:07.977 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (7ms).
2024-12-03 12:07:07.980 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:07:07.986 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2235.8112ms.
2024-12-03 12:07:07.996 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:07.998 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:07.998 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:07.998 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:07.999 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:08.000 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:07:08.024 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 2607.1151ms
2024-12-03 12:07:08.025 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:08.030 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:08.040 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:08.042 -05:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-12-03 12:07:08.043 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 2883.3775ms
2024-12-03 12:07:33.001 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:33.002 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:33.002 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:33.002 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:33.034 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:33.034 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:33.034 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:33.034 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 34.0188ms
2024-12-03 12:07:33.038 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:33.039 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:33.039 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:33.039 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:33.039 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:33.040 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:33.040 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:33.049 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:33.049 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:33.050 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:33.050 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:33.051 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:33.051 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:33.051 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:33.051 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:33.051 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:33.051 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:33.051 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:33.052 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:33.078 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:33.080 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:07:33.096 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:33.100 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:33.100 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:33.100 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:33.101 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:33.101 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:33.101 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:33.101 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:33.101 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:33.107 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:33.107 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:33.107 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:33.107 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:33.107 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:33.108 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:33.108 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:33.111 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:07:33.111 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.4954ms.
2024-12-03 12:07:33.112 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:33.112 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:33.112 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:33.112 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:33.112 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:33.112 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:07:33.112 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 61.3088ms
2024-12-03 12:07:33.112 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:33.113 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:33.113 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:33.113 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:33.113 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 75.025ms
2024-12-03 12:07:35.740 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - null null
2024-12-03 12:07:35.740 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:35.741 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:35.741 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:35.741 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:35.741 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:35.741 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:35.741 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - 204 null null 1.2079ms
2024-12-03 12:07:35.745 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - null null
2024-12-03 12:07:35.745 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:35.745 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:07:35.745 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:07:35.745 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:35.745 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:35.745 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:35.747 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:35.748 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:35.749 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:35.749 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:07:35.761 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:35.761 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:35.761 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:35.761 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:35.762 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:35.762 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:35.762 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:35.763 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:35.781 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:35.784 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-12-03 12:07:35.785 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:35.785 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:35.785 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:35.787 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:35.788 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:35.788 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:07:35.789 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:35.789 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:35.789 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:35.789 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:35.827 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:35.835 -05:00 [DBG] Descargando archivo...
2024-12-03 12:07:35.904 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:35.906 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.Id == __idArchivo_0)'
2024-12-03 12:07:35.917 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-03 12:07:35.921 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:35.921 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:35.921 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:35.921 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:35.921 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:35.922 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:35.924 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-12-03 12:07:35.928 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:35.954 -05:00 [INF] Executed DbCommand (29ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:35.954 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:35.957 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:35.958 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-12-03 12:07:35.959 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:35.959 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:35.991 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.014 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.029 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.033 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:36.036 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:36.063 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:36.146 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.146 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.149 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:36.149 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:36.149 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:36.149 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:36.158 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:36.170 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:07:36.177 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.177 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 18ms reading results.
2024-12-03 12:07:36.178 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.178 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:36.189 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.190 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:36.192 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.192 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:36.192 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:36.192 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:36.196 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.196 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.196 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:36.197 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:36.197 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:36.197 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:36.201 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:36.202 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.203 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:07:36.203 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.203 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:36.203 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:36.203 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:36.354 -05:00 [ERR] Error al descargar archivo: $Could not find file 'C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend\Archivos\Sistema de cargue y gestión de archivos.docx'.
2024-12-03 12:07:36.504 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 676.3826ms.
2024-12-03 12:07:36.504 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:36.504 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:36.504 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:36.504 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:36.504 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-12-03 12:07:36.504 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-12-03 12:07:36.505 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 743.2151ms
2024-12-03 12:07:36.505 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:07:36.505 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:36.505 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:36.505 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:36.506 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - 400 null text/plain; charset=utf-8 760.9728ms
2024-12-03 12:07:52.613 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=10&idPerfil=31 - null null
2024-12-03 12:07:52.613 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:52.613 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:52.614 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:52.614 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:52.614 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:52.614 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:52.614 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=10&idPerfil=31 - 204 null null 0.8221ms
2024-12-03 12:07:52.617 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=10&idPerfil=31 - null null
2024-12-03 12:07:52.617 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:52.617 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:07:52.617 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:52.617 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:52.617 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:52.617 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:52.617 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:52.617 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:52.618 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:52.618 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:52.622 -05:00 [INF] Route matched with {action = "EliminarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:52.622 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:52.622 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:52.622 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:52.622 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:52.622 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:52.622 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:52.622 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:52.623 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:52.623 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:52.662 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:52.668 -05:00 [DBG] Eliminando archivo con id: $10...
2024-12-03 12:07:52.668 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:52.669 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(a => a.Id == __idArchivo_0)'
2024-12-03 12:07:52.673 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-03 12:07:52.673 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:52.673 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:52.673 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.673 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.673 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:52.673 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.673 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.673 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:52.678 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:52.678 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.678 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.678 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:52.678 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.678 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:52.679 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.679 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:52.679 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:52.679 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:52.680 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.680 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.680 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:52.680 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.680 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.680 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:52.682 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:52.682 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.682 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:52.682 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.682 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:52.683 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.683 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:52.685 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.685 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.685 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.685 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:52.685 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:52.686 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:52.687 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.687 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.687 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:52.687 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.687 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.687 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:52.689 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:52.689 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:07:52.689 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.689 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:52.689 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.689 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:52.689 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.690 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:52.693 -05:00 [INF] Archivo eliminado exitosamente
2024-12-03 12:07:52.694 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.3629ms.
2024-12-03 12:07:52.694 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:52.694 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:52.694 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:52.694 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:52.694 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:52.694 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:07:52.699 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) in 77.0024ms
2024-12-03 12:07:52.699 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:52.699 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:52.699 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.700 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:52.700 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=10&idPerfil=31 - 200 null application/json; charset=utf-8 83.495ms
2024-12-03 12:07:52.704 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:52.704 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:52.704 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:52.705 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:52.705 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:52.705 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:52.705 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:52.705 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.2789ms
2024-12-03 12:07:52.709 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:52.709 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:52.709 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:52.709 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:52.709 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:52.709 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:52.709 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:52.710 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:52.710 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:52.710 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:52.710 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:52.710 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:52.710 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:52.710 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:52.710 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:52.710 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:52.710 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:52.711 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:52.711 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:52.738 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:52.740 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:07:52.742 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:52.742 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:52.743 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:52.743 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.743 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.743 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:52.743 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.743 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:52.744 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:52.746 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:52.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:52.747 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.747 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:52.747 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.747 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:52.750 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:07:52.750 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.8815ms.
2024-12-03 12:07:52.750 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:52.750 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:52.750 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:52.750 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:52.750 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:52.750 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:07:52.751 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 40.0241ms
2024-12-03 12:07:52.751 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:52.751 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:52.751 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:52.751 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:52.751 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 42.6089ms
2024-12-03 12:07:54.731 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - null null
2024-12-03 12:07:54.731 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:54.731 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:07:54.732 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:54.732 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:54.732 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:54.732 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:07:54.732 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - 204 null null 0.9285ms
2024-12-03 12:07:54.734 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - null null
2024-12-03 12:07:54.734 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:07:54.734 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:07:54.734 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:54.734 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:54.734 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:54.734 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:54.735 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:54.735 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:54.735 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:54.735 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:54.735 -05:00 [INF] Route matched with {action = "EliminarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:54.735 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:54.735 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:54.735 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:54.735 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:54.735 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:54.735 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:54.735 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:54.736 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:07:54.736 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:07:54.762 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:54.764 -05:00 [DBG] Eliminando archivo con id: $7...
2024-12-03 12:07:54.765 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:54.766 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:54.766 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:54.766 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.766 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.766 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:54.766 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.766 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.766 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:54.768 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:07:54.770 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.770 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.770 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:07:54.770 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.770 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:54.770 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.770 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:54.770 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:54.770 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:54.771 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.771 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.771 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:54.771 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.771 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.771 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:54.773 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:07:54.773 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.773 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:54.773 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.773 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:54.773 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.773 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:54.774 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.774 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.775 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.775 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:54.775 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:07:54.775 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:07:54.776 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.776 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.776 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:54.776 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.776 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.776 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:54.778 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:07:54.778 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:07:54.778 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.779 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:54.779 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.779 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:54.779 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:07:54.779 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:07:54.781 -05:00 [INF] Archivo eliminado exitosamente
2024-12-03 12:07:54.781 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.0365ms.
2024-12-03 12:07:54.782 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:54.782 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:54.782 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:54.782 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:54.782 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:54.782 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:07:54.782 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) in 46.7839ms
2024-12-03 12:07:54.782 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-12-03 12:07:54.782 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:54.782 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.782 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:54.783 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=7&idPerfil=31 - 200 null application/json; charset=utf-8 49.0453ms
2024-12-03 12:07:54.788 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:07:54.788 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:54.788 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:07:54.788 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:54.788 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:07:54.788 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:07:54.789 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:07:54.789 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:07:54.789 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:07:54.789 -05:00 [DBG] Authorization was successful.
2024-12-03 12:07:54.789 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:54.789 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:07:54.790 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:07:54.790 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:07:54.790 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:07:54.790 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:07:54.790 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:07:54.790 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:54.791 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:07:54.818 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:07:54.820 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:07:54.821 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:07:54.821 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:07:54.821 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:07:54.821 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.821 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.821 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:07:54.821 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.821 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:07:54.821 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:54.824 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:07:54.825 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.825 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:07:54.825 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.825 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:07:54.828 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:07:54.828 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.3107ms.
2024-12-03 12:07:54.828 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:07:54.828 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:07:54.828 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:07:54.829 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:07:54.829 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:07:54.829 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:07:54.829 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 38.6948ms
2024-12-03 12:07:54.829 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:07:54.829 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:07:54.829 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:07:54.829 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:07:54.829 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 41.8166ms
2024-12-03 12:08:06.660 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-12-03 12:08:06.660 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:06.661 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:08:06.661 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:06.661 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:06.661 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:06.661 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:08:06.661 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 1.448ms
2024-12-03 12:08:06.667 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundaryoPmPM20s7tKWcgY1 1667626
2024-12-03 12:08:06.667 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:06.668 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:08:06.668 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:06.668 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:06.668 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:06.668 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:06.668 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:06.668 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:06.669 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:06.669 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:06.677 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:06.677 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:06.677 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-12-03 12:08:06.678 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:06.678 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:06.678 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:06.680 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:06.681 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:06.695 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:0000001D": started reading request body.
2024-12-03 12:08:06.758 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:0000001D": done reading request body.
2024-12-03 12:08:06.771 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:08:06.773 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-12-03 12:08:06.775 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:06.775 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:06.775 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:08:06.780 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:06.780 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:06.780 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:08:06.780 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:06.780 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:06.780 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:06.780 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:06.841 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:06.846 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-12-03 12:08:06.847 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:06.848 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.RutaDocumento == __ruta_0 && A.FechaEliminacion == null)'
2024-12-03 12:08:06.852 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE (a.RutaDocumento == @__ruta_0) && (a.FechaEliminacion == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-03 12:08:06.854 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:06.854 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:06.854 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.855 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.855 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:06.855 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.855 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.855 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:08:06.861 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:08:06.861 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.861 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:06.861 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.861 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:06.864 -05:00 [DBG] Creando archivo en la ruta: $Archivos\ejemplo.pdf...
2024-12-03 12:08:06.870 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Archivo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.872 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.872 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:06.872 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:06.872 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:06.874 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.874 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.874 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:06.874 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.874 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.874 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:08:06.878 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:08:06.879 -05:00 [DBG] The foreign key property 'Archivo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:08:06.882 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.882 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-12-03 12:08:06.882 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.882 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:06.883 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.883 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:06.884 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.884 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.884 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.884 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:06.884 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:06.884 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:06.884 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.885 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.885 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:06.885 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.885 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:06.885 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:06.886 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:06.886 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:08:06.887 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.887 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:06.887 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.887 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:06.887 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:06.887 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:06.892 -05:00 [INF] Archivo cargado exitosamente
2024-12-03 12:08:06.892 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.7998ms.
2024-12-03 12:08:06.894 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:08:06.894 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:08:06.894 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:08:06.894 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:08:06.895 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:08:06.895 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:08:06.895 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 217.6116ms
2024-12-03 12:08:06.896 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:06.899 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:06.899 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:06.899 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:06.899 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 232.3249ms
2024-12-03 12:08:11.178 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:08:11.178 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:11.178 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:08:11.178 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:11.178 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:11.179 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:11.179 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:08:11.179 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.0946ms
2024-12-03 12:08:11.181 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:08:11.181 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:11.182 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:11.182 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:11.182 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:11.182 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:11.182 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:11.182 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:11.182 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:11.182 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:11.182 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:11.182 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:11.183 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:11.183 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:08:11.183 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:11.183 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:11.183 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:11.183 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:11.183 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:11.211 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:11.213 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:08:11.213 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:11.214 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:11.214 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:11.214 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:11.214 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:11.214 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:11.214 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:11.214 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:11.215 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:11.228 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:11.232 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:11.232 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:11.232 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-12-03 12:08:11.232 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:11.232 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:11.234 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:08:11.234 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.5478ms.
2024-12-03 12:08:11.234 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:08:11.234 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:08:11.234 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:08:11.235 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:08:11.235 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:08:11.235 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:08:11.235 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 52.0064ms
2024-12-03 12:08:11.235 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:11.235 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:11.235 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:11.235 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:11.235 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 54.3924ms
2024-12-03 12:08:24.394 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-12-03 12:08:24.395 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:24.395 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:08:24.395 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:24.395 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:24.395 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:24.395 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:08:24.395 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 1.26ms
2024-12-03 12:08:24.405 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundarymbphrfIgg1A9kyXZ 176453
2024-12-03 12:08:24.405 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:24.405 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:08:24.405 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:24.405 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:24.405 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:24.405 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:24.406 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:24.406 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:24.407 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:24.407 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:24.407 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:24.407 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:24.407 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-12-03 12:08:24.407 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:24.407 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:24.407 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:24.407 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:24.408 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:24.408 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000025": started reading request body.
2024-12-03 12:08:24.408 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000025": done reading request body.
2024-12-03 12:08:24.415 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:08:24.415 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-12-03 12:08:24.416 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:24.416 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:24.416 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:08:24.417 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:08:24.417 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:24.417 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:08:24.418 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:24.418 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:24.418 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:24.418 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:24.448 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:24.450 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-12-03 12:08:24.451 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:24.452 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:24.452 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:24.452 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.452 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.452 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:24.452 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.452 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.452 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:08:24.454 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:08:24.454 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.454 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:24.454 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.454 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:24.456 -05:00 [DBG] Creando archivo en la ruta: $Archivos\QR c virtual.docx...
2024-12-03 12:08:24.459 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Archivo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.459 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.459 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:24.459 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:24.459 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:24.459 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.460 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.460 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:24.460 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.460 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.460 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:08:24.461 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:08:24.462 -05:00 [DBG] The foreign key property 'Archivo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:08:24.462 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.462 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:24.462 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.462 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:24.462 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.462 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:24.462 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.462 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.462 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.462 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:24.463 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:24.463 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:24.463 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.463 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.463 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:24.463 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.463 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:24.463 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:24.465 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:24.465 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:08:24.465 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.465 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:24.465 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.465 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:24.465 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:24.465 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:24.467 -05:00 [INF] Archivo cargado exitosamente
2024-12-03 12:08:24.467 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.6452ms.
2024-12-03 12:08:24.467 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:08:24.467 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:08:24.467 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:08:24.467 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:08:24.468 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:08:24.468 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:08:24.468 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 60.6392ms
2024-12-03 12:08:24.468 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:08:24.469 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:24.469 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:24.469 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:24.469 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 64.2615ms
2024-12-03 12:08:25.735 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:08:25.735 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:25.735 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:08:25.735 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:25.735 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:25.735 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:25.735 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:08:25.736 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.3288ms
2024-12-03 12:08:25.741 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:08:25.741 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:25.742 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:25.742 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:25.742 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:25.742 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:25.742 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:25.743 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:25.743 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:25.743 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:25.743 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:25.744 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:25.744 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:25.744 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:08:25.744 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:25.744 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:25.744 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:25.744 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:25.744 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:25.798 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:25.802 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:08:25.803 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:25.803 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:25.803 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:25.804 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:25.804 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:25.804 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:25.804 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:25.804 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:25.804 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:25.810 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:25.810 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:25.811 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:25.811 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:25.811 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:08:25.811 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:25.811 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:25.814 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:08:25.814 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 15.5584ms.
2024-12-03 12:08:25.814 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:08:25.814 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:08:25.814 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:08:25.814 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:08:25.814 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:08:25.814 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:08:25.815 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 70.4472ms
2024-12-03 12:08:25.815 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:25.815 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:25.815 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:25.815 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:25.816 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 74.7006ms
2024-12-03 12:08:29.924 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=26&idPerfil=31 - null null
2024-12-03 12:08:29.924 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:29.924 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:08:29.925 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:29.925 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:29.925 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:29.925 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:08:29.925 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=26&idPerfil=31 - 204 null null 1.1308ms
2024-12-03 12:08:29.927 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=26&idPerfil=31 - null null
2024-12-03 12:08:29.927 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:08:29.927 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:08:29.927 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:08:29.927 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:29.928 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:29.928 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:29.928 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:29.928 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:29.928 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:29.928 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:08:29.928 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:29.928 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:29.928 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:08:29.928 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:29.928 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:29.929 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:29.929 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:29.929 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:29.929 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:08:29.929 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-12-03 12:08:29.929 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:08:29.929 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:08:29.929 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-12-03 12:08:29.930 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-12-03 12:08:29.930 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:29.930 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:08:29.930 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:29.930 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:29.930 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:08:29.930 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:08:29.970 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:29.973 -05:00 [DBG] Descargando archivo...
2024-12-03 12:08:29.975 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:29.976 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:29.976 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:29.976 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.976 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.976 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:29.976 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.976 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.976 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:08:29.978 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-12-03 12:08:29.980 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.980 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.980 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:08:29.980 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.980 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:29.980 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.980 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.980 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.980 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:29.980 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:29.980 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:29.981 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.981 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.981 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:29.981 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.981 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.981 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:29.983 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:08:29.983 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:08:29.983 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.983 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:29.983 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.983 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:29.983 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.983 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:29.983 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.983 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:29.984 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:08:29.984 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:08:29.984 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.984 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.984 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:29.984 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.984 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:29.985 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:08:29.986 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:08:29.986 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.986 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:29.986 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:29.986 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:29.986 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:29.987 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:08:29.990 -05:00 [INF] Archivo descargado exitosamente
2024-12-03 12:08:29.991 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 20.3124ms.
2024-12-03 12:08:29.992 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-12-03 12:08:29.994 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-12-03 12:08:30.012 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 83.3333ms
2024-12-03 12:08:30.012 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-12-03 12:08:30.012 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:30.012 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.012 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:30.013 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=26&idPerfil=31 - 200 176198 application/octet-stream 86.0105ms
2024-12-03 12:08:30.016 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:08:30.017 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:30.017 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:08:30.017 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:30.017 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:08:30.017 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:08:30.017 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:08:30.017 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:08:30.017 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:08:30.017 -05:00 [DBG] Authorization was successful.
2024-12-03 12:08:30.018 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:30.018 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:08:30.018 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:08:30.018 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:08:30.018 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:08:30.018 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:08:30.018 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:08:30.018 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:30.018 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:08:30.204 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:08:30.396 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:08:30.398 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:08:30.398 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:08:30.398 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:08:30.398 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.399 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.399 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:08:30.400 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:30.400 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:08:30.400 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:30.442 -05:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:08:30.442 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:30.442 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:08:30.442 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.442 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:08:30.442 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.442 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:08:30.476 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:08:30.476 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 271.61ms.
2024-12-03 12:08:30.476 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:08:30.477 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:08:30.477 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:08:30.477 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:08:30.477 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:08:30.477 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:08:30.477 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 459.2434ms
2024-12-03 12:08:30.477 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:08:30.477 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:08:30.478 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:08:30.478 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:08:30.478 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 461.485ms
2024-12-03 12:09:50.601 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-12-03 12:09:50.601 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:09:50.614 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:09:50.621 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:09:50.621 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:09:50.621 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:09:50.621 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:09:50.621 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 20.7598ms
2024-12-03 12:09:50.624 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundary9Buh204OuyMVsh12 29621
2024-12-03 12:09:50.625 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-12-03 12:09:50.625 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-12-03 12:09:50.625 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:09:50.625 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:09:50.625 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:09:50.625 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:09:50.626 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:09:50.626 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:09:50.626 -05:00 [DBG] Authorization was successful.
2024-12-03 12:09:50.626 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:09:50.626 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:09:50.626 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:09:50.626 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-12-03 12:09:50.626 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:09:50.626 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:09:50.626 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:09:50.627 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:09:50.627 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:09:50.627 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000033": started reading request body.
2024-12-03 12:09:50.627 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000033": done reading request body.
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:09:50.628 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:09:50.628 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:09:50.658 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:09:50.660 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-12-03 12:09:50.661 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:09:50.661 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:09:50.662 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:09:50.662 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.662 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.662 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:09:50.662 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.662 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.662 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:09:50.666 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-12-03 12:09:50.666 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.666 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:09:50.666 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.666 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:09:50.668 -05:00 [DBG] Creando archivo en la ruta: $Archivos\parcial final.pdf...
2024-12-03 12:09:50.669 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Archivo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.670 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.670 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:09:50.670 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:09:50.670 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:09:50.671 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.671 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.671 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:09:50.671 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.671 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.671 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:09:50.675 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:09:50.675 -05:00 [DBG] The foreign key property 'Archivo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:09:50.675 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.675 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:09:50.675 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.675 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:09:50.675 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.675 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:09:50.676 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.676 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.676 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.676 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:09:50.676 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:09:50.676 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:09:50.676 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.676 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.676 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:09:50.676 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.676 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:50.676 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:09:50.680 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-12-03 12:09:50.680 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:09:50.681 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.681 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:09:50.681 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.681 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:09:50.681 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:50.681 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:09:50.683 -05:00 [INF] Archivo cargado exitosamente
2024-12-03 12:09:50.683 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.7848ms.
2024-12-03 12:09:50.683 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:09:50.683 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:09:50.683 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:09:50.683 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:09:50.683 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:09:50.683 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:09:50.684 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 57.1391ms
2024-12-03 12:09:50.684 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-12-03 12:09:50.684 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:09:50.684 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:50.685 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:09:50.685 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 60.286ms
2024-12-03 12:09:51.754 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:09:51.755 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:09:51.757 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:09:51.757 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:09:51.757 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:09:51.757 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:09:51.757 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:09:51.758 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 6.8582ms
2024-12-03 12:09:51.777 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-12-03 12:09:51.778 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:09:51.778 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-12-03 12:09:51.778 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:09:51.778 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:09:51.778 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:09:51.778 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:09:51.778 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:09:51.779 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:09:51.779 -05:00 [DBG] Authorization was successful.
2024-12-03 12:09:51.779 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:09:51.779 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:09:51.779 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:09:51.779 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:09:51.779 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:09:51.779 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:09:51.779 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:09:51.780 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:09:51.780 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:09:51.825 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:09:51.827 -05:00 [DBG] Consultando archivos sin eliminar...
2024-12-03 12:09:51.828 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:09:51.828 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:09:51.828 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:09:51.828 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:51.828 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:51.828 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:09:51.829 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:51.829 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:09:51.829 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:09:51.838 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-12-03 12:09:51.839 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:51.840 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:51.840 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:09:51.840 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:51.840 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:09:51.840 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:51.840 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:09:51.843 -05:00 [INF] Consulta de archivos exitosa
2024-12-03 12:09:51.843 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.959ms.
2024-12-03 12:09:51.843 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:09:51.843 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:09:51.843 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:09:51.843 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:09:51.843 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:09:51.843 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:09:51.843 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 63.8745ms
2024-12-03 12:09:51.844 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-12-03 12:09:51.844 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:09:51.844 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:09:51.844 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:09:51.844 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 66.6751ms
2024-12-03 12:10:00.427 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-12-03 12:10:00.428 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-12-03 12:10:00.428 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:10:00.428 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:00.428 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:00.428 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:00.428 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:10:00.428 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 204 null null 1.1307ms
2024-12-03 12:10:00.432 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-12-03 12:10:00.432 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-12-03 12:10:00.432 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentosZip' is valid for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-12-03 12:10:00.432 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-12-03 12:10:00.432 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:00.432 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:00.432 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:00.433 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:10:00.433 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:10:00.433 -05:00 [DBG] Authorization was successful.
2024-12-03 12:10:00.434 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-12-03 12:10:00.443 -05:00 [INF] Route matched with {action = "ConsultarTodosZip", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodosZip() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-12-03 12:10:00.443 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:10:00.443 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:10:00.443 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:10:00.443 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:10:00.443 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:10:00.443 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:10:00.444 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-12-03 12:10:00.475 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:10:00.480 -05:00 [DBG] Consultando archivos en una lista...
2024-12-03 12:10:00.481 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:10:00.481 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)'
2024-12-03 12:10:00.488 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:10:00.488 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:10:00.488 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:10:00.488 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:00.488 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:00.488 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:00.488 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:00.489 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:00.489 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-12-03 12:10:00.492 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-12-03 12:10:00.492 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:00.492 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:00.493 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:00.493 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:00.493 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:00.493 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:00.493 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:00.522 -05:00 [DBG] Comprimiendo archivos en un archivo .zip...
2024-12-03 12:10:00.691 -05:00 [INF] Archivos comprimidos exitosamente
2024-12-03 12:10:00.694 -05:00 [INF] Consulta de archivos comprimidos exitosa
2024-12-03 12:10:00.694 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 218.4741ms.
2024-12-03 12:10:00.694 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-12-03 12:10:00.694 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-12-03 12:10:00.767 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) in 323.8881ms
2024-12-03 12:10:00.767 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-12-03 12:10:00.768 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:10:00.768 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:00.768 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:10:00.768 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 200 1456160 application/zip 336.777ms
2024-12-03 12:10:50.604 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:10:50.606 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:10:50.606 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:10:50.607 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:50.607 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:50.607 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:50.607 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:10:50.607 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 13.3812ms
2024-12-03 12:10:50.618 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:10:50.618 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:10:50.620 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:10:50.620 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:50.620 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:50.621 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:50.621 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:50.622 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:10:50.622 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:10:50.622 -05:00 [DBG] Authorization was successful.
2024-12-03 12:10:50.623 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:50.624 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:10:50.624 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:10:50.624 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:10:50.624 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:10:50.624 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:10:50.624 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:10:50.625 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:10:50.625 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:10:50.625 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:10:50.625 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:10:50.625 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:50.625 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:50.626 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:10:50.626 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:50.711 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:10:50.715 -05:00 [DBG] Consultando libros...
2024-12-03 12:10:50.719 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:10:50.726 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-12-03 12:10:50.777 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:10:50.784 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:10:50.784 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:10:50.785 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:50.787 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:50.787 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:50.787 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:50.787 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:50.788 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:10:50.795 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:10:50.797 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:50.798 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:10:50.798 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:50.801 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (2ms).
2024-12-03 12:10:50.803 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:10:50.803 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.9854ms.
2024-12-03 12:10:50.804 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:10:50.804 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:10:50.804 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:10:50.804 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:10:50.804 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:10:50.804 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:10:50.809 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 184.0154ms
2024-12-03 12:10:50.809 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:50.809 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:10:50.809 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:50.809 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:10:50.809 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 191.697ms
2024-12-03 12:10:56.253 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-12-03 12:10:56.253 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:10:56.253 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:10:56.253 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:56.253 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:56.253 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:56.253 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:10:56.254 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 1.1207ms
2024-12-03 12:10:56.256 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 404
2024-12-03 12:10:56.256 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:10:56.256 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-12-03 12:10:56.256 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-12-03 12:10:56.256 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:56.256 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:56.256 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:56.256 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:10:56.256 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:10:56.256 -05:00 [DBG] Authorization was successful.
2024-12-03 12:10:56.256 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-12-03 12:10:56.262 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-12-03 12:10:56.262 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:10:56.262 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:10:56.262 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:10:56.262 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:10:56.262 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:10:56.262 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:10:56.264 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:10:56.264 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-12-03 12:10:56.265 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-12-03 12:10:56.267 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:10:56.271 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000043": started reading request body.
2024-12-03 12:10:56.271 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000043": done reading request body.
2024-12-03 12:10:56.279 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-12-03 12:10:56.279 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-12-03 12:10:56.279 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-12-03 12:10:56.279 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-12-03 12:10:56.287 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-12-03 12:10:56.318 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:10:56.324 -05:00 [DBG] Guardando préstamo...
2024-12-03 12:10:56.329 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-12-03 12:10:56.331 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:10:56.337 -05:00 [INF] Libros encontrados exitosamente
2024-12-03 12:10:56.340 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .Join(
        inner: DbSet<Prestamo>(), 
        outerKeySelector: P => P.Id, 
        innerKeySelector: PR => PR.IdPerfil, 
        resultSelector: (P, PR) => new { 
            P = P, 
            PR = PR
         })
    .Join(
        inner: DbSet<DetallePrestamoLibro>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.PR.Id, 
        innerKeySelector: DP => DP.IdPrestamo, 
        resultSelector: (<>h__TransparentIdentifier0, DP) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            DP = DP
         })
    .Join(
        inner: DbSet<Libro>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.DP.IdLibro, 
        innerKeySelector: L => L.Id, 
        resultSelector: (<>h__TransparentIdentifier1, L) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            L = L
         })
    .Where(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.P.Id == __idPerfil_0)
    .Select(<>h__TransparentIdentifier2 => new Libro{ 
        Id = <>h__TransparentIdentifier2.L.Id, 
        Titulo = <>h__TransparentIdentifier2.L.Titulo, 
        Autor = <>h__TransparentIdentifier2.L.Autor, 
        IdGenero = <>h__TransparentIdentifier2.L.IdGenero, 
        Anio = <>h__TransparentIdentifier2.L.Anio, 
        Activo = <>h__TransparentIdentifier2.L.Activo 
    }
    )'
2024-12-03 12:10:56.349 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Libro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            Titulo -> 1
            Autor -> 2
            IdGenero -> 3
            Anio -> 4
            Activo -> 5
        SELECT l.Id, l.Titulo, l.Autor, l.IdGenero, l.Anio, l.Activo
        FROM Perfil AS p
        INNER JOIN Prestamo AS p0 ON p.Id == p0.IdPerfil
        INNER JOIN DetallePrestamoLibro AS d ON p0.Id == d.IdPrestamo
        INNER JOIN Libro AS l ON d.IdLibro == l.Id
        WHERE p.Id == @__idPerfil_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:10:56.350 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:10:56.350 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:10:56.350 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.350 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.350 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.350 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.351 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.351 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:10:56.359 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:10:56.359 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.359 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:56.359 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.359 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.361 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Prestamo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.374 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.374 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.374 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.375 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.376 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.376 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.376 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.376 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.376 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.376 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.380 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.380 -05:00 [DBG] The foreign key property 'Prestamo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:10:56.381 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.381 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:10:56.381 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.381 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.383 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.383 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.384 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.390 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.391 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.392 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.392 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.392 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.393 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.393 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.393 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.393 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.393 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.393 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.397 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.398 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:10:56.399 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.399 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:10:56.399 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.399 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.400 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.400 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.415 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.416 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.417 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.417 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.418 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.424 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.424 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.425 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.425 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.425 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.425 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.431 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.433 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.434 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:10:56.434 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.434 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.434 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.435 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.435 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.435 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.435 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.435 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.435 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.437 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.437 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.437 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.437 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.438 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.438 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.438 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.440 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.442 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:10:56.456 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.456 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 14ms reading results.
2024-12-03 12:10:56.457 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.457 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.457 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.457 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.457 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.457 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.457 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.457 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.457 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.458 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.458 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.458 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.458 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.458 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.458 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.459 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.459 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.459 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:56.459 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.459 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.460 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.460 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.460 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.460 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.460 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.460 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.460 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.460 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.460 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.460 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.460 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.461 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.461 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.461 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.462 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-12-03 12:10:56.462 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:10:56.462 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.462 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:56.462 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.462 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.462 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.462 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.463 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.463 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.463 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.463 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:10:56.463 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:10:56.463 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.463 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.463 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.463 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.463 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.463 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.464 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:10:56.464 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.465 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:56.465 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.465 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.465 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:10:56.465 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:10:56.467 -05:00 [INF] Préstamo realizado exitosamente
2024-12-03 12:10:56.468 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 149.6895ms.
2024-12-03 12:10:56.468 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:10:56.468 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:10:56.468 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:10:56.468 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:10:56.468 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:10:56.468 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:10:56.469 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 206.8419ms
2024-12-03 12:10:56.469 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-12-03 12:10:56.469 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:10:56.469 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.469 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:10:56.470 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 200 null application/json; charset=utf-8 214.3273ms
2024-12-03 12:10:56.476 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:10:56.476 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:10:56.476 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:10:56.476 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:56.476 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:56.476 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:56.476 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:10:56.476 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 1.1371ms
2024-12-03 12:10:56.479 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:10:56.479 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:10:56.479 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:10:56.479 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:56.479 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:56.479 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:56.479 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:56.480 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:10:56.480 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:10:56.480 -05:00 [DBG] Authorization was successful.
2024-12-03 12:10:56.480 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:56.480 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:10:56.480 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:10:56.480 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:10:56.480 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:10:56.480 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:10:56.480 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:10:56.480 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:10:56.481 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:10:56.481 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:10:56.481 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:10:56.482 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:56.482 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:56.482 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:10:56.482 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:10:56.513 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:10:56.516 -05:00 [DBG] Consultando libros...
2024-12-03 12:10:56.517 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:10:56.520 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:10:56.520 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:10:56.520 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.521 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.521 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:56.521 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.521 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:56.521 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:10:56.521 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:10:56.522 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.522 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:56.522 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.522 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:56.524 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:10:56.524 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.0576ms.
2024-12-03 12:10:56.524 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:10:56.524 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:10:56.524 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:10:56.524 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:10:56.524 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:10:56.524 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:10:56.525 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 44.1533ms
2024-12-03 12:10:56.525 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:10:56.525 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:10:56.525 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:56.525 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:10:56.525 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 46.6707ms
2024-12-03 12:10:59.291 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-12-03 12:10:59.291 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:10:59.291 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:10:59.291 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:59.291 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:59.291 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:59.291 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:10:59.291 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.6386ms
2024-12-03 12:10:59.294 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-12-03 12:10:59.294 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:10:59.294 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-12-03 12:10:59.294 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:10:59.295 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:10:59.295 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:10:59.295 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:10:59.295 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:10:59.296 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:10:59.296 -05:00 [DBG] Authorization was successful.
2024-12-03 12:10:59.296 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:10:59.301 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-12-03 12:10:59.301 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:10:59.301 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:10:59.301 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:10:59.301 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:10:59.301 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:10:59.302 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:10:59.302 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:10:59.302 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:10:59.302 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:10:59.302 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:10:59.302 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:10:59.302 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:10:59.303 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:10:59.331 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:10:59.335 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-12-03 12:10:59.336 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:10:59.338 -05:00 [INF] Libros encontrados exitosamente
2024-12-03 12:10:59.339 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:10:59.340 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:10:59.340 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:59.340 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:59.340 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:10:59.340 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:59.340 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:10:59.340 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:10:59.341 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:10:59.341 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:59.341 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:10:59.341 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:59.341 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:10:59.341 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.844ms.
2024-12-03 12:10:59.341 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:10:59.341 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:10:59.341 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:10:59.341 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:10:59.341 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:10:59.341 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:10:59.344 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 42.3589ms
2024-12-03 12:10:59.344 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:10:59.344 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:10:59.344 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:10:59.344 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:10:59.344 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 50.4683ms
2024-12-03 12:11:00.307 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-12-03 12:11:00.307 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:11:00.307 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:00.307 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:00.307 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:00.307 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:00.307 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:00.307 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 0.9514ms
2024-12-03 12:11:00.310 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-12-03 12:11:00.310 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:11:00.310 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-12-03 12:11:00.310 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-12-03 12:11:00.310 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:00.310 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:00.310 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:00.311 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:00.311 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:00.311 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:00.311 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-12-03 12:11:00.317 -05:00 [INF] Route matched with {action = "EliminarPrestamo", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarPrestamo(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-12-03 12:11:00.317 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:00.317 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:00.317 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:00.317 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:00.317 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:00.318 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:11:00.318 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:11:00.318 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:11:00.318 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:11:00.318 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.318 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.319 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:11:00.319 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.352 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:00.358 -05:00 [DBG] Eliminando préstamo del perfil con id 31
2024-12-03 12:11:00.362 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-12-03 12:11:00.363 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:00.366 -05:00 [INF] Libros encontrados exitosamente
2024-12-03 12:11:00.367 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:00.367 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:00.368 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.368 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.368 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.368 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.368 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.368 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:11:00.369 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:11:00.369 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.369 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.369 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.369 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.370 -05:00 [DBG] Compiling query expression: 
'DbSet<Prestamo>()
    .FirstOrDefault(p => p.IdPerfil == __idPerfil_0)'
2024-12-03 12:11:00.373 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Prestamo>(
    asyncEnumerable: new SingleQueryingEnumerable<Prestamo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Prestamo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Prestamo.FechaPrestamo (DateTime) Required, 1], [Property: Prestamo.IdPerfil (int) Required FK Index, 2] }
            SELECT TOP(1) p.Id, p.FechaPrestamo, p.IdPerfil
            FROM Prestamo AS p
            WHERE p.IdPerfil == @__idPerfil_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Prestamo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-03 12:11:00.374 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.374 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.375 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.375 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.375 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.375 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-12-03 12:11:00.378 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
WHERE [p].[IdPerfil] = @__idPerfil_0
2024-12-03 12:11:00.379 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.379 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.379 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.380 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.380 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.381 -05:00 [DBG] Compiling query expression: 
'DbSet<DetallePrestamoLibro>()
    .Where(d => d.IdPrestamo == __prestamo_Id_0)'
2024-12-03 12:11:00.385 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<DetallePrestamoLibro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: DetallePrestamoLibro.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: DetallePrestamoLibro.IdLibro (int) Required FK Index, 1], [Property: DetallePrestamoLibro.IdPrestamo (int) Required FK Index, 2] }
        SELECT d.Id, d.IdLibro, d.IdPrestamo
        FROM DetallePrestamoLibro AS d
        WHERE d.IdPrestamo == @__prestamo_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, DetallePrestamoLibro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:11:00.385 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.386 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.386 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.386 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.386 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.386 -05:00 [DBG] Executing DbCommand [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-12-03 12:11:00.388 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__prestamo_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[IdLibro], [d].[IdPrestamo]
FROM [DetallePrestamoLibro] AS [d]
WHERE [d].[IdPrestamo] = @__prestamo_Id_0
2024-12-03 12:11:00.390 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.390 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.390 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.391 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.391 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:11:00.391 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.391 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.392 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.393 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.393 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.393 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.393 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.393 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:00.401 -05:00 [DBG] Executing 3 update commands as a batch.
2024-12-03 12:11:00.403 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.403 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.404 -05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-12-03 12:11:00.410 -05:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2024-12-03 12:11:00.411 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.411 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.412 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.412 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p2;
2024-12-03 12:11:00.417 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [DetallePrestamoLibro]
OUTPUT 1
WHERE [Id] = @p2;
2024-12-03 12:11:00.417 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.418 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.422 -05:00 [DBG] Committing transaction.
2024-12-03 12:11:00.426 -05:00 [DBG] Committed transaction.
2024-12-03 12:11:00.428 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.428 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.429 -05:00 [DBG] Disposing transaction.
2024-12-03 12:11:00.435 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.435 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.435 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.435 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 3 entities written to the database.
2024-12-03 12:11:00.437 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.438 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.438 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.438 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:00.438 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.438 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.438 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.438 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.438 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.438 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-12-03 12:11:00.447 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Prestamo]
OUTPUT 1
WHERE [Id] = @p0;
2024-12-03 12:11:00.447 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.447 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.447 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.447 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.448 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.448 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:00.448 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.448 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.448 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.448 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:00.449 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.449 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.449 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.449 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.449 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.449 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.451 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.451 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.451 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.451 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.451 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.451 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.451 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:00.451 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.451 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.452 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.452 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:00.452 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.452 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.452 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.452 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.452 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.452 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.453 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.453 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.453 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.453 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.453 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.453 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.453 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:00.454 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.454 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.454 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:00.454 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:00.454 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.454 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.454 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.454 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.454 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.454 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.455 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:00.455 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.455 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.455 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.455 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.456 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:00.456 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:00.458 -05:00 [INF] Se eliminó el préstamo del perfil con id 31
2024-12-03 12:11:00.458 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 105.4924ms.
2024-12-03 12:11:00.458 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:00.458 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:00.458 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:00.458 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:00.458 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:00.458 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:11:00.458 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend) in 140.7555ms
2024-12-03 12:11:00.458 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.EliminarPrestamo (biblioteca-backend)'
2024-12-03 12:11:00.459 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:00.459 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.459 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:00.459 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 149.599ms
2024-12-03 12:11:00.463 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-12-03 12:11:00.463 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-12-03 12:11:00.463 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-12-03 12:11:00.463 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:11:00.463 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:00.463 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:00.464 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:00.464 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:00.464 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:00.464 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:00.464 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:11:00.464 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-12-03 12:11:00.464 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:00.464 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:00.464 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:00.464 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:00.464 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:00.465 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:11:00.465 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-12-03 12:11:00.465 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:11:00.465 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-12-03 12:11:00.465 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.466 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.466 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-12-03 12:11:00.466 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-12-03 12:11:00.495 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:00.498 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-12-03 12:11:00.500 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:00.502 -05:00 [INF] Libros encontrados exitosamente
2024-12-03 12:11:00.503 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:00.503 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:00.503 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.503 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.503 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:00.503 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.503 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:00.503 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:11:00.504 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-12-03 12:11:00.504 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.504 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:00.504 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.504 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:00.504 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.5768ms.
2024-12-03 12:11:00.504 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:00.504 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:00.504 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:00.504 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:00.504 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:00.504 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:11:00.505 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 40.0137ms
2024-12-03 12:11:00.505 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-12-03 12:11:00.505 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:00.505 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:00.505 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:00.505 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 42.3969ms
2024-12-03 12:11:03.387 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:03.387 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:03.387 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:03.387 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:03.387 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:03.388 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-12-03 12:11:03.388 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:11:03.388 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:03.388 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:03.388 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:03.388 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:03.388 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:03.388 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.5412ms
2024-12-03 12:11:03.387 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:03.388 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:03.388 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.7834ms
2024-12-03 12:11:03.395 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-12-03 12:11:03.395 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:03.395 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:11:03.395 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:03.396 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:03.396 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.396 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:03.397 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:03.397 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:03.397 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-12-03 12:11:03.397 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.397 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:03.397 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:03.397 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:03.397 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:03.397 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:03.398 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:03.398 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.398 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:03.398 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:03.398 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:03.398 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:03.398 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:03.399 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:03.399 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:03.399 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:03.399 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.399 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:03.399 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:03.399 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:03.399 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:03.399 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:11:03.399 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:03.400 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:03.400 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:03.400 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:03.458 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-12-03 12:11:03.459 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:03.459 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:03.459 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:03.459 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:03.460 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:03.460 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:03.460 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:11:03.461 -05:00 [DBG] Consultando libros...
2024-12-03 12:11:03.461 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:11:03.463 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:03.499 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:03.500 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-12-03 12:11:03.502 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:03.503 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-12-03 12:11:03.504 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:11:03.504 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:03.504 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:03.504 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.504 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.505 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:03.505 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:03.505 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:03.505 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:03.507 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:11:03.508 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:03.508 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:03.508 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.509 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:03.509 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.509 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:03.509 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.510 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:03.522 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:11:03.522 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.1449ms.
2024-12-03 12:11:03.523 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:03.523 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:03.523 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:03.523 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:03.523 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:03.523 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:03.526 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.527 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 127.9453ms
2024-12-03 12:11:03.527 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:03.527 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.528 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:03.528 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:03.528 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-12-03 12:11:03.529 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.529 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:11:03.529 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:03.529 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 134.0582ms
2024-12-03 12:11:03.532 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:11:03.549 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.556 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:03.557 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.557 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 24ms reading results.
2024-12-03 12:11:03.557 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.557 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:03.558 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.675ms.
2024-12-03 12:11:03.558 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:03.558 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:03.558 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:03.558 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:03.558 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:03.559 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:03.561 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 101.0881ms
2024-12-03 12:11:03.561 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:11:03.561 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:03.561 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:03.561 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:03.561 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 166.3246ms
2024-12-03 12:11:19.502 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/ - null null
2024-12-03 12:11:19.502 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:19.502 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:19.502 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:19.503 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:19.503 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:19.503 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:19.503 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/ - 204 null null 1.1241ms
2024-12-03 12:11:19.510 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Libros/ - application/json 118
2024-12-03 12:11:19.510 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:19.510 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:19.510 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend)'
2024-12-03 12:11:19.510 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:19.511 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:19.511 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:19.511 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:19.511 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:19.511 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:19.511 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend)'
2024-12-03 12:11:19.527 -05:00 [INF] Route matched with {action = "Post", controller = "Libros"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.Libro) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:19.527 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:19.527 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:19.527 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:19.527 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:19.527 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:19.527 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:19.527 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:19.528 -05:00 [DBG] Attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro' ...
2024-12-03 12:11:19.528 -05:00 [DBG] Attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro' using the name '' in request data ...
2024-12-03 12:11:19.528 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:11:19.529 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:0000005D": started reading request body.
2024-12-03 12:11:19.529 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:0000005D": done reading request body.
2024-12-03 12:11:19.533 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.Libro'
2024-12-03 12:11:19.533 -05:00 [DBG] Done attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:19.534 -05:00 [DBG] Done attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:19.535 -05:00 [DBG] Attempting to validate the bound parameter 'libro' of type 'biblioteca_backend.Models.Libro' ...
2024-12-03 12:11:19.535 -05:00 [DBG] Done attempting to validate the bound parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:19.570 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:19.574 -05:00 [DBG] Guardando libro...
2024-12-03 12:11:19.575 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:19.576 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Libro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:19.577 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:19.577 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:19.577 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:19.577 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:19.577 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:19.577 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:19.577 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.577 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.577 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:19.577 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:19.577 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:19.578 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Libro] ([Activo], [Anio], [Autor], [IdGenero], [Titulo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:11:19.582 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Libro] ([Activo], [Anio], [Autor], [IdGenero], [Titulo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-12-03 12:11:19.583 -05:00 [DBG] The foreign key property 'Libro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:11:19.583 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.583 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:11:19.583 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.583 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:19.584 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:19.584 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:19.586 -05:00 [INF] Libro guardado exitosamente
2024-12-03 12:11:19.587 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.6319ms.
2024-12-03 12:11:19.587 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:19.587 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:19.587 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:19.587 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:19.587 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:19.587 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:11:19.587 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend) in 60.197ms
2024-12-03 12:11:19.587 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Post (biblioteca-backend)'
2024-12-03 12:11:19.587 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:19.588 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.588 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:19.588 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Libros/ - 200 null application/json; charset=utf-8 77.7647ms
2024-12-03 12:11:19.593 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:19.593 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:19.593 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:19.593 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:19.593 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:19.593 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:19.593 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:19.593 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 0.9803ms
2024-12-03 12:11:19.596 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:19.596 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:19.596 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:19.596 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:19.596 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:19.596 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:19.596 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:19.596 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:19.596 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:19.596 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:19.596 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:19.596 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:19.596 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:19.596 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:19.596 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:19.596 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:19.596 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:19.597 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:19.597 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:19.597 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:19.597 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:11:19.597 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:19.597 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:19.597 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:19.597 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:19.634 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:19.642 -05:00 [DBG] Consultando libros...
2024-12-03 12:11:19.642 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:19.643 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:19.643 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:19.643 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.643 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.643 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:19.644 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:19.644 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:19.644 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:19.645 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:19.645 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.645 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:19.645 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.645 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:19.653 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:11:19.653 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.0018ms.
2024-12-03 12:11:19.653 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:19.653 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:19.653 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:19.653 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:19.653 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:19.654 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:19.654 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 57.2604ms
2024-12-03 12:11:19.654 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:19.654 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:19.654 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:19.654 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:19.654 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 59.2035ms
2024-12-03 12:11:27.188 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/ - null null
2024-12-03 12:11:27.188 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:27.188 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:27.189 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:27.189 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:27.189 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:27.189 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:27.189 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/ - 204 null null 1.1277ms
2024-12-03 12:11:27.192 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7299/api/Libros/ - application/json 111
2024-12-03 12:11:27.192 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:27.192 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:27.192 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend)'
2024-12-03 12:11:27.192 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:27.192 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:27.192 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:27.193 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:27.193 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:27.193 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:27.193 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend)'
2024-12-03 12:11:27.196 -05:00 [INF] Route matched with {action = "Put", controller = "Libros"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(biblioteca_backend.Models.Libro) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:27.196 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:27.196 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:27.196 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:27.196 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:27.197 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:27.197 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:27.197 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:27.199 -05:00 [DBG] Attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro' ...
2024-12-03 12:11:27.199 -05:00 [DBG] Attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro' using the name '' in request data ...
2024-12-03 12:11:27.199 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:11:27.199 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000065": started reading request body.
2024-12-03 12:11:27.200 -05:00 [DBG] Connection id "0HN8JNJF4RTF9", Request id "0HN8JNJF4RTF9:00000065": done reading request body.
2024-12-03 12:11:27.200 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.Libro'
2024-12-03 12:11:27.201 -05:00 [DBG] Done attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:27.201 -05:00 [DBG] Done attempting to bind parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:27.201 -05:00 [DBG] Attempting to validate the bound parameter 'libro' of type 'biblioteca_backend.Models.Libro' ...
2024-12-03 12:11:27.201 -05:00 [DBG] Done attempting to validate the bound parameter 'libro' of type 'biblioteca_backend.Models.Libro'.
2024-12-03 12:11:27.227 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:27.236 -05:00 [DBG] Actualizando libro con id 88...
2024-12-03 12:11:27.236 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:27.237 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .FirstOrDefault(e => e.Id == __libro_Id_0)'
2024-12-03 12:11:27.240 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Libro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Libro.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Libro.Activo (bool) Required, 1], [Property: Libro.Anio (int) Required, 2], [Property: Libro.Autor (string) Required, 3], [Property: Libro.IdGenero (int) Required FK Index, 4], [Property: Libro.Titulo (string) Required, 5] }
        SELECT TOP(1) l.Id, l.Activo, l.Anio, l.Autor, l.IdGenero, l.Titulo
        FROM Libro AS l
        WHERE l.Id == @__libro_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-12-03 12:11:27.240 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:27.241 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:27.241 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.241 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.241 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:27.241 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.241 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.241 -05:00 [DBG] Executing DbCommand [Parameters=[@__libro_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Activo], [l].[Anio], [l].[Autor], [l].[IdGenero], [l].[Titulo]
FROM [Libro] AS [l]
WHERE [l].[Id] = @__libro_Id_0
2024-12-03 12:11:27.242 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__libro_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Activo], [l].[Anio], [l].[Autor], [l].[IdGenero], [l].[Titulo]
FROM [Libro] AS [l]
WHERE [l].[Id] = @__libro_Id_0
2024-12-03 12:11:27.243 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:27.243 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.243 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:27.243 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.243 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:27.243 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:27.243 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:27.243 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:27.243 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:27.243 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.243 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.243 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:27.244 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.244 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.244 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:27.246 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-12-03 12:11:27.251 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.251 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-12-03 12:11:27.251 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.251 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:27.251 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:27.252 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:27.254 -05:00 [INF] Libro actualizado con id 88
2024-12-03 12:11:27.254 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.7684ms.
2024-12-03 12:11:27.254 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:27.254 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:27.254 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:27.254 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:27.255 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:27.255 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:11:27.255 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend) in 58.2176ms
2024-12-03 12:11:27.255 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Put (biblioteca-backend)'
2024-12-03 12:11:27.255 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:27.255 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.255 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:27.255 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7299/api/Libros/ - 200 null application/json; charset=utf-8 63.5582ms
2024-12-03 12:11:27.259 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:27.259 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:27.259 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:27.260 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:27.260 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:27.260 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:27.260 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:27.260 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.0468ms
2024-12-03 12:11:27.262 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:27.262 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:27.262 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:27.262 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:27.262 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:27.262 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:27.263 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:27.263 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:27.263 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:27.263 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:27.263 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:27.263 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:27.263 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:27.263 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:27.263 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:27.263 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:27.263 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:27.263 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:27.263 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:27.263 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:27.263 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:11:27.266 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:27.266 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:27.266 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:27.266 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:27.312 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:27.317 -05:00 [DBG] Consultando libros...
2024-12-03 12:11:27.318 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:27.319 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:27.319 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:27.319 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.319 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.319 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:27.319 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.319 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:27.319 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:27.320 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:27.320 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.320 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:27.320 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.320 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:27.322 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:11:27.322 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.6792ms.
2024-12-03 12:11:27.323 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:27.323 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:27.323 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:27.323 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:27.323 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:27.323 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:27.323 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 59.7807ms
2024-12-03 12:11:27.323 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:27.323 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:27.323 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:27.323 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:27.323 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 61.621ms
2024-12-03 12:11:28.875 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/88 - null null
2024-12-03 12:11:28.875 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/88'
2024-12-03 12:11:28.875 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:28.875 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:28.875 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:28.875 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:28.875 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:28.875 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/88 - 204 null null 0.9214ms
2024-12-03 12:11:28.877 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Libros/88 - null null
2024-12-03 12:11:28.877 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/88'
2024-12-03 12:11:28.877 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend)' with route pattern 'api/Libros/{id}' is valid for the request path '/api/Libros/88'
2024-12-03 12:11:28.877 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend)'
2024-12-03 12:11:28.877 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:28.877 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:28.877 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:28.878 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:28.878 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:28.878 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:28.878 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend)'
2024-12-03 12:11:28.882 -05:00 [INF] Route matched with {action = "Delete", controller = "Libros"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:28.882 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:28.882 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:28.882 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:28.882 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:28.882 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:28.882 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:28.882 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:28.883 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-12-03 12:11:28.883 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-12-03 12:11:28.883 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:11:28.883 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:11:28.883 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-12-03 12:11:28.883 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-12-03 12:11:28.907 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:28.911 -05:00 [DBG] Eliminando libro con id 88...
2024-12-03 12:11:28.912 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:28.919 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-12-03 12:11:28.938 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Libro>(
    asyncEnumerable: new SingleQueryingEnumerable<Libro>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Libro.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Libro.Activo (bool) Required, 1], [Property: Libro.Anio (int) Required, 2], [Property: Libro.Autor (string) Required, 3], [Property: Libro.IdGenero (int) Required FK Index, 4], [Property: Libro.Titulo (string) Required, 5] }
            SELECT TOP(1) l.Id, l.Activo, l.Anio, l.Autor, l.IdGenero, l.Titulo
            FROM Libro AS l
            WHERE l.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-12-03 12:11:28.939 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:28.939 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:28.939 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.939 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.939 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:28.939 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.939 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.939 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Activo], [l].[Anio], [l].[Autor], [l].[IdGenero], [l].[Titulo]
FROM [Libro] AS [l]
WHERE [l].[Id] = @__p_0
2024-12-03 12:11:28.943 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Activo], [l].[Anio], [l].[Autor], [l].[IdGenero], [l].[Titulo]
FROM [Libro] AS [l]
WHERE [l].[Id] = @__p_0
2024-12-03 12:11:28.944 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:28.944 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.944 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:28.944 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.944 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:28.945 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:28.945 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:28.945 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:11:28.945 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:11:28.945 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.945 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.945 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:28.945 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.945 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.945 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Libro]
OUTPUT 1
WHERE [Id] = @p0;
2024-12-03 12:11:28.949 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Libro]
OUTPUT 1
WHERE [Id] = @p0;
2024-12-03 12:11:28.949 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.949 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:28.949 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.949 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:28.949 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:11:28.950 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:11:28.952 -05:00 [INF] Libro eliminado con id 88
2024-12-03 12:11:28.953 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.4505ms.
2024-12-03 12:11:28.953 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:28.953 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:28.953 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:28.953 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:28.953 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:28.953 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:11:28.953 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend) in 70.7681ms
2024-12-03 12:11:28.953 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Delete (biblioteca-backend)'
2024-12-03 12:11:28.953 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:28.953 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.953 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:28.954 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Libros/88 - 200 null application/json; charset=utf-8 76.692ms
2024-12-03 12:11:28.957 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:11:28.958 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:28.958 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:28.958 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:28.958 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:28.958 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:28.958 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:28.958 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:28.958 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:28.958 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:28.958 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:28.958 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:28.958 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:28.958 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:28.958 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:28.958 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:28.958 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:28.958 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:28.959 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:28.959 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:28.959 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:11:28.959 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:28.959 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:28.959 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:28.959 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:28.991 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:28.993 -05:00 [DBG] Consultando libros...
2024-12-03 12:11:28.994 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:28.994 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:28.994 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:28.995 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.995 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.995 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:28.995 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.995 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:28.995 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:28.996 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:11:28.996 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.996 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:28.996 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:28.996 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:29.000 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:11:29.000 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.7558ms.
2024-12-03 12:11:29.000 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:29.000 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:29.000 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:29.000 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:29.000 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:29.000 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:29.000 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 41.7976ms
2024-12-03 12:11:29.000 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:29.000 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:29.000 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:29.001 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:29.001 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 43.6011ms
2024-12-03 12:11:43.662 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:11:43.662 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:43.662 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:11:43.662 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:43.662 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:43.662 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:43.662 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:11:43.662 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.9781ms
2024-12-03 12:11:43.671 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:11:43.671 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:11:43.671 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:11:43.671 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:43.671 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:11:43.671 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:11:43.671 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:11:43.671 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:11:43.672 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:11:43.672 -05:00 [DBG] Authorization was successful.
2024-12-03 12:11:43.672 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:43.672 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:11:43.672 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:11:43.673 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:11:43.673 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:11:43.673 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:11:43.673 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:11:43.673 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:43.673 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:11:43.673 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:43.673 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:11:43.673 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:43.673 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:43.673 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:11:43.673 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:11:43.706 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:11:43.708 -05:00 [DBG] Consultando libros...
2024-12-03 12:11:43.709 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:11:43.710 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:11:43.711 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:11:43.711 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:43.711 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:43.711 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:11:43.711 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:43.712 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:11:43.712 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:11:43.718 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:11:43.718 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:43.718 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:11:43.718 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:43.718 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:11:43.720 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:11:43.720 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.3334ms.
2024-12-03 12:11:43.721 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:11:43.721 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:11:43.721 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:11:43.721 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:11:43.721 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:11:43.721 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:11:43.721 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 48.4437ms
2024-12-03 12:11:43.721 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:11:43.721 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:11:43.721 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:11:43.722 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:11:43.722 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 51.1815ms
2024-12-03 12:25:33.415 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-12-03 12:25:33.623 -05:00 [DBG] Hosting starting
2024-12-03 12:25:33.684 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-03 12:25:33.696 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-11da36a6-1b5b-45d1-890d-4d2c5ff23e77.xml'.
2024-12-03 12:25:33.707 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-12-03 12:25:33.715 -05:00 [DBG] Found key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77}.
2024-12-03 12:25:33.720 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-12-03 12:25:33.733 -05:00 [DBG] Considering key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} with expiration date 2024-12-29 20:15:31Z as default key.
2024-12-03 12:25:33.738 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-03 12:25:33.742 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-12-03 12:25:33.744 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-12-03 12:25:33.749 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-12-03 12:25:33.751 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-12-03 12:25:33.753 -05:00 [DBG] Using key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} as the default key.
2024-12-03 12:25:33.754 -05:00 [DBG] Key ring with default key {11da36a6-1b5b-45d1-890d-4d2c5ff23e77} was loaded during application startup.
2024-12-03 12:25:34.146 -05:00 [INF] Now listening on: https://localhost:7299
2024-12-03 12:25:34.146 -05:00 [INF] Now listening on: http://localhost:5219
2024-12-03 12:25:34.146 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-12-03 12:25:34.146 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-12-03 12:25:34.146 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-12-03 12:25:34.147 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-03 12:25:34.147 -05:00 [INF] Hosting environment: Development
2024-12-03 12:25:34.147 -05:00 [INF] Content root path: C:\Users\spatino\Desktop\Proyeco - Biblioteca\biblioteca-backend
2024-12-03 12:25:34.147 -05:00 [DBG] Hosting started
2024-12-03 12:25:34.148 -05:00 [DBG] Connection id "0HN8JNTVARI3Q" accepted.
2024-12-03 12:25:34.150 -05:00 [DBG] Connection id "0HN8JNTVARI3Q" started.
2024-12-03 12:25:34.197 -05:00 [DBG] Connection id "0HN8JNTVARI3Q" received FIN.
2024-12-03 12:25:34.264 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-12-03 12:25:34.873 -05:00 [DBG] Connection id "0HN8JNTVARI3Q" stopped.
2024-12-03 12:25:34.879 -05:00 [DBG] Connection id "0HN8JNTVARI3Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-03 12:25:35.666 -05:00 [DBG] Connection id "0HN8JNTVARI3R" accepted.
2024-12-03 12:25:35.671 -05:00 [DBG] Connection id "0HN8JNTVARI3R" started.
2024-12-03 12:25:35.748 -05:00 [DBG] Connection 0HN8JNTVARI3R established using the following protocol: "Tls12"
2024-12-03 12:25:35.870 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-12-03 12:25:36.329 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-12-03 12:25:36.385 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-12-03 12:25:36.386 -05:00 [DBG] Request did not match any endpoints
2024-12-03 12:25:36.662 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-12-03 12:25:36.666 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-12-03 12:25:36.760 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-12-03 12:25:36.761 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-12-03 12:25:36.765 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 907.0952ms
2024-12-03 12:25:36.867 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-12-03 12:25:36.873 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-12-03 12:25:36.901 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 51.3264ms
2024-12-03 12:25:37.222 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 349.286ms
2024-12-03 12:25:37.295 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-12-03 12:25:37.295 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-12-03 12:25:37.295 -05:00 [DBG] Request did not match any endpoints
2024-12-03 12:25:37.547 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 252.7904ms
2024-12-03 12:26:03.233 -05:00 [DBG] Connection id "0HN8JNTVARI3S" accepted.
2024-12-03 12:26:03.233 -05:00 [DBG] Connection id "0HN8JNTVARI3S" started.
2024-12-03 12:26:03.243 -05:00 [DBG] Connection 0HN8JNTVARI3S established using the following protocol: "Tls12"
2024-12-03 12:26:03.247 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-12-03 12:26:03.265 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:26:03.266 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:26:03.266 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:26:03.267 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:26:03.267 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:26:03.271 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:03.271 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:03.274 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:03.274 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:03.275 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:03.275 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:03.278 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:26:03.278 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:26:03.280 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 32.6195ms
2024-12-03 12:26:03.280 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 13.7762ms
2024-12-03 12:26:03.284 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:26:03.284 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-12-03 12:26:03.285 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:26:03.285 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:26:03.289 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:26:03.289 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-12-03 12:26:03.290 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:26:03.291 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:03.291 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:26:03.291 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:03.292 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:03.292 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:03.292 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:03.292 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:03.466 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:26:03.466 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:26:03.469 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:26:03.470 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:26:03.483 -05:00 [DBG] Authorization was successful.
2024-12-03 12:26:03.483 -05:00 [DBG] Authorization was successful.
2024-12-03 12:26:03.484 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:26:03.484 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:26:03.512 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-12-03 12:26:03.514 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:26:03.515 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:26:03.515 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:26:03.516 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:26:03.517 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:26:03.517 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:26:03.519 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:26:03.519 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:26:03.731 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-03 12:26:03.731 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-12-03 12:26:03.768 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:26:03.768 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:26:03.885 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:26:03.887 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:26:03.889 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:26:03.892 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:26:03.893 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:26:03.893 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:26:03.895 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:26:03.954 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:26:03.980 -05:00 [DBG] Consultando libros...
2024-12-03 12:26:04.933 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:26:04.933 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:26:04.998 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-12-03 12:26:05.008 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-12-03 12:26:05.260 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:26:05.261 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:26:05.315 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:26:05.315 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:26:05.346 -05:00 [DBG] Created DbConnection. (27ms).
2024-12-03 12:26:05.346 -05:00 [DBG] Created DbConnection. (30ms).
2024-12-03 12:26:05.350 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.350 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.750 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.756 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.757 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:26:05.758 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:26:05.767 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-12-03 12:26:05.767 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-12-03 12:26:05.769 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-12-03 12:26:05.769 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2024-12-03 12:26:05.779 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:26:05.779 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:26:05.836 -05:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:26:05.836 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:26:05.850 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.862 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 15ms reading results.
2024-12-03 12:26:05.864 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.871 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (6ms).
2024-12-03 12:26:05.874 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:26:05.879 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1920.4881ms.
2024-12-03 12:26:05.883 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:26:05.884 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:26:05.885 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:26:05.885 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:26:05.887 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:26:05.887 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:26:05.891 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.918 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 2396.1023ms
2024-12-03 12:26:05.918 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:26:05.922 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.923 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.923 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:26:05.923 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.923 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.924 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.925 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.925 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:05.929 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.929 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.929 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 92ms reading results.
2024-12-03 12:26:05.930 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-12-03 12:26:05.931 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 2647.0072ms
2024-12-03 12:26:05.932 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.933 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:26:05.935 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2048.292ms.
2024-12-03 12:26:05.937 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:26:05.937 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:26:05.937 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:26:05.937 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:26:05.938 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:26:05.938 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:26:05.943 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 2425.8367ms
2024-12-03 12:26:05.944 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:26:05.945 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:26:05.945 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:05.945 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:26:05.945 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 2661.1076ms
2024-12-03 12:26:07.064 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:26:07.067 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:26:07.067 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:26:07.067 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:07.067 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:07.067 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:07.068 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:26:07.068 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 4.4101ms
2024-12-03 12:26:07.071 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:26:07.072 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:26:07.073 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:26:07.073 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:26:07.073 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:26:07.074 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:26:07.074 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:26:07.076 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:26:07.076 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:26:07.078 -05:00 [DBG] Authorization was successful.
2024-12-03 12:26:07.078 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:26:07.083 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:26:07.083 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:26:07.083 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:26:07.083 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:26:07.083 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:26:07.083 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:26:07.083 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:26:07.085 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:26:07.086 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-12-03 12:26:07.086 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-12-03 12:26:07.086 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:26:07.087 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:26:07.087 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-12-03 12:26:07.087 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-12-03 12:26:07.117 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:26:07.121 -05:00 [DBG] Consultando perfil con id 31
2024-12-03 12:26:07.187 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:26:07.195 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Id == __id_0)'
2024-12-03 12:26:07.213 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Id == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-12-03 12:26:07.217 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:26:07.218 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:26:07.218 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:07.219 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:07.219 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:26:07.219 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:26:07.227 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-12-03 12:26:07.234 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:26:07.270 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:26:07.277 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:26:07.290 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:07.291 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 20ms reading results.
2024-12-03 12:26:07.291 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:07.291 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:26:07.294 -05:00 [INF] Perfil encontrado con id: 31
2024-12-03 12:26:07.294 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 176.3676ms.
2024-12-03 12:26:07.294 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:26:07.294 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:26:07.294 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:26:07.295 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:26:07.295 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:26:07.295 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-12-03 12:26:07.297 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 213.6885ms
2024-12-03 12:26:07.297 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:26:07.297 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:26:07.297 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:26:07.297 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:26:07.297 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 226.695ms
2024-12-03 12:27:58.599 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - null null
2024-12-03 12:27:58.600 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-12-03 12:27:58.600 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:27:58.600 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:27:58.600 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:27:58.600 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:27:58.600 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:27:58.602 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - 204 null null 1.9057ms
2024-12-03 12:27:58.604 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - application/json 142
2024-12-03 12:27:58.604 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-12-03 12:27:58.604 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)' with route pattern 'api/Perfiles/Registrarse' is valid for the request path '/api/Perfiles/Registrarse'
2024-12-03 12:27:58.605 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-12-03 12:27:58.605 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:27:58.605 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:27:58.605 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:27:58.605 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:27:58.605 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-12-03 12:27:58.610 -05:00 [INF] Route matched with {action = "Registrarse", controller = "Perfiles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrarse(biblioteca_backend.Models.Perfil) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:27:58.610 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:27:58.610 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:27:58.610 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:27:58.610 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:27:58.610 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:27:58.610 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:27:58.611 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:27:58.611 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-12-03 12:27:58.612 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' using the name '' in request data ...
2024-12-03 12:27:58.623 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:27:58.631 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000000F": started reading request body.
2024-12-03 12:27:58.632 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000000F": done reading request body.
2024-12-03 12:27:58.640 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.Perfil'
2024-12-03 12:27:58.640 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-12-03 12:27:58.640 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-12-03 12:27:58.640 -05:00 [DBG] Attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-12-03 12:27:58.656 -05:00 [DBG] Done attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-12-03 12:27:58.682 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:27:58.687 -05:00 [DBG] Iniciando registro de perfil...
2024-12-03 12:27:58.688 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:27:58.689 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __perfil_Correo_0)'
2024-12-03 12:27:58.693 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Correo == @__perfil_Correo_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-12-03 12:27:58.694 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:27:58.694 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:27:58.694 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.694 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.694 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:27:58.694 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:27:58.695 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:27:58.695 -05:00 [DBG] Executing DbCommand [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-12-03 12:27:58.697 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-12-03 12:27:58.697 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.697 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:27:58.697 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.697 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:27:58.732 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Perfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:27:58.746 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:27:58.749 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:27:58.754 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-12-03 12:27:58.765 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-12-03 12:27:58.865 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.866 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.869 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:27:58.869 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:27:58.869 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:27:58.869 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Perfil] ([Apellido], [Contrasena], [Correo], [Direccion], [IdRol], [Nombre], [Telefono])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-12-03 12:27:58.876 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Perfil] ([Apellido], [Contrasena], [Correo], [Direccion], [IdRol], [Nombre], [Telefono])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-12-03 12:27:58.904 -05:00 [DBG] The foreign key property 'Perfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-12-03 12:27:58.910 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.910 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 25ms reading results.
2024-12-03 12:27:58.911 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:27:58.911 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:27:58.922 -05:00 [DBG] An entity of type 'Perfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:27:58.925 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-12-03 12:27:58.928 -05:00 [DBG] Enviando email al correo: menlockfull@gmail.com...
2024-12-03 12:28:00.064 -05:00 [INF] Email enviado a menlockfull@gmail.com exitosamente
2024-12-03 12:28:00.066 -05:00 [INF] Registro de perfil exitoso
2024-12-03 12:28:00.067 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1385.2983ms.
2024-12-03 12:28:00.067 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:28:00.067 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:28:00.067 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:28:00.067 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:28:00.068 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:28:00.068 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:28:00.070 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) in 1459.6697ms
2024-12-03 12:28:00.070 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-12-03 12:28:00.070 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:28:00.070 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:28:00.070 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:28:00.070 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - 200 null application/json; charset=utf-8 1466.5023ms
2024-12-03 12:29:17.170 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-12-03 12:29:17.170 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:29:17.170 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:29:17.170 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:29:17.171 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:29:17.171 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:29:17.171 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:29:17.171 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.3981ms
2024-12-03 12:29:17.175 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 59
2024-12-03 12:29:17.175 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:29:17.175 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:29:17.175 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:29:17.175 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:29:17.175 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:29:17.175 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:29:17.176 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:29:17.176 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:29:17.179 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:29:17.180 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:29:17.181 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:29:17.182 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:29:17.182 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:29:17.182 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:29:17.182 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:29:17.183 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:29:17.185 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:29:17.186 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-12-03 12:29:17.186 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:29:17.187 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:00000013": started reading request body.
2024-12-03 12:29:17.187 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:00000013": done reading request body.
2024-12-03 12:29:17.188 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-12-03 12:29:17.188 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:29:17.188 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:29:17.188 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:29:17.191 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:29:17.217 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:29:17.221 -05:00 [DBG] Iniciando sesión...
2024-12-03 12:29:17.222 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:29:17.222 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-12-03 12:29:17.226 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-12-03 12:29:17.229 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:29:17.229 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:29:17.229 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.229 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.229 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:29:17.229 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.229 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.229 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:29:17.233 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:29:17.233 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:29:17.233 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.233 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:29:17.233 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.233 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:29:17.234 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-12-03 12:29:17.237 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-12-03 12:29:17.238 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.238 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.238 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:29:17.238 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.238 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.238 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:29:17.241 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:29:17.249 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:29:17.258 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:29:17.260 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.260 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 19ms reading results.
2024-12-03 12:29:17.260 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.260 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:29:17.275 -05:00 [INF] Inicio de sesión exitoso
2024-12-03 12:29:17.276 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 58.9365ms.
2024-12-03 12:29:17.276 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:29:17.276 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:29:17.276 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:29:17.277 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:29:17.277 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:29:17.277 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:29:17.277 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 95.6394ms
2024-12-03 12:29:17.278 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:29:17.278 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:29:17.278 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.278 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:29:17.279 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 103.3609ms
2024-12-03 12:29:17.306 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:29:17.306 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:29:17.306 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:29:17.306 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:29:17.306 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:29:17.306 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:29:17.307 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:29:17.307 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 2.5739ms
2024-12-03 12:29:17.319 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-12-03 12:29:17.319 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:29:17.319 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:29:17.319 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:29:17.320 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:29:17.320 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:29:17.320 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:29:17.321 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:29:17.321 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:29:17.321 -05:00 [DBG] Authorization was successful.
2024-12-03 12:29:17.322 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:29:17.322 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:29:17.322 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:29:17.322 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:29:17.322 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:29:17.323 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:29:17.323 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:29:17.323 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:29:17.324 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:29:17.324 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:29:17.324 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:29:17.329 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:29:17.329 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:29:17.329 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:29:17.329 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:29:17.368 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:29:17.369 -05:00 [DBG] Consultando libros...
2024-12-03 12:29:17.370 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:29:17.371 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-12-03 12:29:17.376 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-12-03 12:29:17.377 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:29:17.377 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:29:17.377 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.377 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.377 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:29:17.377 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.377 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:29:17.377 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:29:17.382 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-12-03 12:29:17.382 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.382 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:29:17.382 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.382 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:29:17.384 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:29:17.384 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.211ms.
2024-12-03 12:29:17.384 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:29:17.384 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:29:17.384 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:29:17.384 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:29:17.384 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:29:17.384 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:29:17.385 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 61.6743ms
2024-12-03 12:29:17.385 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:29:17.385 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:29:17.385 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:29:17.385 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:29:17.385 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 66.4445ms
2024-12-03 12:35:25.667 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-12-03 12:35:25.667 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:35:25.667 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:35:25.667 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.667 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.667 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.667 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:35:25.668 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.429ms
2024-12-03 12:35:25.670 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-12-03 12:35:25.671 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:35:25.671 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:35:25.671 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:35:25.671 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.671 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.671 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.671 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:35:25.675 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:35:25.675 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:35:25.675 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:35:25.676 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:35:25.676 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:35:25.676 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:35:25.676 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:35:25.677 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:35:25.677 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:35:25.677 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:35:25.678 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-12-03 12:35:25.678 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:35:25.678 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000001B": started reading request body.
2024-12-03 12:35:25.678 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000001B": done reading request body.
2024-12-03 12:35:25.678 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-12-03 12:35:25.679 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:35:25.679 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:35:25.679 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:35:25.684 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:35:25.716 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:35:25.719 -05:00 [DBG] Iniciando sesión...
2024-12-03 12:35:25.720 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:35:25.723 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:35:25.723 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:35:25.723 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.724 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.724 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:35:25.724 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.724 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.724 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:35:25.725 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:35:25.725 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.725 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.725 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:35:25.725 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.725 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:35:25.726 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.726 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.726 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:35:25.726 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.726 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.726 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:35:25.727 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:35:25.727 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.727 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.727 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.727 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:35:25.727 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.728 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:35:25.731 -05:00 [INF] Inicio de sesión exitoso
2024-12-03 12:35:25.731 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.8827ms.
2024-12-03 12:35:25.732 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:35:25.732 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:35:25.732 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:35:25.732 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:35:25.732 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:35:25.732 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:35:25.732 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 56.0431ms
2024-12-03 12:35:25.733 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:35:25.733 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:35:25.733 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.733 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:35:25.733 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 62.6352ms
2024-12-03 12:35:25.753 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:35:25.753 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-12-03 12:35:25.754 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:35:25.754 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:35:25.754 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:35:25.754 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:35:25.754 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.754 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.754 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.754 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.754 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.754 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.754 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:35:25.754 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:35:25.754 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 0.9424ms
2024-12-03 12:35:25.754 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.7181ms
2024-12-03 12:35:25.765 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-12-03 12:35:25.765 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:35:25.765 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:35:25.765 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:35:25.765 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:35:25.765 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-12-03 12:35:25.765 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.765 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.765 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.765 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:35:25.765 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.765 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.765 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:35:25.766 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:35:25.766 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:35:25.766 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:35:25.766 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:35:25.766 -05:00 [DBG] Authorization was successful.
2024-12-03 12:35:25.766 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:35:25.766 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.766 -05:00 [DBG] Authorization was successful.
2024-12-03 12:35:25.766 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.766 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-12-03 12:35:25.766 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:35:25.767 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:35:25.767 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:35:25.767 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:35:25.767 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:35:25.767 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:35:25.767 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:35:25.768 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:35:25.768 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:35:25.768 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:35:25.795 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:35:25.796 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:35:25.796 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:35:25.825 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:35:25.826 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:35:25.857 -05:00 [DBG] Consultando libros...
2024-12-03 12:35:25.857 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:35:25.857 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:35:25.857 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.858 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.858 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:35:25.858 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.858 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.858 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:35:25.858 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:35:25.860 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.861 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:35:25.862 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:35:25.862 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.863 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:35:25.864 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.864 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (1ms).
2024-12-03 12:35:25.864 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.6183ms.
2024-12-03 12:35:25.864 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:35:25.865 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:35:25.865 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:35:25.865 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:35:25.865 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:35:25.865 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:35:25.865 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 98.2577ms
2024-12-03 12:35:25.865 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.866 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:35:25.866 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.866 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:35:25.866 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 101.9057ms
2024-12-03 12:35:25.877 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.877 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:35:25.877 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.877 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:35:25.877 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:35:25.878 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:35:25.879 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.879 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:35:25.879 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.879 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:35:25.884 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:35:25.885 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 59.4308ms.
2024-12-03 12:35:25.885 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:35:25.885 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:35:25.885 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:35:25.885 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:35:25.885 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:35:25.885 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:35:25.886 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 118.6297ms
2024-12-03 12:35:25.886 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:35:25.886 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:35:25.886 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:35:25.886 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:35:25.887 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 121.9223ms
2024-12-03 12:43:21.889 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:43:21.889 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:43:21.889 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:43:21.889 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:43:21.889 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:43:21.889 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:43:21.889 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:43:21.890 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 1.1514ms
2024-12-03 12:43:21.900 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:43:21.902 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:43:21.902 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:43:21.902 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:21.906 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:43:21.913 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:43:21.913 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:43:21.917 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:43:21.917 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:43:21.917 -05:00 [DBG] Authorization was successful.
2024-12-03 12:43:21.919 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:21.919 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:43:21.919 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:43:21.919 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:43:21.919 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:43:21.919 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:43:21.919 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:43:21.919 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:43:21.920 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:43:21.920 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-12-03 12:43:21.920 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-12-03 12:43:21.920 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:21.920 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:21.920 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-12-03 12:43:21.920 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:21.949 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:43:21.951 -05:00 [DBG] Consultando perfil con id 31
2024-12-03 12:43:21.953 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:43:21.953 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:43:21.953 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:43:21.953 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:21.959 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:21.959 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:43:21.959 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:43:21.959 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:43:21.959 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:43:21.960 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:43:21.960 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:43:21.960 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:21.960 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:43:21.960 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:21.960 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:43:21.962 -05:00 [INF] Perfil encontrado con id: 31
2024-12-03 12:43:21.962 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.427ms.
2024-12-03 12:43:21.962 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:43:21.962 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:43:21.963 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:43:21.963 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:43:21.963 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:43:21.963 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-12-03 12:43:21.963 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 43.6531ms
2024-12-03 12:43:21.963 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:21.963 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:43:21.963 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:21.963 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:43:21.963 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 63.0324ms
2024-12-03 12:43:28.786 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:43:28.786 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:43:28.786 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:43:28.786 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:43:28.786 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:43:28.786 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:43:28.786 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:43:28.787 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/?id=31 - 204 null null 1.0132ms
2024-12-03 12:43:28.790 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - null null
2024-12-03 12:43:28.790 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:43:28.792 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:43:28.792 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:28.792 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:43:28.793 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:43:28.793 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:43:28.794 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:43:28.795 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:43:28.795 -05:00 [DBG] Authorization was successful.
2024-12-03 12:43:28.795 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:28.796 -05:00 [INF] Route matched with {action = "Get", controller = "Perfiles"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:43:28.796 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:43:28.796 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:43:28.796 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:43:28.796 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:43:28.796 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:43:28.796 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:43:28.797 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:43:28.797 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-12-03 12:43:28.797 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-12-03 12:43:28.797 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:28.797 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:28.797 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-12-03 12:43:28.797 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-12-03 12:43:28.828 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:43:28.830 -05:00 [DBG] Consultando perfil con id 31
2024-12-03 12:43:28.831 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:43:28.831 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:43:28.831 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:43:28.831 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:28.832 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:28.832 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:43:28.832 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:43:28.832 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:43:28.832 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:43:28.832 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-12-03 12:43:28.832 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:43:28.833 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:28.833 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:43:28.833 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:28.833 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:43:28.835 -05:00 [INF] Perfil encontrado con id: 31
2024-12-03 12:43:28.835 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6.9856ms.
2024-12-03 12:43:28.835 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:43:28.835 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:43:28.835 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:43:28.835 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:43:28.835 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:43:28.835 -05:00 [INF] Executing OkObjectResult, writing value of type 'biblioteca_backend.Models.DTOs.UpdateProfileModel'.
2024-12-03 12:43:28.836 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend) in 39.3681ms
2024-12-03 12:43:28.836 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Get (biblioteca-backend)'
2024-12-03 12:43:28.836 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:43:28.836 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:43:28.836 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:43:28.836 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Perfiles/?id=31 - 200 null application/json; charset=utf-8 47.0065ms
2024-12-03 12:50:18.110 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-12-03 12:50:18.111 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:50:18.111 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:50:18.111 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.111 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.111 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.111 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:50:18.111 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 0.9558ms
2024-12-03 12:50:18.120 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 53
2024-12-03 12:50:18.121 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:50:18.123 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:50:18.123 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:50:18.124 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.125 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.125 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.125 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:50:18.125 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:50:18.125 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:50:18.125 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:50:18.125 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:50:18.126 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:50:18.126 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:50:18.126 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:50:18.126 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:50:18.126 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:50:18.126 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:50:18.127 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-12-03 12:50:18.127 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:50:18.127 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000002F": started reading request body.
2024-12-03 12:50:18.151 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000002F": done reading request body.
2024-12-03 12:50:18.161 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-12-03 12:50:18.162 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:50:18.164 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:50:18.164 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:50:18.164 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:50:18.197 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:50:18.199 -05:00 [DBG] Iniciando sesión...
2024-12-03 12:50:18.200 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:50:18.200 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:50:18.200 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:50:18.200 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.200 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.200 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:50:18.200 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.200 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.201 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:50:18.201 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:50:18.201 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.201 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.201 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:50:18.202 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.202 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:50:18.202 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.202 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.202 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:50:18.202 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.202 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.202 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:50:18.203 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:50:18.203 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.203 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.203 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.203 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:50:18.203 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.203 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:50:18.206 -05:00 [INF] Inicio de sesión exitoso
2024-12-03 12:50:18.206 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 9.2924ms.
2024-12-03 12:50:18.206 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:50:18.206 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:50:18.206 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:50:18.206 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:50:18.207 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:50:18.207 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:50:18.207 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 80.95ms
2024-12-03 12:50:18.207 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:50:18.207 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:50:18.207 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.207 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:50:18.207 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 92.4508ms
2024-12-03 12:50:18.223 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-12-03 12:50:18.223 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:50:18.223 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:50:18.223 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:50:18.223 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.223 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.223 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.223 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:50:18.223 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:50:18.223 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:50:18.223 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.223 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.223 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.223 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:50:18.223 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.803ms
2024-12-03 12:50:18.224 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 1.3972ms
2024-12-03 12:50:18.249 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-12-03 12:50:18.249 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:50:18.250 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:50:18.250 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-12-03 12:50:18.250 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:50:18.250 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:50:18.250 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.250 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.250 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.250 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:50:18.250 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.250 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:50:18.250 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.250 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:50:18.251 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:50:18.251 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:50:18.251 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:50:18.251 -05:00 [DBG] Authorization was successful.
2024-12-03 12:50:18.251 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:50:18.251 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.251 -05:00 [DBG] Authorization was successful.
2024-12-03 12:50:18.251 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.251 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:50:18.251 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:50:18.251 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:50:18.252 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:50:18.252 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:50:18.252 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:50:18.252 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:50:18.252 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:50:18.252 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:50:18.252 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:50:18.252 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:50:18.252 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:50:18.252 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:50:18.252 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:50:18.252 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:50:18.253 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:50:18.295 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:50:18.318 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:50:18.319 -05:00 [DBG] Consultando libros...
2024-12-03 12:50:18.319 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:50:18.320 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:50:18.320 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:50:18.320 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.320 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.320 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:50:18.320 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.320 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.320 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:50:18.320 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:50:18.324 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:50:18.324 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:50:18.324 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.325 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:50:18.325 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.325 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.325 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.325 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.326 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.327 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.327 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:50:18.327 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.327 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-12-03 12:50:18.327 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.327 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:50:18.327 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.0807ms.
2024-12-03 12:50:18.327 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:50:18.328 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:50:18.328 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:50:18.328 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:50:18.328 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:50:18.328 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:50:18.329 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 76.7236ms
2024-12-03 12:50:18.329 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.329 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:50:18.329 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.329 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:50:18.330 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 81.6142ms
2024-12-03 12:50:18.332 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.333 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:50:18.333 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.333 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:50:18.333 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:50:18.337 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:50:18.337 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.337 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:50:18.337 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.337 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:50:18.345 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:50:18.345 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.5814ms.
2024-12-03 12:50:18.346 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:50:18.346 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:50:18.346 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:50:18.346 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:50:18.346 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:50:18.346 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:50:18.346 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 94.6742ms
2024-12-03 12:50:18.346 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:50:18.346 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:50:18.349 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:50:18.349 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:50:18.349 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 99.5388ms
2024-12-03 12:52:13.542 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-12-03 12:52:13.542 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:52:13.542 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:52:13.542 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.543 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.543 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.543 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:52:13.543 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.1004ms
2024-12-03 12:52:13.545 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 53
2024-12-03 12:52:13.547 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:52:13.548 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:52:13.548 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:13.548 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.548 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.548 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.548 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:52:13.548 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:13.562 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:52:13.567 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:52:13.567 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:52:13.568 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:52:13.568 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:52:13.568 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:52:13.568 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:52:13.568 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:52:13.568 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:52:13.568 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-12-03 12:52:13.568 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:52:13.568 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000003B": started reading request body.
2024-12-03 12:52:13.568 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:0000003B": done reading request body.
2024-12-03 12:52:13.569 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-12-03 12:52:13.569 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:13.569 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:13.569 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:52:13.569 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:13.629 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:52:13.631 -05:00 [DBG] Iniciando sesión...
2024-12-03 12:52:13.633 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:52:13.634 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:52:13.634 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:52:13.634 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.635 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.635 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:52:13.635 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.635 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.635 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:52:13.636 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:52:13.636 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.636 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.636 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:52:13.636 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.636 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:52:13.637 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.637 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.637 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:52:13.637 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.637 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.637 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:52:13.637 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-12-03 12:52:13.637 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.638 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.638 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.638 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:52:13.638 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.638 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:52:13.640 -05:00 [INF] Inicio de sesión exitoso
2024-12-03 12:52:13.641 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.9232ms.
2024-12-03 12:52:13.641 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:52:13.641 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:52:13.641 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:52:13.641 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:52:13.641 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:52:13.641 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-12-03 12:52:13.641 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 73.3346ms
2024-12-03 12:52:13.641 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:13.641 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:52:13.641 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.642 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:52:13.642 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 96.3032ms
2024-12-03 12:52:13.656 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:52:13.656 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:52:13.656 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:52:13.657 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.658 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-12-03 12:52:13.658 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.658 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:52:13.658 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:52:13.658 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.658 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.658 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:52:13.658 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.658 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.658 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:52:13.658 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 2.8121ms
2024-12-03 12:52:13.659 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 1.8084ms
2024-12-03 12:52:13.675 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-12-03 12:52:13.675 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-12-03 12:52:13.680 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-12-03 12:52:13.680 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-12-03 12:52:13.681 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-12-03 12:52:13.681 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-12-03 12:52:13.681 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.681 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.681 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.681 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:13.681 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.681 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.681 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:13.681 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:13.681 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:52:13.681 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:52:13.681 -05:00 [DBG] Successfully validated the token.
2024-12-03 12:52:13.681 -05:00 [DBG] Authorization was successful.
2024-12-03 12:52:13.681 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-12-03 12:52:13.681 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.681 -05:00 [DBG] Authorization was successful.
2024-12-03 12:52:13.681 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-12-03 12:52:13.681 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.681 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:52:13.682 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:52:13.682 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:52:13.682 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-12-03 12:52:13.682 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:52:13.682 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-12-03 12:52:13.682 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-12-03 12:52:13.682 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:52:13.683 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:52:13.683 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-12-03 12:52:13.684 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-12-03 12:52:13.713 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:52:13.742 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:52:13.743 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:52:13.743 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:52:13.744 -05:00 [DBG] Consultando libros...
2024-12-03 12:52:13.744 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:52:13.744 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.744 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.744 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:52:13.744 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.744 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.744 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:52:13.744 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:52:13.746 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:52:13.746 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:52:13.746 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-12-03 12:52:13.746 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.747 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.747 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-12-03 12:52:13.748 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.748 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-12-03 12:52:13.748 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-12-03 12:52:13.748 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.748 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.748 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:52:13.748 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:52:13.748 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.748 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:52:13.748 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.491ms.
2024-12-03 12:52:13.751 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:52:13.751 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:52:13.752 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:52:13.752 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:52:13.752 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:52:13.752 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:52:13.752 -05:00 [INF] Consulta de libros exitosa
2024-12-03 12:52:13.752 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.1354ms.
2024-12-03 12:52:13.753 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:52:13.753 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 71.2802ms
2024-12-03 12:52:13.753 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:52:13.753 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.754 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:52:13.754 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:52:13.754 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-12-03 12:52:13.754 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:52:13.754 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-03 12:52:13.754 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.754 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:52:13.754 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 72.1786ms
2024-12-03 12:52:13.754 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 78.8871ms
2024-12-03 12:52:13.754 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-12-03 12:52:13.754 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:52:13.754 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:13.754 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:52:13.754 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 79.194ms
2024-12-03 12:52:20.226 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-12-03 12:52:20.226 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:52:20.226 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-12-03 12:52:20.227 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:20.227 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:20.227 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:20.227 -05:00 [DBG] The request is a preflight request.
2024-12-03 12:52:20.227 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.4419ms
2024-12-03 12:52:20.229 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 51
2024-12-03 12:52:20.229 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-12-03 12:52:20.230 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-12-03 12:52:20.230 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:20.230 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-12-03 12:52:20.230 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-12-03 12:52:20.230 -05:00 [INF] CORS policy execution successful.
2024-12-03 12:52:20.230 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-12-03 12:52:20.230 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:20.230 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-12-03 12:52:20.231 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-12-03 12:52:20.231 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-12-03 12:52:20.231 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-12-03 12:52:20.231 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-12-03 12:52:20.231 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-12-03 12:52:20.231 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:52:20.231 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-12-03 12:52:20.231 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:52:20.231 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-12-03 12:52:20.231 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-12-03 12:52:20.231 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:00000047": started reading request body.
2024-12-03 12:52:20.231 -05:00 [DBG] Connection id "0HN8JNTVARI3S", Request id "0HN8JNTVARI3S:00000047": done reading request body.
2024-12-03 12:52:20.231 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-12-03 12:52:20.231 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:20.232 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:20.232 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-12-03 12:52:20.232 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-12-03 12:52:20.305 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-12-03 12:52:20.308 -05:00 [DBG] Iniciando sesión...
2024-12-03 12:52:20.309 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-12-03 12:52:20.309 -05:00 [DBG] Creating DbConnection.
2024-12-03 12:52:20.309 -05:00 [DBG] Created DbConnection. (0ms).
2024-12-03 12:52:20.309 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:20.309 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:20.309 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-12-03 12:52:20.309 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:20.309 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-12-03 12:52:20.309 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:52:20.310 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-12-03 12:52:20.310 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:20.310 -05:00 [DBG] A data reader for 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-12-03 12:52:20.310 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:20.310 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS' (0ms).
2024-12-03 12:52:20.320 -05:00 [WRN] Correo o contraseña no encontrados
2024-12-03 12:52:20.327 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.6422ms.
2024-12-03 12:52:20.327 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-12-03 12:52:20.327 -05:00 [DBG] No information found on request to perform content negotiation.
2024-12-03 12:52:20.327 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-12-03 12:52:20.327 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-12-03 12:52:20.327 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-12-03 12:52:20.327 -05:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2024-12-03 12:52:20.327 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 96.494ms
2024-12-03 12:52:20.327 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-12-03 12:52:20.327 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-12-03 12:52:20.327 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server 'DESKTOP-6O3FQ6C\SQLEXPRESS'.
2024-12-03 12:52:20.328 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-12-03 12:52:20.328 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 0 text/plain; charset=utf-8 98.7573ms
2024-12-03 13:04:34.639 -05:00 [DBG] Connection id "0HN8JNTVARI3R" received FIN.
2024-12-03 13:04:34.661 -05:00 [DBG] Connection id "0HN8JNTVARI3R" is closed. The last processed stream ID was 7.
2024-12-03 13:04:34.661 -05:00 [DBG] Connection id "0HN8JNTVARI3R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-12-03 13:04:34.670 -05:00 [DBG] The connection queue processing loop for 0HN8JNTVARI3R completed.
2024-12-03 13:04:34.671 -05:00 [DBG] Connection id "0HN8JNTVARI3R" stopped.
