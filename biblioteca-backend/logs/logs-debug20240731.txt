2024-07-31 09:15:19.548 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-31 09:15:21.137 -05:00 [DBG] Hosting starting
2024-07-31 09:15:22.007 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-31 09:15:22.024 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-07-31 09:15:22.083 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-07-31 09:15:22.151 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-07-31 09:15:22.163 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 09:15:22.170 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-31 09:15:22.173 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 09:15:22.181 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-31 09:15:22.183 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-31 09:15:22.186 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-07-31 09:15:22.187 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-07-31 09:15:24.773 -05:00 [INF] Now listening on: https://localhost:7299
2024-07-31 09:15:24.773 -05:00 [INF] Now listening on: http://localhost:5219
2024-07-31 09:15:24.774 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-07-31 09:15:24.774 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-31 09:15:24.774 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-31 09:15:24.774 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-31 09:15:24.775 -05:00 [INF] Hosting environment: Development
2024-07-31 09:15:24.775 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-07-31 09:15:24.775 -05:00 [DBG] Hosting started
2024-07-31 09:15:24.849 -05:00 [DBG] Connection id "0HN5HDCS946H8" accepted.
2024-07-31 09:15:24.855 -05:00 [DBG] Connection id "0HN5HDCS946H8" started.
2024-07-31 09:15:24.951 -05:00 [DBG] Connection id "0HN5HDCS946H8" received FIN.
2024-07-31 09:15:25.003 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 09:15:25.337 -05:00 [DBG] Connection id "0HN5HDCS946H8" stopped.
2024-07-31 09:15:25.350 -05:00 [DBG] Connection id "0HN5HDCS946H8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 09:15:25.548 -05:00 [DBG] Connection id "0HN5HDCS946H9" accepted.
2024-07-31 09:15:25.556 -05:00 [DBG] Connection id "0HN5HDCS946H9" started.
2024-07-31 09:15:26.031 -05:00 [DBG] Connection 0HN5HDCS946H9 established using the following protocol: "Tls12"
2024-07-31 09:15:26.232 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-07-31 09:15:26.958 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-31 09:15:27.022 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-31 09:15:27.022 -05:00 [DBG] Request did not match any endpoints
2024-07-31 09:15:27.762 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-31 09:15:27.765 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-31 09:15:27.980 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-31 09:15:27.981 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-31 09:15:27.985 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1764.666ms
2024-07-31 09:15:30.151 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-07-31 09:15:30.163 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 12.0807ms
2024-07-31 09:15:30.251 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-07-31 09:15:30.362 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.0238ms
2024-07-31 09:15:30.646 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-07-31 09:15:30.646 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-31 09:15:30.647 -05:00 [DBG] Request did not match any endpoints
2024-07-31 09:15:30.932 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 285.7299ms
2024-07-31 09:16:42.603 -05:00 [DBG] Connection id "0HN5HDCS946HA" accepted.
2024-07-31 09:16:42.606 -05:00 [DBG] Connection id "0HN5HDCS946HA" started.
2024-07-31 09:16:42.616 -05:00 [DBG] Connection 0HN5HDCS946HA established using the following protocol: "Tls12"
2024-07-31 09:16:42.621 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-07-31 09:16:42.651 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 09:16:42.651 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:16:42.653 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:42.654 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:42.655 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:42.656 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:16:42.658 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 37.5689ms
2024-07-31 09:16:42.662 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-07-31 09:16:42.663 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 09:16:42.666 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-07-31 09:16:42.667 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 09:16:42.667 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:42.667 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:42.667 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:42.780 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 09:16:42.782 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 09:16:42.808 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 09:16:42.810 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:16:42.810 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:16:42.810 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:16:42.810 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:16:42.810 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:16:42.812 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 09:16:43.024 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 09:16:43.089 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 09:16:43.111 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 09:16:43.115 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-07-31 09:16:43.117 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 09:16:43.130 -05:00 [DBG] Connection id "0HN5HDCS946HA", Request id "0HN5HDCS946HA:00000003": started reading request body.
2024-07-31 09:16:43.130 -05:00 [DBG] Connection id "0HN5HDCS946HA", Request id "0HN5HDCS946HA:00000003": done reading request body.
2024-07-31 09:16:43.134 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-07-31 09:16:43.135 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 09:16:43.135 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 09:16:43.135 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 09:16:43.146 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 09:16:43.254 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:16:43.279 -05:00 [DBG] Iniciando sesión...
2024-07-31 09:16:44.290 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:16:44.397 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-07-31 09:16:44.664 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 09:16:44.706 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:16:44.741 -05:00 [DBG] Created DbConnection. (33ms).
2024-07-31 09:16:44.743 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.288 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.294 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:16:45.303 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-07-31 09:16:45.316 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2024-07-31 09:16:45.328 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 09:16:45.404 -05:00 [INF] Executed DbCommand (80ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 09:16:45.454 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:45.499 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.512 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 100ms reading results.
2024-07-31 09:16:45.515 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.525 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (10ms).
2024-07-31 09:16:45.527 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-07-31 09:16:45.532 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 09:16:45.533 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.535 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.535 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:16:45.535 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:45.535 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:45.536 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 09:16:45.544 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 09:16:45.558 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:45.568 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:45.570 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.570 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 26ms reading results.
2024-07-31 09:16:45.570 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.571 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:16:45.617 -05:00 [INF] Inicio de sesión exitoso
2024-07-31 09:16:45.629 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2365.6437ms.
2024-07-31 09:16:45.637 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:16:45.641 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:16:45.641 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:16:45.642 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:16:45.644 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:16:45.644 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 09:16:45.660 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 2843.5498ms
2024-07-31 09:16:45.660 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 09:16:45.665 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:16:45.677 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:45.680 -05:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-07-31 09:16:45.681 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 3019.041ms
2024-07-31 09:16:45.711 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 09:16:45.711 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 09:16:45.712 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:16:45.712 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:45.713 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-07-31 09:16:45.713 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:45.713 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:45.713 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 09:16:45.713 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:16:45.713 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:16:45.713 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:45.713 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 3.4019ms
2024-07-31 09:16:45.713 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:45.713 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:45.714 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:16:45.714 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 1.0968ms
2024-07-31 09:16:45.721 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 09:16:45.721 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 09:16:45.721 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 09:16:45.722 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 09:16:45.724 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:45.724 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:45.724 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:45.735 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-07-31 09:16:45.735 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 09:16:45.736 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-07-31 09:16:45.736 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 09:16:45.736 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:16:45.736 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:16:45.736 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:16:45.851 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:16:45.851 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:16:45.853 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:16:45.853 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:16:45.862 -05:00 [DBG] Authorization was successful.
2024-07-31 09:16:45.862 -05:00 [DBG] Authorization was successful.
2024-07-31 09:16:45.863 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 09:16:45.863 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 09:16:45.866 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 09:16:45.866 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:16:45.866 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:16:45.866 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:16:45.867 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:16:45.867 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:16:45.867 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 09:16:45.868 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 09:16:45.868 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-07-31 09:16:45.869 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:16:45.869 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:16:45.869 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:16:45.869 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:16:45.869 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:16:45.869 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 09:16:45.871 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 09:16:45.876 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 09:16:45.877 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 09:16:45.918 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:16:45.919 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 09:16:45.920 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 09:16:45.920 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 09:16:45.920 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 09:16:45.948 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:16:45.954 -05:00 [DBG] Consultando libros...
2024-07-31 09:16:45.977 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:16:45.977 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:16:45.980 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-07-31 09:16:45.990 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:16:46.000 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-07-31 09:16:46.002 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:16:46.003 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:16:46.004 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.007 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.007 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:16:46.007 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:46.007 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:46.008 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 09:16:46.037 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 09:16:46.053 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.059 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.060 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.060 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.060 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.060 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:16:46.063 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.063 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 25ms reading results.
2024-07-31 09:16:46.065 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.065 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:16:46.066 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:16:46.066 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 148.0543ms.
2024-07-31 09:16:46.067 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:16:46.067 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:16:46.067 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.067 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.067 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:16:46.067 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:46.067 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:16:46.068 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 09:16:46.068 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:16:46.068 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:16:46.068 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:16:46.068 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:16:46.068 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:16:46.068 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:16:46.071 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 09:16:46.074 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.074 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 205.0906ms
2024-07-31 09:16:46.074 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 09:16:46.074 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.074 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:16:46.078 -05:00 [INF] Consulta de libros exitosa
2024-07-31 09:16:46.078 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 129.2942ms.
2024-07-31 09:16:46.078 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 09:16:46.078 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:16:46.078 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:16:46.078 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:16:46.079 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:16:46.079 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:16:46.079 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:16:46.080 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:16:46.080 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.080 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:16:46.080 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 345.5879ms
2024-07-31 09:16:46.085 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 217.9001ms
2024-07-31 09:16:46.085 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 09:16:46.085 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:16:46.085 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:16:46.085 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:16:46.086 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 365.1413ms
2024-07-31 09:17:06.516 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:17:06.517 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:17:06.517 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:17:06.518 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:17:06.518 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:17:06.518 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:17:06.518 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:17:06.519 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.8772ms
2024-07-31 09:17:06.527 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:17:06.529 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:17:06.529 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:17:06.529 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:17:06.529 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:17:06.529 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:17:06.529 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:17:06.533 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:17:06.534 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:17:06.535 -05:00 [DBG] Authorization was successful.
2024-07-31 09:17:06.536 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:17:06.539 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:17:06.540 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:17:06.540 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:17:06.540 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:17:06.540 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:17:06.540 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:17:06.540 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:17:06.542 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:17:06.578 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:17:06.582 -05:00 [DBG] Consultando archivos sin eliminar
2024-07-31 09:17:06.673 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:17:06.678 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-07-31 09:17:06.693 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:17:06.699 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:17:06.699 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:17:06.699 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:17:06.700 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:17:06.700 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:17:06.700 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:17:06.700 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:17:06.700 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:17:06.706 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:17:06.717 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:17:06.741 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:17:06.742 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 35ms reading results.
2024-07-31 09:17:06.742 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:17:06.742 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:17:06.745 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 09:17:06.745 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 166.6306ms.
2024-07-31 09:17:06.745 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:17:06.745 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:17:06.745 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:17:06.745 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:17:06.746 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:17:06.746 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:17:06.759 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 218.3329ms
2024-07-31 09:17:06.759 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:17:06.759 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:17:06.759 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:17:06.759 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:17:06.760 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 233.3008ms
2024-07-31 09:18:13.558 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:18:13.558 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:13.558 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:18:13.558 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:13.558 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:13.558 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:13.559 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:18:13.559 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.2258ms
2024-07-31 09:18:13.563 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:18:13.563 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:13.564 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:13.564 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:13.564 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:13.564 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:13.565 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:13.565 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:18:13.565 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:18:13.566 -05:00 [DBG] Authorization was successful.
2024-07-31 09:18:13.566 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:13.567 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:18:13.567 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:18:13.567 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:18:13.567 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:18:13.567 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:18:13.567 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:18:13.567 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:13.568 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:13.622 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:18:13.625 -05:00 [DBG] Consultando archivos sin eliminar
2024-07-31 09:18:13.626 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:18:13.631 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:18:13.631 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:18:13.631 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:13.632 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:13.632 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:18:13.632 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:13.632 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:13.632 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:18:13.653 -05:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:18:13.653 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.654 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:13.655 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:13.655 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 09:18:13.655 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:13.655 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:18:13.657 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 09:18:13.657 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.0023ms.
2024-07-31 09:18:13.657 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:18:13.657 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:18:13.657 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:18:13.657 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:18:13.657 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:18:13.657 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:18:13.658 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 90.6383ms
2024-07-31 09:18:13.658 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:13.658 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:18:13.658 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:13.658 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:18:13.658 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 95.8314ms
2024-07-31 09:18:22.450 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-07-31 09:18:22.450 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 09:18:22.450 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:18:22.451 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:22.452 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:22.452 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:22.452 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:18:22.452 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 204 null null 2.1176ms
2024-07-31 09:18:22.456 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-07-31 09:18:22.456 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 09:18:22.456 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-07-31 09:18:22.456 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:18:22.456 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:22.456 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:22.456 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:22.457 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:18:22.457 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:18:22.457 -05:00 [DBG] Authorization was successful.
2024-07-31 09:18:22.457 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:18:22.459 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:18:22.459 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:18:22.459 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:18:22.459 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:18:22.459 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:18:22.459 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:18:22.459 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:22.459 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:22.460 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-07-31 09:18:22.461 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-07-31 09:18:22.461 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:18:22.461 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:18:22.461 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-07-31 09:18:22.462 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:18:22.462 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 09:18:22.462 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-07-31 09:18:22.462 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:18:22.462 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:18:22.462 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 09:18:22.462 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:18:22.490 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:18:22.493 -05:00 [DBG] Descargando archivo
2024-07-31 09:18:22.494 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:18:22.495 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.Id == __idArchivo_0)'
2024-07-31 09:18:22.498 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.Id == @__idArchivo_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 09:18:22.499 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:18:22.499 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:18:22.499 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.499 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.499 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:18:22.499 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.499 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.499 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-07-31 09:18:22.502 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-07-31 09:18:22.502 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.502 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.502 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 09:18:22.502 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.502 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:18:22.525 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.551 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.555 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.557 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:18:22.559 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:18:22.575 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 09:18:22.656 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.656 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.657 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:18:22.657 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.658 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.658 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-07-31 09:18:22.678 -05:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-07-31 09:18:22.690 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 09:18:22.696 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.696 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 17ms reading results.
2024-07-31 09:18:22.697 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.697 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:18:22.708 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.709 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 09:18:22.710 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.710 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:18:22.710 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:18:22.710 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 09:18:22.714 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.714 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.714 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:18:22.715 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.715 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:22.715 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 09:18:22.720 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 09:18:22.721 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.721 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 09:18:22.721 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.721 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:18:22.722 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:22.722 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 09:18:22.726 -05:00 [INF] Archivo descargado exitosamente
2024-07-31 09:18:22.726 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 236.175ms.
2024-07-31 09:18:22.727 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-07-31 09:18:22.729 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-07-31 09:18:22.740 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 280.6823ms
2024-07-31 09:18:22.740 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:18:22.740 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:18:22.740 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:22.740 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:18:22.740 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 200 59861 application/octet-stream 284.7199ms
2024-07-31 09:18:22.753 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:18:22.754 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:22.754 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:18:22.755 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:22.755 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:22.755 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:22.755 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:18:22.755 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.7661ms
2024-07-31 09:18:22.758 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:18:22.758 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:22.758 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:18:22.758 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:22.758 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:18:22.759 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:18:22.759 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:18:22.760 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:18:22.760 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:18:22.760 -05:00 [DBG] Authorization was successful.
2024-07-31 09:18:22.760 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:22.761 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:18:22.761 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:18:22.761 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:18:22.761 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:18:22.761 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:18:22.761 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:18:22.763 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:22.764 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:18:23.287 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:18:23.295 -05:00 [DBG] Consultando archivos sin eliminar
2024-07-31 09:18:23.297 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:18:23.297 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:18:23.298 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:18:23.298 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:23.299 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:23.299 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:18:23.299 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:23.299 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:18:23.300 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:18:23.309 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:18:23.309 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.309 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.309 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.309 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.310 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.310 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.310 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.310 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.310 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.311 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:18:23.311 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:23.311 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 09:18:23.311 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:23.311 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:18:23.316 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 09:18:23.317 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.0989ms.
2024-07-31 09:18:23.317 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:18:23.317 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:18:23.317 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:18:23.317 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:18:23.318 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:18:23.318 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:18:23.319 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 555.5543ms
2024-07-31 09:18:23.319 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:18:23.319 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:18:23.319 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:18:23.319 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:18:23.319 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 561.9815ms
2024-07-31 09:19:46.484 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 09:19:46.484 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:19:46.484 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:19:46.484 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:19:46.484 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:19:46.484 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:19:46.484 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:19:46.484 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 1.2926ms
2024-07-31 09:19:46.498 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 09:19:46.498 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 09:19:46.498 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 09:19:46.498 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:19:46.498 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 09:19:46.498 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:19:46.498 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:19:46.499 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:19:46.499 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:19:46.499 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:19:46.499 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:19:46.499 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:19:46.499 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 09:19:46.508 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:19:46.508 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:19:46.508 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:19:46.512 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:19:46.512 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:19:46.513 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 09:19:46.513 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:19:46.514 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:19:46.514 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:19:46.514 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:19:46.514 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:19:46.514 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 09:19:46.515 -05:00 [DBG] Authorization was successful.
2024-07-31 09:19:46.515 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:19:46.515 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 09:19:46.542 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:19:46.543 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:19:46.543 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:19:46.543 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:19:46.543 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:19:46.543 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:19:46.543 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:19:46.543 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:19:46.543 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:19:46.570 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:19:46.570 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:19:46.571 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-07-31 09:19:46.576 -05:00 [DBG] Consultando historial de registros de archivos
2024-07-31 09:19:46.577 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:19:46.585 -05:00 [INF] Consulta de historial exitosa
2024-07-31 09:19:46.585 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.5827ms.
2024-07-31 09:19:46.585 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:19:46.585 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:19:46.585 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:19:46.585 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:19:46.585 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:19:46.585 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:19:46.585 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:19:46.586 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:19:46.586 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:19:46.586 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.586 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.586 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:19:46.586 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:19:46.587 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:19:46.587 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 09:19:46.590 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-07-31 09:19:46.592 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 09:19:46.595 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:19:46.600 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:19:46.601 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:19:46.601 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.601 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 8ms reading results.
2024-07-31 09:19:46.601 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.601 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:19:46.601 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.8393ms.
2024-07-31 09:19:46.601 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:19:46.601 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:19:46.601 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:19:46.601 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:19:46.601 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:19:46.601 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:19:46.604 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 89.3903ms
2024-07-31 09:19:46.604 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:19:46.604 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:19:46.604 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.604 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:19:46.604 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 107.2081ms
2024-07-31 09:19:46.649 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:19:46.650 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:19:46.651 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:19:46.651 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.651 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.651 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:19:46.651 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:19:46.651 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:19:46.651 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 09:19:46.662 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 09:19:46.672 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.672 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 9ms reading results.
2024-07-31 09:19:46.672 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.672 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:19:46.675 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 131.9463ms
2024-07-31 09:19:46.675 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:19:46.675 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:19:46.675 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:19:46.676 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:19:46.676 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 179.0725ms
2024-07-31 09:32:27.165 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-31 09:32:27.314 -05:00 [DBG] Hosting starting
2024-07-31 09:32:27.373 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-31 09:32:27.381 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-07-31 09:32:27.392 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-07-31 09:32:27.402 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-07-31 09:32:27.404 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 09:32:27.407 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-31 09:32:27.408 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 09:32:27.411 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-31 09:32:27.413 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-31 09:32:27.414 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-07-31 09:32:27.415 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-07-31 09:32:27.698 -05:00 [INF] Now listening on: https://localhost:7299
2024-07-31 09:32:27.698 -05:00 [INF] Now listening on: http://localhost:5219
2024-07-31 09:32:27.699 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-07-31 09:32:27.699 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-31 09:32:27.699 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-31 09:32:27.699 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-31 09:32:27.699 -05:00 [INF] Hosting environment: Development
2024-07-31 09:32:27.699 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-07-31 09:32:27.700 -05:00 [DBG] Hosting started
2024-07-31 09:32:27.704 -05:00 [DBG] Connection id "0HN5HDMD3QVVO" received FIN.
2024-07-31 09:32:27.709 -05:00 [DBG] Connection id "0HN5HDMD3QVVO" accepted.
2024-07-31 09:32:27.710 -05:00 [DBG] Connection id "0HN5HDMD3QVVO" started.
2024-07-31 09:32:27.733 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 09:32:27.796 -05:00 [DBG] Connection id "0HN5HDMD3QVVO" stopped.
2024-07-31 09:32:27.800 -05:00 [DBG] Connection id "0HN5HDMD3QVVO" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 09:32:27.953 -05:00 [DBG] Connection id "0HN5HDMD3QVVP" accepted.
2024-07-31 09:32:27.955 -05:00 [DBG] Connection id "0HN5HDMD3QVVP" started.
2024-07-31 09:32:28.122 -05:00 [DBG] Connection 0HN5HDMD3QVVP established using the following protocol: "Tls12"
2024-07-31 09:32:28.295 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-07-31 09:32:28.784 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-31 09:32:28.828 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-31 09:32:28.829 -05:00 [DBG] Request did not match any endpoints
2024-07-31 09:32:29.097 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-31 09:32:29.103 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-31 09:32:29.220 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-07-31 09:32:29.221 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-07-31 09:32:29.238 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 17.0602ms
2024-07-31 09:32:29.239 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-31 09:32:29.240 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-31 09:32:29.242 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 963.3385ms
2024-07-31 09:32:29.522 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 300.7689ms
2024-07-31 09:32:29.642 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-07-31 09:32:29.643 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-31 09:32:29.643 -05:00 [DBG] Request did not match any endpoints
2024-07-31 09:32:30.009 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 367.0443ms
2024-07-31 09:32:44.821 -05:00 [DBG] Connection id "0HN5HDMD3QVVQ" accepted.
2024-07-31 09:32:44.823 -05:00 [DBG] Connection id "0HN5HDMD3QVVQ" started.
2024-07-31 09:32:44.858 -05:00 [DBG] Connection 0HN5HDMD3QVVQ established using the following protocol: "Tls12"
2024-07-31 09:32:44.862 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 09:32:44.864 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 09:32:44.875 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:32:44.875 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 09:32:44.876 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:32:44.880 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:32:44.882 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 09:32:44.883 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:32:44.883 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:32:44.883 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:32:44.884 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:32:44.885 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:32:44.885 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:32:44.885 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:32:44.886 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 25.0654ms
2024-07-31 09:32:44.890 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 09:32:44.893 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:32:44.893 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 09:32:44.893 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:32:44.894 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:32:44.895 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:32:44.900 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:32:45.002 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 09:32:45.005 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:32:45.025 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 09:32:45.027 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:32:45.027 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:32:45.031 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:32:45.037 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:32:45.037 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:32:45.039 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 09:32:45.121 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:32:45.122 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:32:45.127 -05:00 [DBG] Authorization was successful.
2024-07-31 09:32:45.127 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:32:45.131 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:32:45.132 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:32:45.132 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:32:45.132 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:32:45.132 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:32:45.132 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:32:45.132 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:32:45.219 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 09:32:45.219 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 09:32:45.247 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 09:32:45.247 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:32:45.352 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:32:45.352 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:32:45.378 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 09:32:46.393 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:32:46.393 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:32:46.401 -05:00 [INF] Consulta de historial exitosa
2024-07-31 09:32:46.406 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1049.7436ms.
2024-07-31 09:32:46.421 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:32:46.422 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:32:46.423 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:32:46.423 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:32:46.424 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:32:46.424 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:32:46.443 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-07-31 09:32:46.458 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-07-31 09:32:46.649 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:32:46.661 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:32:46.680 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:32:46.682 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:32:46.703 -05:00 [DBG] Created DbConnection. (16ms).
2024-07-31 09:32:46.703 -05:00 [DBG] Created DbConnection. (22ms).
2024-07-31 09:32:46.706 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:46.706 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.127 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.134 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.134 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:32:47.136 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:32:47.145 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-07-31 09:32:47.145 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-07-31 09:32:47.148 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (18ms).
2024-07-31 09:32:47.148 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-07-31 09:32:47.162 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 09:32:47.163 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 09:32:47.232 -05:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 09:32:47.232 -05:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 09:32:47.260 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.269 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 30ms reading results.
2024-07-31 09:32:47.272 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.276 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:32:47.281 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (7ms).
2024-07-31 09:32:47.291 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 2154.2933ms
2024-07-31 09:32:47.291 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 09:32:47.297 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:32:47.299 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:32:47.300 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:32:47.302 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.302 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 70ms reading results.
2024-07-31 09:32:47.304 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.304 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.304 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:32:47.305 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1952.4737ms.
2024-07-31 09:32:47.305 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-07-31 09:32:47.305 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:32:47.305 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:32:47.305 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:32:47.306 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:32:47.306 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:32:47.306 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 2416.6976ms
2024-07-31 09:32:47.306 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:32:47.309 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 2271.5136ms
2024-07-31 09:32:47.309 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 09:32:47.309 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:32:47.310 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:32:47.310 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:32:47.310 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 2447.7174ms
2024-07-31 09:33:35.475 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:33:35.478 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:33:35.478 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:33:35.478 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:33:35.479 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:33:35.479 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:33:35.479 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:33:35.479 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 4.7907ms
2024-07-31 09:33:35.503 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:33:35.504 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:33:35.504 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:33:35.504 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:35.504 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:33:35.504 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:33:35.504 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:33:35.507 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:33:35.507 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:33:35.511 -05:00 [DBG] Authorization was successful.
2024-07-31 09:33:35.512 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:35.515 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:33:35.515 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:33:35.515 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:33:35.515 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:33:35.516 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:33:35.516 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:33:35.516 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:35.518 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:35.564 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:33:35.567 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 09:33:35.679 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:33:35.683 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-07-31 09:33:35.699 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 09:33:35.702 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:33:35.702 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:33:35.703 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:35.703 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:35.703 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:33:35.704 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:35.704 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:35.704 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:33:35.709 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:33:35.715 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.730 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.731 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.731 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:35.731 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:35.731 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 21ms reading results.
2024-07-31 09:33:35.731 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:35.731 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:33:35.733 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 09:33:35.733 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 169.0556ms.
2024-07-31 09:33:35.733 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:33:35.733 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:33:35.734 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:33:35.734 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:33:35.734 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:33:35.734 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:33:35.742 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 225.9881ms
2024-07-31 09:33:35.742 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:35.742 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:33:35.742 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:35.742 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:33:35.742 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 242.4279ms
2024-07-31 09:33:38.922 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-07-31 09:33:38.922 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 09:33:38.923 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 09:33:38.923 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:33:38.923 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:33:38.923 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:33:38.923 -05:00 [DBG] The request is a preflight request.
2024-07-31 09:33:38.923 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 204 null null 1.4371ms
2024-07-31 09:33:38.932 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - null null
2024-07-31 09:33:38.932 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 09:33:38.932 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-07-31 09:33:38.932 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:33:38.932 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:33:38.932 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:33:38.932 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:33:38.932 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:33:38.932 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:33:38.934 -05:00 [DBG] Authorization was successful.
2024-07-31 09:33:38.935 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:33:38.947 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:33:38.947 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:33:38.947 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:33:38.947 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:33:38.947 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:33:38.947 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:33:38.947 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:38.947 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:38.965 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-07-31 09:33:38.969 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-07-31 09:33:38.970 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:33:38.970 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:33:38.970 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-07-31 09:33:38.972 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-07-31 09:33:38.973 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 09:33:38.973 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-07-31 09:33:38.973 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:33:38.973 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:33:38.973 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 09:33:38.974 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 09:33:38.998 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:33:39.002 -05:00 [DBG] Descargando archivo...
2024-07-31 09:33:39.003 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:33:39.004 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.Id == __idArchivo_0)'
2024-07-31 09:33:39.011 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.Id == @__idArchivo_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 09:33:39.014 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:33:39.014 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:33:39.014 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.014 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.014 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:33:39.014 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.017 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-07-31 09:33:39.020 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-07-31 09:33:39.046 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-07-31 09:33:39.046 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.046 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.047 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 09:33:39.047 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.047 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:33:39.069 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.092 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.110 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.114 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:33:39.119 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:33:39.146 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 09:33:39.246 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.246 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.248 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:33:39.248 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.249 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.249 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-07-31 09:33:39.263 -05:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-07-31 09:33:39.272 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 09:33:39.278 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.278 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 14ms reading results.
2024-07-31 09:33:39.279 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.279 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:33:39.288 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.289 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 09:33:39.289 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.289 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:33:39.289 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 09:33:39.289 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 09:33:39.297 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.297 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.297 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:33:39.297 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.298 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.298 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 09:33:39.301 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 09:33:39.302 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.302 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 09:33:39.302 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.302 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:33:39.302 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.303 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 09:33:39.305 -05:00 [INF] Archivo descargado exitosamente
2024-07-31 09:33:39.305 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 306.9764ms.
2024-07-31 09:33:39.306 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-07-31 09:33:39.310 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-07-31 09:33:39.333 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 386.5215ms
2024-07-31 09:33:39.334 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-07-31 09:33:39.334 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:33:39.334 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.334 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:33:39.334 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=21&idPerfil=31 - 200 59861 application/octet-stream 403.0714ms
2024-07-31 09:33:39.346 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 09:33:39.346 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:33:39.347 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 09:33:39.347 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:39.347 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 09:33:39.347 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 09:33:39.347 -05:00 [INF] CORS policy execution successful.
2024-07-31 09:33:39.348 -05:00 [DBG] Successfully validated the token.
2024-07-31 09:33:39.348 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 09:33:39.348 -05:00 [DBG] Authorization was successful.
2024-07-31 09:33:39.349 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:39.349 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 09:33:39.349 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 09:33:39.349 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 09:33:39.349 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 09:33:39.349 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 09:33:39.349 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 09:33:39.349 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:39.350 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 09:33:39.434 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 09:33:39.448 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 09:33:39.450 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 09:33:39.479 -05:00 [DBG] Creating DbConnection.
2024-07-31 09:33:39.480 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 09:33:39.480 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.480 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.480 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 09:33:39.480 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.481 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 09:33:39.481 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:33:39.662 -05:00 [INF] Executed DbCommand (178ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 09:33:39.662 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.662 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.663 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.663 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 09:33:39.664 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.665 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 09:33:39.665 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.665 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 09:33:39.700 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 09:33:39.700 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 266.116ms.
2024-07-31 09:33:39.701 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 09:33:39.701 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 09:33:39.701 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 09:33:39.701 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 09:33:39.701 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 09:33:39.701 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 09:33:39.701 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 352.2694ms
2024-07-31 09:33:39.701 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 09:33:39.702 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 09:33:39.702 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 09:33:39.702 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 09:33:39.702 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 356.1946ms
2024-07-31 10:00:35.367 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-31 10:00:35.758 -05:00 [DBG] Hosting starting
2024-07-31 10:00:36.092 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-31 10:00:36.193 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-07-31 10:00:36.342 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-07-31 10:00:36.492 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-07-31 10:00:36.505 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 10:00:36.524 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-31 10:00:36.529 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 10:00:36.544 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-31 10:00:36.549 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-31 10:00:36.565 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-07-31 10:00:36.569 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-07-31 10:00:37.967 -05:00 [INF] Now listening on: https://localhost:7299
2024-07-31 10:00:37.967 -05:00 [INF] Now listening on: http://localhost:5219
2024-07-31 10:00:37.967 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-07-31 10:00:37.967 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-31 10:00:37.968 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-31 10:00:37.968 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-31 10:00:37.969 -05:00 [INF] Hosting environment: Development
2024-07-31 10:00:37.969 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-07-31 10:00:37.970 -05:00 [DBG] Hosting started
2024-07-31 10:00:38.186 -05:00 [DBG] Connection id "0HN5HE64TH3D7" received FIN.
2024-07-31 10:00:38.187 -05:00 [DBG] Connection id "0HN5HE64TH3D8" received FIN.
2024-07-31 10:00:38.203 -05:00 [DBG] Connection id "0HN5HE64TH3D7" accepted.
2024-07-31 10:00:38.206 -05:00 [DBG] Connection id "0HN5HE64TH3D7" started.
2024-07-31 10:00:38.209 -05:00 [DBG] Connection id "0HN5HE64TH3D8" accepted.
2024-07-31 10:00:38.210 -05:00 [DBG] Connection id "0HN5HE64TH3D8" started.
2024-07-31 10:00:38.265 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 10:00:38.265 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 10:00:38.421 -05:00 [DBG] Connection id "0HN5HE64TH3D8" stopped.
2024-07-31 10:00:38.421 -05:00 [DBG] Connection id "0HN5HE64TH3D7" stopped.
2024-07-31 10:00:38.426 -05:00 [DBG] Connection id "0HN5HE64TH3D8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 10:00:38.426 -05:00 [DBG] Connection id "0HN5HE64TH3D7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 10:00:38.642 -05:00 [DBG] Connection id "0HN5HE64TH3D9" accepted.
2024-07-31 10:00:38.646 -05:00 [DBG] Connection id "0HN5HE64TH3D9" started.
2024-07-31 10:00:38.998 -05:00 [DBG] Connection 0HN5HE64TH3D9 established using the following protocol: "Tls12"
2024-07-31 10:00:39.458 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-07-31 10:00:40.325 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-31 10:00:40.399 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-31 10:00:40.401 -05:00 [DBG] Request did not match any endpoints
2024-07-31 10:00:40.677 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-31 10:00:40.681 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-31 10:00:40.873 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-31 10:00:40.875 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-31 10:00:40.884 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1443.3068ms
2024-07-31 10:00:41.030 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-07-31 10:00:41.031 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-07-31 10:00:41.047 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 16.5949ms
2024-07-31 10:00:41.248 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 217.507ms
2024-07-31 10:00:41.385 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-07-31 10:00:41.387 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-31 10:00:41.387 -05:00 [DBG] Request did not match any endpoints
2024-07-31 10:00:42.072 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 687.2962ms
2024-07-31 10:00:57.345 -05:00 [DBG] Connection id "0HN5HE64TH3DA" accepted.
2024-07-31 10:00:57.347 -05:00 [DBG] Connection id "0HN5HE64TH3DA" started.
2024-07-31 10:00:57.365 -05:00 [DBG] Connection 0HN5HE64TH3DA established using the following protocol: "Tls12"
2024-07-31 10:00:57.377 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:00:57.378 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:00:57.391 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:00:57.391 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:00:57.392 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:00:57.396 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:00:57.400 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:00:57.427 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:00:57.431 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:00:57.437 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 57.5511ms
2024-07-31 10:00:57.451 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:00:57.451 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:00:57.454 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:00:57.455 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:00:57.455 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:00:57.483 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:00:57.510 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:00:57.510 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:00:57.510 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:00:57.522 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:00:57.523 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:00:57.523 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:00:57.678 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:00:57.681 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:00:57.715 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:00:57.717 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:00:57.718 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:00:57.719 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:00:57.721 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:00:57.721 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:00:57.733 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:00:57.845 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:00:57.847 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:00:57.856 -05:00 [DBG] Authorization was successful.
2024-07-31 10:00:57.857 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:00:57.860 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:00:57.860 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:00:57.860 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:00:57.860 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:00:57.860 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:00:57.860 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:00:57.860 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:00:58.025 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 10:00:58.025 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 10:00:58.060 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:00:58.060 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:00:58.204 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:00:58.204 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:00:58.260 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:01:00.355 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:01:00.356 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:01:00.407 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:01:00.429 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2202.4641ms.
2024-07-31 10:01:00.468 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:01:00.475 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:01:00.476 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:01:00.476 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:01:00.481 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:01:00.483 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:01:00.573 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-07-31 10:01:00.678 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-07-31 10:01:01.771 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:01:01.820 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:01:01.904 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:01:01.911 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:01:02.038 -05:00 [DBG] Created DbConnection. (109ms).
2024-07-31 10:01:02.038 -05:00 [DBG] Created DbConnection. (126ms).
2024-07-31 10:01:02.046 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:02.046 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.189 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.209 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.212 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:01:03.212 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:01:03.239 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-07-31 10:01:03.239 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (13ms).
2024-07-31 10:01:03.245 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (34ms).
2024-07-31 10:01:03.245 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (29ms).
2024-07-31 10:01:03.273 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:01:03.273 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:01:03.454 -05:00 [INF] Executed DbCommand (165ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:01:03.454 -05:00 [INF] Executed DbCommand (205ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:01:03.576 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.599 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 127ms reading results.
2024-07-31 10:01:03.612 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.642 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (23ms).
2024-07-31 10:01:03.645 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:03.662 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 5789.0667ms
2024-07-31 10:01:03.663 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:01:03.673 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:01:03.683 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.687 -05:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-07-31 10:01:03.689 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 6207.0176ms
2024-07-31 10:01:03.689 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:03.690 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:03.693 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.693 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 238ms reading results.
2024-07-31 10:01:03.696 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.697 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (1ms).
2024-07-31 10:01:03.697 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5493.0162ms.
2024-07-31 10:01:03.698 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:01:03.699 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:01:03.699 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:01:03.699 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:01:03.699 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:01:03.699 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:01:03.705 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 5983.4997ms
2024-07-31 10:01:03.705 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:01:03.705 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:01:03.706 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:03.706 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:01:03.707 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 6329.3683ms
2024-07-31 10:01:08.674 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:01:08.675 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:01:08.675 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:01:08.675 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:01:08.675 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:01:08.675 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:01:08.675 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:01:08.676 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:01:08.676 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:01:08.676 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:01:08.676 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:01:08.677 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:01:08.677 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:01:08.678 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:01:08.678 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 4.6816ms
2024-07-31 10:01:08.686 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:01:08.686 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:01:08.687 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:01:08.687 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:01:08.687 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:01:08.687 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:01:08.688 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:01:08.688 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:01:08.688 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:01:08.694 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:01:08.728 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:01:08.728 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:01:08.728 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:01:08.728 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:01:08.728 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:01:08.825 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:01:08.825 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:01:08.825 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:01:08.827 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:01:08.827 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:01:08.830 -05:00 [DBG] Authorization was successful.
2024-07-31 10:01:08.831 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:01:08.831 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:01:08.831 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:01:08.831 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:01:08.831 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:01:08.831 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:01:08.831 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:01:08.832 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:01:08.832 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:01:08.880 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:01:08.883 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:01:09.028 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:01:09.028 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:01:09.033 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:01:09.033 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 153.1082ms.
2024-07-31 10:01:09.033 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:01:09.033 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:01:09.034 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:01:09.034 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:01:09.034 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:01:09.034 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.034 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:01:09.034 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:01:09.034 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:01:09.037 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.037 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:01:09.037 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:09.038 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:09.038 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:01:09.042 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:01:09.042 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:09.042 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:09.042 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:09.043 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.043 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:01:09.043 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:01:09.043 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.043 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:01:09.043 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:01:09.043 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.043 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 217.11ms.
2024-07-31 10:01:09.043 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:01:09.043 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.043 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:01:09.043 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:01:09.043 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:01:09.043 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:09.043 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:01:09.043 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:09.043 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:01:09.043 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:01:09.043 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:01:09.044 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 355.8576ms
2024-07-31 10:01:09.044 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:01:09.044 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:01:09.044 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.045 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:01:09.046 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 371.5926ms
2024-07-31 10:01:09.050 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:01:09.053 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.053 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-07-31 10:01:09.054 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.055 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:01:09.056 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 224.1517ms
2024-07-31 10:01:09.056 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:01:09.056 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:01:09.056 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:09.056 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:01:09.057 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 329.0611ms
2024-07-31 10:01:45.216 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:01:45.216 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:01:45.216 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:01:45.217 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:01:45.217 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:01:45.217 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:01:45.217 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:01:45.217 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.4048ms
2024-07-31 10:01:45.222 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:01:45.223 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:01:45.223 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:01:45.223 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:01:45.223 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:01:45.223 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:01:45.223 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:01:45.224 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:01:45.224 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:01:45.229 -05:00 [DBG] Authorization was successful.
2024-07-31 10:01:45.229 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:01:45.231 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:01:45.232 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:01:45.232 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:01:45.232 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:01:45.232 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:01:45.232 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:01:45.232 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:01:45.234 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:01:45.263 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:01:45.269 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:01:45.270 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:01:45.271 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-07-31 10:01:45.279 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:01:45.281 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:01:45.281 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:01:45.282 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:45.282 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:45.282 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:01:45.282 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:45.282 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:01:45.282 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:01:45.288 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:01:45.292 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.307 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.307 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.307 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.307 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.307 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.308 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:01:45.308 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:45.308 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 20ms reading results.
2024-07-31 10:01:45.308 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:45.308 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:01:45.311 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:01:45.312 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 48.7051ms.
2024-07-31 10:01:45.312 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:01:45.312 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:01:45.312 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:01:45.312 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:01:45.312 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:01:45.312 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:01:45.328 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 95.8943ms
2024-07-31 10:01:45.328 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:01:45.329 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:01:45.329 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:01:45.329 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:01:45.329 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 107.6372ms
2024-07-31 10:04:45.773 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - null null
2024-07-31 10:04:45.773 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:04:45.774 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:04:45.774 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:04:45.774 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:04:45.774 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:04:45.774 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:04:45.774 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - 204 null null 1.7061ms
2024-07-31 10:04:45.798 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - application/json 144
2024-07-31 10:04:45.799 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:04:45.799 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)' with route pattern 'api/Perfiles/Registrarse' is valid for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:04:45.799 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:04:45.799 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:04:45.799 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:04:45.799 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:04:45.799 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:04:45.799 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:04:45.814 -05:00 [INF] Route matched with {action = "Registrarse", controller = "Perfiles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrarse(biblioteca_backend.Models.Perfil) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 10:04:45.814 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:04:45.814 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:04:45.814 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:04:45.814 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:04:45.814 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:04:45.814 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:04:45.816 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:04:45.839 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-07-31 10:04:45.843 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' using the name '' in request data ...
2024-07-31 10:04:45.845 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:04:45.850 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000013": started reading request body.
2024-07-31 10:04:45.850 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000013": done reading request body.
2024-07-31 10:04:45.856 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.Perfil'
2024-07-31 10:04:45.856 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:04:45.856 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:04:45.857 -05:00 [DBG] Attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-07-31 10:04:45.883 -05:00 [DBG] Done attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:04:45.914 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:04:45.920 -05:00 [DBG] Iniciando registro de perfil...
2024-07-31 10:04:45.921 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:04:45.922 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __perfil_Correo_0)'
2024-07-31 10:04:45.931 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Correo == @__perfil_Correo_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 10:04:45.934 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:04:45.934 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:04:45.934 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:04:45.935 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:04:45.935 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:04:45.935 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:04:45.938 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-07-31 10:04:45.940 -05:00 [DBG] Executing DbCommand [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-07-31 10:04:45.966 -05:00 [INF] Executed DbCommand (27ms) [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-07-31 10:04:45.971 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:04:45.986 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:04:45.986 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 20ms reading results.
2024-07-31 10:04:45.986 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:04:45.986 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:04:45.996 -05:00 [WRN] Correo ya registrado
2024-07-31 10:04:46.005 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ConflictObjectResult in 90.8436ms.
2024-07-31 10:04:46.005 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:04:46.005 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:04:46.005 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:04:46.006 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:04:46.006 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:04:46.006 -05:00 [INF] Executing ConflictObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:04:46.008 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) in 193.3754ms
2024-07-31 10:04:46.008 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:04:46.008 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:04:46.008 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:04:46.008 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:04:46.009 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - 409 null application/json; charset=utf-8 210.1798ms
2024-07-31 10:10:23.483 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - null null
2024-07-31 10:10:23.483 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:10:23.483 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:10:23.483 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:10:23.483 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:10:23.484 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:10:23.484 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:10:23.485 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/Registrarse - 204 null null 1.1308ms
2024-07-31 10:10:23.504 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - application/json 144
2024-07-31 10:10:23.505 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:10:23.509 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)' with route pattern 'api/Perfiles/Registrarse' is valid for the request path '/api/Perfiles/Registrarse'
2024-07-31 10:10:23.509 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:10:23.514 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:10:23.514 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:10:23.514 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:10:23.514 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:10:23.515 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:10:23.515 -05:00 [INF] Route matched with {action = "Registrarse", controller = "Perfiles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrarse(biblioteca_backend.Models.Perfil) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 10:10:23.515 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:10:23.515 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:10:23.515 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:10:23.515 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:10:23.515 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:10:23.515 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:10:23.516 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:10:23.516 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-07-31 10:10:23.517 -05:00 [DBG] Attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' using the name '' in request data ...
2024-07-31 10:10:23.517 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:10:23.517 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000017": started reading request body.
2024-07-31 10:10:23.517 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000017": done reading request body.
2024-07-31 10:10:23.517 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.Perfil'
2024-07-31 10:10:23.517 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:10:23.517 -05:00 [DBG] Done attempting to bind parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:10:23.517 -05:00 [DBG] Attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil' ...
2024-07-31 10:10:23.518 -05:00 [DBG] Done attempting to validate the bound parameter 'perfil' of type 'biblioteca_backend.Models.Perfil'.
2024-07-31 10:10:23.549 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:10:23.552 -05:00 [DBG] Iniciando registro de perfil...
2024-07-31 10:10:23.553 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:10:23.553 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:10:23.553 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:10:23.553 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.554 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.554 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:10:23.554 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:10:23.554 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:10:23.554 -05:00 [DBG] Executing DbCommand [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-07-31 10:10:23.558 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__perfil_Correo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__perfil_Correo_0
2024-07-31 10:10:23.559 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.559 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:10:23.559 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.559 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:10:23.606 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Perfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:10:23.618 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:10:23.621 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:10:23.624 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:10:23.634 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:10:23.721 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.721 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.725 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:10:23.725 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:10:23.725 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:10:23.726 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Perfil] ([Apellido], [Contrasena], [Correo], [Direccion], [IdRol], [Nombre], [Telefono])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-07-31 10:10:23.732 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Perfil] ([Apellido], [Contrasena], [Correo], [Direccion], [IdRol], [Nombre], [Telefono])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2024-07-31 10:10:23.751 -05:00 [DBG] The foreign key property 'Perfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:10:23.757 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.758 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 25ms reading results.
2024-07-31 10:10:23.759 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:23.759 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:10:23.771 -05:00 [DBG] An entity of type 'Perfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:10:23.773 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:10:23.780 -05:00 [DBG] Enviando email al correo: sebas1231923@hotmail.com...
2024-07-31 10:10:25.715 -05:00 [INF] Email enviado a sebas1231923@hotmail.com exitosamente
2024-07-31 10:10:25.769 -05:00 [INF] Registro de perfil exitoso
2024-07-31 10:10:25.771 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2221.8861ms.
2024-07-31 10:10:25.772 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:10:25.772 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:10:25.772 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:10:25.772 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:10:25.772 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:10:25.773 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:10:25.773 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend) in 2257.6159ms
2024-07-31 10:10:25.773 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Registrarse (biblioteca-backend)'
2024-07-31 10:10:25.773 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:10:25.773 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:10:25.773 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:10:25.774 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/Registrarse - 200 null application/json; charset=utf-8 2283.698ms
2024-07-31 10:11:56.381 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-07-31 10:11:56.381 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 10:11:56.381 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:11:56.382 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:11:56.382 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:11:56.382 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:11:56.382 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:11:56.382 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.2637ms
2024-07-31 10:11:56.384 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 63
2024-07-31 10:11:56.385 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 10:11:56.385 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-07-31 10:11:56.385 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:11:56.385 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:11:56.385 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:11:56.385 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:11:56.385 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:11:56.386 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:11:56.387 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 10:11:56.387 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:11:56.387 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:11:56.388 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:11:56.388 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:11:56.388 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:11:56.388 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:11:56.388 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:11:56.388 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 10:11:56.388 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-07-31 10:11:56.388 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:11:56.391 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:0000001B": started reading request body.
2024-07-31 10:11:56.391 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:0000001B": done reading request body.
2024-07-31 10:11:56.392 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-07-31 10:11:56.392 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:11:56.392 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:11:56.392 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 10:11:56.393 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:11:56.433 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:11:56.441 -05:00 [DBG] Iniciando sesión...
2024-07-31 10:11:56.442 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:11:56.443 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-07-31 10:11:56.449 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 10:11:56.452 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:11:56.452 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:11:56.453 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.453 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.453 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:11:56.453 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.453 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.453 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 10:11:56.458 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 10:11:56.458 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:11:56.458 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.458 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:11:56.458 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.458 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:11:56.459 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-07-31 10:11:56.463 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 10:11:56.465 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.465 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.465 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:11:56.465 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.465 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.465 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 10:11:56.468 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 10:11:56.487 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:11:56.509 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:11:56.512 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.512 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 43ms reading results.
2024-07-31 10:11:56.512 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.512 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:11:56.526 -05:00 [INF] Inicio de sesión exitoso
2024-07-31 10:11:56.528 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 94.9111ms.
2024-07-31 10:11:56.528 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:11:56.529 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:11:56.529 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:11:56.529 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:11:56.529 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:11:56.529 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:11:56.530 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 142.0546ms
2024-07-31 10:11:56.530 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:11:56.530 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:11:56.530 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.530 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:11:56.530 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 146.1445ms
2024-07-31 10:11:56.560 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:11:56.560 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:11:56.560 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:11:56.560 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:11:56.562 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:11:56.562 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:11:56.562 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:11:56.563 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 2.5218ms
2024-07-31 10:11:56.569 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:11:56.569 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:11:56.569 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:11:56.569 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:11:56.570 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:11:56.570 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:11:56.570 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:11:56.575 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:11:56.579 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:11:56.580 -05:00 [DBG] Authorization was successful.
2024-07-31 10:11:56.580 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:11:56.583 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:11:56.583 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:11:56.583 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:11:56.583 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:11:56.583 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:11:56.583 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:11:56.584 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:11:56.584 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:11:56.595 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:11:56.596 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:11:56.598 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:11:56.598 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:11:56.598 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:11:56.598 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:11:56.631 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:11:56.637 -05:00 [DBG] Consultando libros...
2024-07-31 10:11:56.640 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:11:56.648 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-07-31 10:11:56.654 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:11:56.657 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:11:56.657 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:11:56.657 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.657 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.657 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:11:56.657 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.658 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:11:56.658 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:11:56.663 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:11:56.665 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.665 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:11:56.665 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.665 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:11:56.675 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:11:56.675 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.0445ms.
2024-07-31 10:11:56.676 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:11:56.676 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:11:56.676 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:11:56.676 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:11:56.676 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:11:56.676 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:11:56.680 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 96.6749ms
2024-07-31 10:11:56.680 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:11:56.680 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:11:56.681 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:11:56.681 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:11:56.681 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 112.9682ms
2024-07-31 10:18:48.148 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-07-31 10:18:48.148 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:18:48.148 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:18:48.148 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:48.148 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:48.148 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:48.148 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:18:48.149 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 1.4542ms
2024-07-31 10:18:48.151 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 417
2024-07-31 10:18:48.151 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:18:48.151 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-07-31 10:18:48.151 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:18:48.151 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:48.151 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:48.151 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:48.152 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:18:48.152 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:18:48.152 -05:00 [DBG] Authorization was successful.
2024-07-31 10:18:48.152 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:18:48.157 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:18:48.157 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:18:48.157 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:18:48.157 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:18:48.157 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:18:48.157 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:18:48.157 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:18:48.158 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:18:48.158 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-07-31 10:18:48.159 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-07-31 10:18:48.159 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:18:48.161 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000023": started reading request body.
2024-07-31 10:18:48.161 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000023": done reading request body.
2024-07-31 10:18:48.168 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-07-31 10:18:48.169 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:18:48.169 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:18:48.169 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-07-31 10:18:48.182 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:18:48.209 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:18:48.214 -05:00 [DBG] Guardando préstamo...
2024-07-31 10:18:48.219 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-07-31 10:18:48.221 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:18:48.226 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:18:48.229 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .Join(
        inner: DbSet<Prestamo>(), 
        outerKeySelector: P => P.Id, 
        innerKeySelector: PR => PR.IdPerfil, 
        resultSelector: (P, PR) => new { 
            P = P, 
            PR = PR
         })
    .Join(
        inner: DbSet<DetallePrestamoLibro>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.PR.Id, 
        innerKeySelector: DP => DP.IdPrestamo, 
        resultSelector: (<>h__TransparentIdentifier0, DP) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            DP = DP
         })
    .Join(
        inner: DbSet<Libro>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.DP.IdLibro, 
        innerKeySelector: L => L.Id, 
        resultSelector: (<>h__TransparentIdentifier1, L) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            L = L
         })
    .Where(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.P.Id == __idPerfil_0)
    .Select(<>h__TransparentIdentifier2 => new Libro{ 
        Id = <>h__TransparentIdentifier2.L.Id, 
        Titulo = <>h__TransparentIdentifier2.L.Titulo, 
        Autor = <>h__TransparentIdentifier2.L.Autor, 
        IdGenero = <>h__TransparentIdentifier2.L.IdGenero, 
        Anio = <>h__TransparentIdentifier2.L.Anio, 
        Activo = <>h__TransparentIdentifier2.L.Activo 
    }
    )'
2024-07-31 10:18:48.242 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Libro>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            Id -> 0
            Titulo -> 1
            Autor -> 2
            IdGenero -> 3
            Anio -> 4
            Activo -> 5
        SELECT l.Id, l.Titulo, l.Autor, l.IdGenero, l.Anio, l.Activo
        FROM Perfil AS p
        INNER JOIN Prestamo AS p0 ON p.Id == p0.IdPerfil
        INNER JOIN DetallePrestamoLibro AS d ON p0.Id == d.IdPrestamo
        INNER JOIN Libro AS l ON d.IdLibro == l.Id
        WHERE p.Id == @__idPerfil_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Libro>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:18:48.243 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:18:48.243 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:18:48.243 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.249 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.249 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.249 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.249 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.249 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:18:48.259 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:18:48.259 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.259 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.259 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.259 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.262 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Prestamo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.269 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.269 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.269 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.273 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.274 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.274 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.274 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.274 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.275 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.275 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.280 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.281 -05:00 [DBG] The foreign key property 'Prestamo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:18:48.283 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.283 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:18:48.283 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.283 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.284 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.284 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.286 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.292 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.295 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.296 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.296 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.298 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.299 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.299 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.299 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.299 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.299 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.299 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.303 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.304 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:18:48.305 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.305 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:18:48.305 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.305 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.305 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.306 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.320 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.322 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.323 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.323 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.324 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.333 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.333 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.334 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.334 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.334 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.334 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.338 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.341 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.341 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:18:48.341 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.341 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.342 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.342 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.343 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.343 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.343 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.343 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.343 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.344 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.344 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.344 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.344 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.344 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.345 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.345 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.346 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.346 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:18:48.347 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.347 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.347 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.347 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.347 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.347 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.347 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.347 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.347 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.347 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.348 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.348 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.348 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.348 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.348 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.348 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.348 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.349 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.349 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.350 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.350 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.350 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.350 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.350 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.350 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.350 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.350 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.350 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.350 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.350 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.351 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.351 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.351 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.351 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.351 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.351 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.352 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:18:48.352 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:18:48.352 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.353 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.353 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.353 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.353 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.353 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.353 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.353 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.353 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.353 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:18:48.353 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:18:48.354 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.354 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.354 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.354 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.354 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.354 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.356 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:18:48.356 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.356 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.356 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.356 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.356 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:48.356 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:18:48.358 -05:00 [INF] Préstamo realizado exitosamente
2024-07-31 10:18:48.359 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 149.4206ms.
2024-07-31 10:18:48.359 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:18:48.359 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:18:48.359 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:18:48.359 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:18:48.359 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:18:48.359 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:18:48.359 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 201.856ms
2024-07-31 10:18:48.359 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:18:48.359 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:18:48.360 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.360 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:18:48.360 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 200 null application/json; charset=utf-8 209.4177ms
2024-07-31 10:18:48.364 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:18:48.364 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:18:48.364 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:18:48.364 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:48.364 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:48.364 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:48.364 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:18:48.365 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.9067ms
2024-07-31 10:18:48.367 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:18:48.367 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:18:48.367 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:18:48.367 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:18:48.368 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:48.368 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:48.368 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:48.368 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:18:48.368 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:18:48.368 -05:00 [DBG] Authorization was successful.
2024-07-31 10:18:48.368 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:18:48.368 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:18:48.368 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:18:48.368 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:18:48.368 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:18:48.368 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:18:48.368 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:18:48.369 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:18:48.369 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:18:48.369 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:18:48.369 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:18:48.369 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:18:48.369 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:18:48.370 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:18:48.370 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:18:48.407 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:18:48.410 -05:00 [DBG] Consultando libros...
2024-07-31 10:18:48.411 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:18:48.412 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:18:48.412 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:18:48.413 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.413 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.413 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:48.414 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.414 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:48.414 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:18:48.420 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:18:48.421 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.421 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:18:48.421 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.421 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:48.424 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:18:48.424 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.7052ms.
2024-07-31 10:18:48.424 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:18:48.424 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:18:48.424 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:18:48.424 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:18:48.425 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:18:48.425 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:18:48.425 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 56.2961ms
2024-07-31 10:18:48.425 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:18:48.425 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:18:48.425 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:48.425 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:18:48.425 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 58.641ms
2024-07-31 10:18:52.050 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:18:52.050 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:18:52.050 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:18:52.051 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:52.052 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:52.052 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:52.052 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:18:52.053 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 3.6966ms
2024-07-31 10:18:52.181 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:18:52.181 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:18:52.181 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:18:52.182 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:18:52.183 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:18:52.183 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:18:52.184 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:18:52.185 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:18:52.186 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:18:52.189 -05:00 [DBG] Authorization was successful.
2024-07-31 10:18:52.191 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:18:52.192 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:18:52.192 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:18:52.193 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:18:52.194 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:18:52.194 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:18:52.195 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:18:52.196 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:18:52.198 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:18:52.430 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:18:52.438 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:18:52.440 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:18:52.441 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:18:52.441 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:18:52.442 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:52.442 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:52.442 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:18:52.443 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:52.443 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:18:52.443 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:18:52.459 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:18:52.460 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.460 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.460 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.461 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.461 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.461 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.461 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.462 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.462 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.462 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:18:52.462 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:52.463 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:18:52.463 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:52.463 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:18:52.469 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:18:52.469 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.395ms.
2024-07-31 10:18:52.472 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:18:52.472 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:18:52.473 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:18:52.473 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:18:52.473 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:18:52.473 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:18:52.474 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 278.6704ms
2024-07-31 10:18:52.474 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:18:52.475 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:18:52.475 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:18:52.475 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:18:52.476 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 295.2687ms
2024-07-31 10:19:01.362 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=40 - null null
2024-07-31 10:19:01.364 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:01.364 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:01.364 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:01.364 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:01.365 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:01.365 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:01.365 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=40 - 204 null null 4.2616ms
2024-07-31 10:19:01.394 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=40 - null null
2024-07-31 10:19:01.394 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:01.394 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-07-31 10:19:01.394 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:01.395 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:01.395 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:01.395 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:01.396 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:01.396 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:01.396 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:01.396 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:01.401 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:19:01.401 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:01.401 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:01.401 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:01.401 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:01.401 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:01.402 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:01.402 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:01.409 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:19:01.409 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-07-31 10:19:01.410 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:01.411 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:01.411 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:19:01.411 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:01.467 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:01.472 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-07-31 10:19:01.473 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:01.477 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:01.479 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:01.480 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:01.480 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:01.480 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:01.481 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:01.481 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:01.481 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:01.481 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:01.483 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:01.483 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:01.484 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:01.484 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:01.484 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:01.484 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.8932ms.
2024-07-31 10:19:01.484 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:01.484 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:01.485 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:01.485 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:01.485 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:01.485 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:19:01.492 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 90.1024ms
2024-07-31 10:19:01.492 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:01.492 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:01.492 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:01.492 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:01.493 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=40 - 200 null application/json; charset=utf-8 98.9559ms
2024-07-31 10:19:13.885 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-07-31 10:19:13.885 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 10:19:13.885 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:13.885 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:13.885 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:13.886 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:13.886 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:13.886 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.3835ms
2024-07-31 10:19:13.891 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-07-31 10:19:13.892 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 10:19:13.892 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-07-31 10:19:13.892 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:19:13.892 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:13.893 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:13.893 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:13.893 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:19:13.893 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:19:13.895 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 10:19:13.895 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:13.895 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:13.895 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:13.895 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:13.896 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:13.896 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:19:13.896 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 10:19:13.897 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 10:19:13.897 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-07-31 10:19:13.897 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:19:13.897 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000033": started reading request body.
2024-07-31 10:19:13.897 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000033": done reading request body.
2024-07-31 10:19:13.897 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-07-31 10:19:13.898 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:19:13.898 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:19:13.898 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 10:19:13.898 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 10:19:13.935 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:13.941 -05:00 [DBG] Iniciando sesión...
2024-07-31 10:19:13.943 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:13.944 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:13.944 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:13.944 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.944 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.944 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:13.944 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:13.944 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:13.944 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 10:19:13.948 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 10:19:13.948 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:13.948 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.949 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:13.949 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.949 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:13.950 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.950 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.950 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:13.950 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:13.950 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:13.950 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 10:19:13.955 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 10:19:13.956 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:13.956 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:13.956 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.956 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:19:13.956 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.956 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:13.960 -05:00 [INF] Inicio de sesión exitoso
2024-07-31 10:19:13.961 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.1374ms.
2024-07-31 10:19:13.961 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:13.961 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:13.961 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:13.961 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:13.961 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:13.961 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:19:13.962 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 65.7456ms
2024-07-31 10:19:13.962 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 10:19:13.962 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:13.962 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:13.962 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:13.962 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 71.4101ms
2024-07-31 10:19:14.008 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 10:19:14.009 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:14.009 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:14.009 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:14.009 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:14.009 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:14.009 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:14.009 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 10.2547ms
2024-07-31 10:19:14.015 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-07-31 10:19:14.016 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 10:19:14.016 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:14.040 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:14.041 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:14.041 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:14.041 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:14.041 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 26.4261ms
2024-07-31 10:19:14.097 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 10:19:14.097 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-07-31 10:19:14.097 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:14.097 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 10:19:14.098 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:19:14.098 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-07-31 10:19:14.098 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.098 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.098 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:14.098 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:14.098 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:14.098 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:14.098 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:14.098 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:14.098 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:14.098 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:14.098 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:14.098 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:14.099 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:14.099 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.099 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:14.099 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.099 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:19:14.099 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:14.099 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:14.099 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:14.099 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:14.099 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:14.100 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:14.100 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:14.100 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:14.100 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:19:14.101 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:14.101 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:14.101 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:14.101 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:14.162 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:14.165 -05:00 [DBG] Consultando libros...
2024-07-31 10:19:14.166 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:14.168 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-07-31 10:19:14.169 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-07-31 10:19:14.170 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:14.170 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:14.170 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:14.170 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:14.170 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:14.171 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 10:19:14.172 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 10:19:14.239 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:14.242 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:19:14.243 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:14.243 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:14.243 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.243 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.244 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:14.244 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:14.244 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:14.244 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 10:19:14.249 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:14.250 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-07-31 10:19:14.262 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:19:14.264 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:14.264 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:14.264 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.276 -05:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 10:19:14.277 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.277 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:14.278 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.278 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:14.299 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:19:14.299 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 137.3341ms.
2024-07-31 10:19:14.300 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:14.300 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:14.300 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:14.300 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:14.300 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:14.303 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:14.304 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 204.3516ms
2024-07-31 10:19:14.304 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.304 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:14.305 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.305 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:14.305 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 213.0572ms
2024-07-31 10:19:14.331 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.331 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:14.332 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:14.332 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:14.332 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 10:19:14.349 -05:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 10:19:14.357 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.366 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.366 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.367 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.368 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.368 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.368 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:14.368 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.368 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 18ms reading results.
2024-07-31 10:19:14.368 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.369 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:14.370 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.9655ms.
2024-07-31 10:19:14.371 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:14.371 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:14.371 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:14.371 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:14.371 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:14.372 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:14.375 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 204.794ms
2024-07-31 10:19:14.375 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:19:14.376 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:14.376 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:14.376 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:14.376 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 279.2129ms
2024-07-31 10:19:16.883 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-07-31 10:19:16.883 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:16.883 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:16.883 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:16.887 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:16.888 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:16.888 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:16.888 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 5.4523ms
2024-07-31 10:19:16.893 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-07-31 10:19:16.893 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:16.895 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:16.895 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:16.895 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:16.895 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:16.895 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:16.895 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:16.896 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:16.896 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:16.896 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:16.908 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:19:16.909 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:16.909 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:16.909 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:16.909 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:16.909 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:16.909 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:16.911 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:16.999 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:17.005 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:17.005 -05:00 [DBG] Compiling query expression: 
'DbSet<Prestamo>()'
2024-07-31 10:19:17.009 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Prestamo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Prestamo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Prestamo.FechaPrestamo (DateTime) Required, 1], [Property: Prestamo.IdPerfil (int) Required FK Index, 2] }
        SELECT p.Id, p.FechaPrestamo, p.IdPerfil
        FROM Prestamo AS p), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Prestamo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 10:19:17.009 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:17.009 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:17.010 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.010 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.010 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:17.010 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.010 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.010 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-07-31 10:19:17.014 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-07-31 10:19:17.014 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.014 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.014 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.015 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:17.015 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.015 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:17.020 -05:00 [DBG] Consultando perfil con id 34
2024-07-31 10:19:17.021 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Id == __id_0)'
2024-07-31 10:19:17.025 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE p.Id == @__id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 10:19:17.025 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.025 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.025 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:17.025 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.026 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.026 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:17.028 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:17.029 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.030 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.030 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.030 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:19:17.030 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.030 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:17.034 -05:00 [INF] Perfil encontrado con id: 34
2024-07-31 10:19:17.038 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-07-31 10:19:17.042 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:17.042 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.043 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.043 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:17.043 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.043 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.043 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:17.049 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:17.049 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.049 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:17.049 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.049 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:17.055 -05:00 [DBG] Consultando perfil con id 40
2024-07-31 10:19:17.055 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.055 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.055 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:17.056 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.056 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.056 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:17.056 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:17.057 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.057 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:17.057 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.057 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:17.057 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.057 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:17.060 -05:00 [INF] Perfil encontrado con id: 40
2024-07-31 10:19:17.062 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-07-31 10:19:17.065 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:17.066 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.066 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.066 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:17.066 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.066 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:17.066 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:17.067 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:17.067 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.067 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:17.067 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.067 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:17.068 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 68.0931ms.
2024-07-31 10:19:17.068 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:17.068 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:17.068 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:17.068 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:17.068 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:17.068 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:17.075 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 165.4257ms
2024-07-31 10:19:17.075 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:17.075 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:17.075 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:17.075 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:17.075 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 183.44ms
2024-07-31 10:19:25.548 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:19:25.549 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:25.549 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:25.549 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:25.549 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:25.550 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:25.550 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:25.550 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 1.6639ms
2024-07-31 10:19:25.563 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:19:25.564 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:25.564 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:19:25.564 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:25.567 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:25.567 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:25.567 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:25.575 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:25.575 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:25.575 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:25.575 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:25.575 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:19:25.575 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:25.576 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:25.576 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:25.576 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:25.576 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:25.576 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:25.576 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:25.576 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:25.576 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:19:25.576 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:25.576 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:25.577 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:25.577 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:25.622 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:25.624 -05:00 [DBG] Consultando libros...
2024-07-31 10:19:25.625 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:25.626 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:25.626 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:25.626 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:25.626 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:25.626 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:25.626 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:25.626 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:25.627 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:19:25.630 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:19:25.630 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:25.630 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:25.630 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:25.630 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:25.633 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:19:25.633 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.728ms.
2024-07-31 10:19:25.633 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:25.633 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:25.633 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:25.633 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:25.633 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:25.633 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:25.633 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 57.4998ms
2024-07-31 10:19:25.634 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:25.634 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:25.634 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:25.634 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:25.634 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 74.7989ms
2024-07-31 10:19:32.364 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - null null
2024-07-31 10:19:32.364 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:32.365 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:32.365 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:32.365 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:32.365 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:32.365 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:32.365 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ - 204 null null 0.7707ms
2024-07-31 10:19:32.368 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Prestmaos/ - application/json 380
2024-07-31 10:19:32.368 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:32.369 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-07-31 10:19:32.370 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:19:32.370 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:32.370 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:32.370 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:32.370 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:32.370 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:32.370 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:32.370 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:19:32.370 -05:00 [INF] Route matched with {action = "Post", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(biblioteca_backend.Models.DTOs.PrestamoModel) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:19:32.371 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:32.371 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:32.371 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:32.371 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:32.371 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:32.371 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:32.371 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:32.371 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-07-31 10:19:32.371 -05:00 [DBG] Attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' using the name '' in request data ...
2024-07-31 10:19:32.371 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 10:19:32.371 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000047": started reading request body.
2024-07-31 10:19:32.372 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:00000047": done reading request body.
2024-07-31 10:19:32.372 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.PrestamoModel'
2024-07-31 10:19:32.372 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:19:32.372 -05:00 [DBG] Done attempting to bind parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:19:32.372 -05:00 [DBG] Attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel' ...
2024-07-31 10:19:32.372 -05:00 [DBG] Done attempting to validate the bound parameter 'prestamoModel' of type 'biblioteca_backend.Models.DTOs.PrestamoModel'.
2024-07-31 10:19:32.422 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:32.426 -05:00 [DBG] Guardando préstamo...
2024-07-31 10:19:32.431 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-07-31 10:19:32.432 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:32.441 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:32.442 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:32.442 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:32.442 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.442 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.443 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.443 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.443 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.443 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:32.444 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:32.444 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.444 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.445 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.445 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.445 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Prestamo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.445 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.445 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.445 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.446 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.446 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.447 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.447 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.447 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.447 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.447 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.460 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Prestamo] ([FechaPrestamo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.460 -05:00 [DBG] The foreign key property 'Prestamo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:19:32.460 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.460 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.461 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.461 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.461 -05:00 [DBG] An entity of type 'Prestamo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.461 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.461 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.461 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.462 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.462 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.462 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.462 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.462 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.463 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.463 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.463 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.463 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.463 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.472 -05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.473 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:19:32.474 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.474 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.474 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.475 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.475 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.475 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.475 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.475 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.475 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.475 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.475 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.476 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.476 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.476 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.476 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.476 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.476 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.481 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.481 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.481 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.481 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.481 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.481 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.481 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.481 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.482 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.482 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.482 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.482 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.482 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.482 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.482 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.482 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.483 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.483 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.483 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.485 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.485 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:19:32.486 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.486 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.486 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.486 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.487 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.487 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.490 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.490 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.490 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.490 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.490 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.491 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.491 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.491 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.492 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.492 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.492 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.494 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.495 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.495 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.495 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.495 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.495 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.496 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.496 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'DetallePrestamoLibro.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.496 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Prestamo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.496 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'DetallePrestamoLibro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.496 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.496 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.497 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.497 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.497 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.498 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.498 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.498 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.498 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.501 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DetallePrestamoLibro] ([IdLibro], [IdPrestamo])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2024-07-31 10:19:32.505 -05:00 [DBG] The foreign key property 'DetallePrestamoLibro.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-07-31 10:19:32.506 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.506 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:19:32.506 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.506 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.506 -05:00 [DBG] An entity of type 'DetallePrestamoLibro' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.506 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.507 -05:00 [DBG] The navigation 'DetallePrestamoLibro.Libro' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.507 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Libro' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.507 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.507 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-07-31 10:19:32.507 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-07-31 10:19:32.508 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.508 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.508 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.508 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.508 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.508 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.509 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Libro] SET [Activo] = @p0, [Anio] = @p1, [Autor] = @p2, [IdGenero] = @p3, [Titulo] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-07-31 10:19:32.510 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.510 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:32.511 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.511 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.511 -05:00 [DBG] An entity of type 'Libro' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:32.511 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-07-31 10:19:32.514 -05:00 [INF] Préstamo realizado exitosamente
2024-07-31 10:19:32.515 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.2257ms.
2024-07-31 10:19:32.515 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:32.515 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:32.515 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:32.515 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:32.516 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:32.516 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:19:32.516 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend) in 145.1731ms
2024-07-31 10:19:32.516 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Post (biblioteca-backend)'
2024-07-31 10:19:32.517 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:32.517 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.517 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:32.517 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Prestmaos/ - 200 null application/json; charset=utf-8 150.1454ms
2024-07-31 10:19:32.525 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:19:32.525 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:32.525 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:32.526 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:32.526 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:32.526 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:32.526 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:32.526 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.9848ms
2024-07-31 10:19:32.531 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 10:19:32.531 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:19:32.531 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:19:32.532 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:32.532 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:32.532 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:32.532 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:32.532 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:32.532 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:32.533 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:32.533 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:32.533 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:19:32.533 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:32.537 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:32.538 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:32.538 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:32.538 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:32.539 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:32.540 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:19:32.541 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:32.542 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:19:32.542 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:32.542 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:32.542 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:19:32.543 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:19:32.594 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:32.597 -05:00 [DBG] Consultando libros...
2024-07-31 10:19:32.599 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:32.599 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:32.599 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:32.599 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.600 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.600 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:32.600 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.600 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:32.600 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:19:32.601 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 10:19:32.603 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.603 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:19:32.604 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.604 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:32.608 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:19:32.608 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.2792ms.
2024-07-31 10:19:32.609 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:32.609 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:32.609 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:32.609 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:32.609 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:32.609 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:32.610 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 71.2544ms
2024-07-31 10:19:32.610 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:19:32.610 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:32.611 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:32.611 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:32.611 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 80.2017ms
2024-07-31 10:19:36.363 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-07-31 10:19:36.364 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:36.364 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:36.364 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:36.364 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:36.364 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:36.365 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:36.365 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/?idPerfil=31 - 204 null null 2.1355ms
2024-07-31 10:19:36.377 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - null null
2024-07-31 10:19:36.377 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/'
2024-07-31 10:19:36.378 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)' with route pattern 'api/Prestmaos' is valid for the request path '/api/Prestmaos/'
2024-07-31 10:19:36.378 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:36.378 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:36.378 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:36.378 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:36.379 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:36.379 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:36.379 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:36.380 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:36.380 -05:00 [INF] Route matched with {action = "Get", controller = "Prestmaos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Int32) on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:19:36.380 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:36.380 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:36.381 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:36.381 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:36.381 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:36.382 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:36.384 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:36.384 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:19:36.389 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-07-31 10:19:36.389 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:36.391 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:36.391 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:19:36.392 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:19:36.602 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:36.608 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-07-31 10:19:36.610 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:36.614 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:36.616 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:36.616 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:36.616 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:36.617 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:36.617 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:36.617 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:36.617 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:36.617 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:36.620 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:36.620 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:36.620 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:36.620 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:36.620 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:36.620 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.9185ms.
2024-07-31 10:19:36.621 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:36.621 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:36.621 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:36.621 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:36.621 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:36.621 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`1[[System.Collections.Generic.List`1[[biblioteca_backend.Models.Libro, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:19:36.622 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend) in 239.7126ms
2024-07-31 10:19:36.622 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.Get (biblioteca-backend)'
2024-07-31 10:19:36.622 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:36.623 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:36.623 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:36.623 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/?idPerfil=31 - 200 null application/json; charset=utf-8 246.941ms
2024-07-31 10:19:38.360 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-07-31 10:19:38.361 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:38.361 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:38.361 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:38.361 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:38.362 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:38.362 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:38.362 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 204 null null 1.6422ms
2024-07-31 10:19:38.376 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - null null
2024-07-31 10:19:38.376 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:38.376 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)' with route pattern 'api/Prestmaos/ConsultarPrestamos' is valid for the request path '/api/Prestmaos/ConsultarPrestamos'
2024-07-31 10:19:38.377 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:38.378 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:38.378 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:38.378 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:38.379 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:38.379 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:38.380 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:38.380 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:38.380 -05:00 [INF] Route matched with {action = "ConsultarPrestamos", controller = "Prestmaos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarPrestamos() on controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend).
2024-07-31 10:19:38.380 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:38.381 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:38.382 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:38.382 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:38.383 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:38.383 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:38.384 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PrestmaosController (biblioteca-backend)
2024-07-31 10:19:38.447 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:38.449 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:38.449 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:38.450 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:19:38.450 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.450 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.450 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.450 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.451 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.451 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-07-31 10:19:38.457 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[FechaPrestamo], [p].[IdPerfil]
FROM [Prestamo] AS [p]
2024-07-31 10:19:38.459 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.459 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.459 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Prestamo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.459 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.459 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:19:38.460 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.460 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.467 -05:00 [DBG] Consultando perfil con id 34
2024-07-31 10:19:38.470 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.471 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.471 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.472 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.472 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.472 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.474 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.474 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.475 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.475 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.475 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:38.475 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.475 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.481 -05:00 [INF] Perfil encontrado con id: 34
2024-07-31 10:19:38.490 -05:00 [DBG] Consultando libros del préstamo del perfil con id 34
2024-07-31 10:19:38.499 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:38.500 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.500 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.500 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.501 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.503 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-07-31 10:19:38.504 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.506 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.506 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.507 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:38.507 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.507 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.512 -05:00 [DBG] Consultando perfil con id 40
2024-07-31 10:19:38.512 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.513 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.513 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.513 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.513 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.513 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.515 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.515 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.515 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.515 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.516 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:38.516 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.516 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.526 -05:00 [INF] Perfil encontrado con id: 40
2024-07-31 10:19:38.533 -05:00 [DBG] Consultando libros del préstamo del perfil con id 40
2024-07-31 10:19:38.561 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:38.563 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.563 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.564 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.564 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.564 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.564 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.584 -05:00 [INF] Executed DbCommand (20ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.585 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.586 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:38.587 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.588 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.594 -05:00 [DBG] Consultando perfil con id 31
2024-07-31 10:19:38.595 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.595 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.596 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.596 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.596 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.596 -05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.597 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Id] = @__id_0
2024-07-31 10:19:38.598 -05:00 [DBG] The navigation 'Prestamo.Perfil' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.599 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:38.599 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.600 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:19:38.601 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.604 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (3ms).
2024-07-31 10:19:38.617 -05:00 [INF] Perfil encontrado con id: 31
2024-07-31 10:19:38.626 -05:00 [DBG] Consultando libros del préstamo del perfil con id 31
2024-07-31 10:19:38.632 -05:00 [INF] Libros encontrados exitosamente
2024-07-31 10:19:38.633 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.633 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.633 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:38.633 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.633 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:38.633 -05:00 [DBG] Executing DbCommand [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.638 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__idPerfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Titulo], [l].[Autor], [l].[IdGenero], [l].[Anio], [l].[Activo]
FROM [Perfil] AS [p]
INNER JOIN [Prestamo] AS [p0] ON [p].[Id] = [p0].[IdPerfil]
INNER JOIN [DetallePrestamoLibro] AS [d] ON [p0].[Id] = [d].[IdPrestamo]
INNER JOIN [Libro] AS [l] ON [d].[IdLibro] = [l].[Id]
WHERE [p].[Id] = @__idPerfil_0
2024-07-31 10:19:38.639 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.639 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:19:38.639 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.639 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:38.640 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 192.4255ms.
2024-07-31 10:19:38.640 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:38.640 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:38.640 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:38.640 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:38.640 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:38.640 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.DTOs.ConsultaPrestamoModel, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:38.641 -05:00 [INF] Executed action biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend) in 257.6442ms
2024-07-31 10:19:38.641 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PrestmaosController.ConsultarPrestamos (biblioteca-backend)'
2024-07-31 10:19:38.641 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:38.642 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:38.642 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:38.642 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Prestmaos/ConsultarPrestamos - 200 null application/json; charset=utf-8 266.6751ms
2024-07-31 10:19:50.480 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:19:50.481 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:19:50.481 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:19:50.482 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:50.482 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:50.482 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:50.482 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:19:50.514 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 32.5204ms
2024-07-31 10:19:50.516 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:19:50.517 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:19:50.524 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:19:50.525 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:19:50.526 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:50.526 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:50.526 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:50.527 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:19:50.527 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:19:50.528 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:19:50.528 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:50.528 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:50.528 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:50.529 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:50.529 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:50.531 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:19:50.531 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:19:50.531 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:19:50.531 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:19:50.532 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:19:50.532 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:19:50.532 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:19:50.533 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:19:50.533 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:19:50.533 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:19:50.534 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:19:50.537 -05:00 [DBG] Authorization was successful.
2024-07-31 10:19:50.538 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:19:50.541 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:19:50.541 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:19:50.542 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:19:50.542 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:19:50.691 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:50.691 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:19:50.691 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:19:50.691 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:19:50.692 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:19:50.693 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:50.700 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:50.705 -05:00 [DBG] Created DbConnection. (4ms).
2024-07-31 10:19:50.705 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.706 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.706 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:50.706 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:50.706 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:50.707 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:19:50.808 -05:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:19:50.808 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:19:50.808 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:50.811 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:50.811 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:19:50.814 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.814 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:19:50.814 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-07-31 10:19:50.814 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.815 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:50.815 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 123.8716ms.
2024-07-31 10:19:50.815 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:50.815 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:50.815 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:50.816 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:50.816 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:50.816 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:50.816 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:19:50.816 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 285.7613ms
2024-07-31 10:19:50.817 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:19:50.817 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:50.817 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.817 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:50.818 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 301.4444ms
2024-07-31 10:19:50.846 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:19:50.846 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37.832ms.
2024-07-31 10:19:50.847 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:19:50.847 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:19:50.848 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:19:50.848 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:19:50.849 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:19:50.849 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:19:50.850 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:19:50.855 -05:00 [DBG] Created DbConnection. (4ms).
2024-07-31 10:19:50.855 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.855 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.856 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:19:50.856 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:50.856 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:19:50.856 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:19:50.916 -05:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:19:50.925 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.925 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-07-31 10:19:50.925 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.926 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:19:50.928 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 236.3585ms
2024-07-31 10:19:50.929 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:19:50.930 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:19:50.930 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:19:50.930 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:19:50.931 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 400.6263ms
2024-07-31 10:25:28.899 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-07-31 10:25:28.900 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 10:25:28.900 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:25:28.900 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:28.900 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:28.900 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:28.901 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:25:28.901 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 1.6658ms
2024-07-31 10:25:28.904 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 10:25:28.904 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:25:28.904 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:25:28.904 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:28.905 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:28.905 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:28.905 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:25:28.905 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 7.1696ms
2024-07-31 10:25:28.914 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-07-31 10:25:28.915 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-07-31 10:25:28.915 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-07-31 10:25:28.915 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:25:28.915 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:28.916 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-07-31 10:25:28.917 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:28.917 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 10:25:28.917 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 10:25:28.917 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:28.917 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:25:28.917 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:28.917 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:28.917 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:28.918 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:25:28.918 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:25:28.918 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:25:28.918 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:25:28.918 -05:00 [DBG] Authorization was successful.
2024-07-31 10:25:28.918 -05:00 [DBG] Authorization was successful.
2024-07-31 10:25:28.918 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:25:28.918 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:25:28.920 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:25:28.921 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:25:28.922 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:25:28.922 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:25:28.922 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 10:25:28.922 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 10:25:28.922 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-07-31 10:25:28.922 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:25:28.922 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 10:25:28.922 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:25:28.923 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:25:28.923 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 10:25:28.923 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 10:25:28.987 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:25:29.026 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:25:29.026 -05:00 [DBG] Consultando libros...
2024-07-31 10:25:29.027 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:25:29.027 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:25:29.027 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:25:29.027 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:25:29.028 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.028 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.028 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:25:29.028 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:25:29.028 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:25:29.028 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:29.028 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:29.028 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.028 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 10:25:29.060 -05:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.062 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.062 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.062 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.063 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.063 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:29.063 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.063 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:25:29.063 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.064 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:25:29.064 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.0713ms.
2024-07-31 10:25:29.065 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:25:29.065 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:25:29.065 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:25:29.065 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:25:29.065 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:25:29.065 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:25:29.065 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 143.817ms
2024-07-31 10:25:29.066 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-07-31 10:25:29.066 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:25:29.066 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.066 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:25:29.066 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 152.3605ms
2024-07-31 10:25:29.098 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.098 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:25:29.098 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:29.098 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:29.098 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 10:25:29.123 -05:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-07-31 10:25:29.123 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.123 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:25:29.123 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.124 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:25:29.150 -05:00 [INF] Consulta de libros exitosa
2024-07-31 10:25:29.151 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 163.0519ms.
2024-07-31 10:25:29.151 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:25:29.151 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:25:29.151 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:25:29.151 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:25:29.151 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:25:29.151 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:25:29.152 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 230.2566ms
2024-07-31 10:25:29.152 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 10:25:29.152 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:25:29.152 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:29.152 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:25:29.152 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 236.2962ms
2024-07-31 10:25:35.996 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:25:35.996 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:25:35.996 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:25:35.996 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:35.996 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:35.997 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:35.997 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:25:35.997 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 0.7895ms
2024-07-31 10:25:35.999 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:25:35.999 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:25:35.999 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:25:35.999 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:25:35.999 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:35.999 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:36.000 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:36.000 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:25:36.000 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:25:36.000 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:25:36.001 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:25:36.005 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:25:36.005 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:25:36.005 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:25:36.005 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:25:36.005 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:25:36.006 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:25:36.006 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:25:36.006 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:25:36.007 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:25:36.007 -05:00 [DBG] Authorization was successful.
2024-07-31 10:25:36.007 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:25:36.007 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:25:36.007 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:25:36.007 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:25:36.007 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:25:36.007 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:25:36.007 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:25:36.007 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:25:36.008 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:25:36.010 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:25:36.010 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:25:36.010 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:25:36.011 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:25:36.011 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:25:36.011 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:25:36.056 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:25:36.079 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:25:36.080 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:25:36.081 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:25:36.081 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:25:36.081 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:25:36.081 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:25:36.082 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.082 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.083 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:25:36.084 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-07-31 10:25:36.084 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:25:36.084 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-07-31 10:25:36.084 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:25:36.084 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.6875ms.
2024-07-31 10:25:36.084 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:25:36.085 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:25:36.086 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:25:36.086 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:25:36.086 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:25:36.086 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:25:36.087 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:25:36.087 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:25:36.087 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.087 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.087 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:25:36.087 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:36.087 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:25:36.087 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:25:36.087 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:25:36.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:36.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:36.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:25:36.087 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.088 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:25:36.088 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.088 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:25:36.089 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.2261ms.
2024-07-31 10:25:36.089 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:25:36.090 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:25:36.090 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:25:36.090 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:25:36.090 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:25:36.090 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:25:36.090 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 79.3775ms
2024-07-31 10:25:36.090 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:25:36.090 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:25:36.090 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.090 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:25:36.090 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 91.9686ms
2024-07-31 10:25:36.100 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:25:36.105 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.105 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-07-31 10:25:36.105 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.105 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:25:36.105 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 97.9251ms
2024-07-31 10:25:36.105 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:25:36.106 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:25:36.106 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:25:36.106 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:25:36.106 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 105.7189ms
2024-07-31 10:32:36.948 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:32:36.948 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:32:36.948 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:32:36.948 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:32:36.948 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:32:36.948 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:32:36.948 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:32:36.948 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.9361ms
2024-07-31 10:32:36.955 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:32:36.955 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:32:36.955 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:32:36.955 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:32:36.956 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:32:36.956 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:32:36.956 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:32:36.956 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:32:36.956 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:32:36.956 -05:00 [DBG] Authorization was successful.
2024-07-31 10:32:36.956 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:32:36.957 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:32:36.957 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:32:36.957 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:32:36.957 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:32:36.957 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:32:36.958 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:32:36.958 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:32:36.959 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:32:37.008 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:32:37.010 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:32:37.011 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:32:37.011 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:32:37.011 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:32:37.011 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:32:37.019 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:32:37.019 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:32:37.019 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:32:37.019 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:32:37.019 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:32:37.022 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:32:37.022 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:32:37.023 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:32:37.023 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:32:37.023 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:32:37.023 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:32:37.025 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:32:37.025 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.4355ms.
2024-07-31 10:32:37.025 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:32:37.025 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:32:37.025 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:32:37.025 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:32:37.026 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:32:37.026 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:32:37.026 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 68.3219ms
2024-07-31 10:32:37.026 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:32:37.026 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:32:37.026 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:32:37.026 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:32:37.026 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 71.6841ms
2024-07-31 10:34:02.919 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:02.921 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:02.921 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:34:02.921 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:02.922 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:02.922 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:02.922 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:34:02.922 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 3.6408ms
2024-07-31 10:34:03.011 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:03.016 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:03.016 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:03.016 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:03.016 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:03.016 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:03.017 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:03.017 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:34:03.017 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:34:03.017 -05:00 [DBG] Authorization was successful.
2024-07-31 10:34:03.017 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:03.017 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:34:03.017 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:34:03.017 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:34:03.017 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:34:03.018 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:34:03.018 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:34:03.018 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:03.018 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:03.069 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:34:03.071 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:34:03.072 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:34:03.073 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:34:03.073 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:34:03.073 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:03.073 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:03.073 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:34:03.073 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:03.074 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:03.074 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:03.087 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:03.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.087 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:03.088 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:03.088 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:34:03.088 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:03.088 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:34:03.091 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:34:03.091 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.2517ms.
2024-07-31 10:34:03.091 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:34:03.091 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:34:03.091 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:34:03.091 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:34:03.092 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:34:03.092 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:34:03.092 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 74.2589ms
2024-07-31 10:34:03.092 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:03.092 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:34:03.092 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:03.092 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:34:03.092 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 93.891ms
2024-07-31 10:34:18.394 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:18.396 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:18.396 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:34:18.396 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:18.396 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:18.396 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:18.396 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:34:18.396 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.966ms
2024-07-31 10:34:18.400 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:18.401 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:18.401 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:18.401 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:18.401 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:18.401 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:18.401 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:18.401 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:34:18.401 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:34:18.401 -05:00 [DBG] Authorization was successful.
2024-07-31 10:34:18.402 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:18.402 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:34:18.402 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:34:18.402 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:34:18.402 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:34:18.402 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:34:18.402 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:34:18.402 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:18.403 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:18.446 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:34:18.449 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:34:18.450 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:34:18.451 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:34:18.451 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:34:18.451 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:18.451 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:18.451 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:34:18.451 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:18.451 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:18.451 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:18.452 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.453 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.453 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:18.453 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:18.453 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:34:18.453 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:18.453 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:34:18.456 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:34:18.456 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.1762ms.
2024-07-31 10:34:18.456 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:34:18.456 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:34:18.456 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:34:18.456 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:34:18.457 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:34:18.457 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:34:18.457 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 54.3941ms
2024-07-31 10:34:18.457 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:18.457 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:34:18.457 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:18.457 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:34:18.458 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 57.5881ms
2024-07-31 10:34:29.805 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:29.805 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:29.805 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:34:29.805 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:29.805 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:29.806 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:29.806 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:34:29.806 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.9089ms
2024-07-31 10:34:29.809 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:34:29.810 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:29.810 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:34:29.810 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:29.810 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:34:29.810 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:34:29.810 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:34:29.810 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:34:29.810 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:34:29.810 -05:00 [DBG] Authorization was successful.
2024-07-31 10:34:29.811 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:29.811 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:34:29.811 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:34:29.811 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:34:29.811 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:34:29.811 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:34:29.811 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:34:29.812 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:29.812 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:34:29.971 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:34:30.043 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:34:30.051 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:34:30.051 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:34:30.051 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:34:30.052 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:30.052 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:30.052 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:34:30.052 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:30.052 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:34:30.052 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:30.075 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.075 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.076 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.076 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.076 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:34:30.076 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:30.076 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:34:30.076 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:30.076 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:34:30.082 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:34:30.083 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 111.1771ms.
2024-07-31 10:34:30.083 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:34:30.083 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:34:30.083 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:34:30.083 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:34:30.083 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:34:30.083 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:34:30.083 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 271.9455ms
2024-07-31 10:34:30.084 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:34:30.084 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:34:30.084 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:34:30.084 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:34:30.084 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 274.5655ms
2024-07-31 10:44:23.234 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-07-31 10:44:23.234 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 10:44:23.234 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:44:23.234 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:44:23.234 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:44:23.236 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:44:23.237 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:44:23.237 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 4.0934ms
2024-07-31 10:44:23.241 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundary5A3Pz8i6GqOFrFZj 10768
2024-07-31 10:44:23.241 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-07-31 10:44:23.241 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-07-31 10:44:23.241 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-07-31 10:44:23.241 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:44:23.241 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:44:23.241 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:44:23.242 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:44:23.242 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:44:23.242 -05:00 [DBG] Authorization was successful.
2024-07-31 10:44:23.242 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-07-31 10:44:23.247 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:44:23.247 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:44:23.247 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-07-31 10:44:23.247 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:44:23.247 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:44:23.247 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:44:23.249 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:44:23.250 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:44:23.263 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:0000007B": started reading request body.
2024-07-31 10:44:23.263 -05:00 [DBG] Connection id "0HN5HE64TH3DA", Request id "0HN5HE64TH3DA:0000007B": done reading request body.
2024-07-31 10:44:23.296 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-07-31 10:44:23.297 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-07-31 10:44:23.299 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-07-31 10:44:23.299 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-07-31 10:44:23.299 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-07-31 10:44:23.300 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-07-31 10:44:23.300 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:44:23.300 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-07-31 10:44:23.300 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:44:23.300 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:44:23.300 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-07-31 10:44:23.300 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-07-31 10:44:23.353 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:44:23.356 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-07-31 10:44:23.359 -05:00 [WRN] El tipo de archivo no es válido
2024-07-31 10:44:23.360 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.0464ms.
2024-07-31 10:44:23.360 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:44:23.360 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:44:23.360 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:44:23.360 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:44:23.360 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:44:23.360 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 10:44:23.361 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 113.5559ms
2024-07-31 10:44:23.361 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-07-31 10:44:23.365 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 124.2465ms
2024-07-31 10:44:24.947 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:44:24.947 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:44:24.947 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:44:24.947 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:44:24.947 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:44:24.947 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:44:24.947 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:44:24.948 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.1799ms
2024-07-31 10:44:24.952 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:44:24.952 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:44:24.952 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:44:24.952 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:44:24.952 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:44:24.952 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:44:24.952 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:44:24.953 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:44:24.953 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:44:24.953 -05:00 [DBG] Authorization was successful.
2024-07-31 10:44:24.954 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:44:24.954 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:44:24.954 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:44:24.954 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:44:24.954 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:44:24.954 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:44:24.954 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:44:24.954 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:44:24.955 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:44:24.983 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:44:24.988 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:44:24.991 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:44:24.991 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:44:24.991 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:44:24.991 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:44:24.997 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:44:24.998 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:44:24.998 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:44:24.998 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:44:24.998 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:44:25.003 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:44:25.003 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.003 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.004 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:44:25.005 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:44:25.005 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:44:25.005 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:44:25.005 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:44:25.008 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:44:25.008 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.4794ms.
2024-07-31 10:44:25.008 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:44:25.008 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:44:25.008 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:44:25.008 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:44:25.008 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:44:25.008 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:44:25.008 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 54.04ms
2024-07-31 10:44:25.008 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:44:25.008 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:44:25.009 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:44:25.009 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:44:25.009 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 57.0559ms
2024-07-31 10:54:27.435 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:54:27.435 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:27.435 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:54:27.435 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:27.435 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:27.435 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:27.436 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:54:27.436 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:54:27.436 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 2.0781ms
2024-07-31 10:54:27.436 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:54:27.437 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:54:27.437 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:27.437 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:27.437 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:27.437 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:27.438 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:54:27.438 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:27.438 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:54:27.438 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:54:27.438 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:54:27.439 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:54:27.439 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:54:27.439 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:54:27.439 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:54:27.439 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:54:27.482 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:54:27.482 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:54:27.482 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:27.482 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:27.482 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:27.482 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:27.482 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:27.482 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:27.483 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:54:27.483 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:54:27.483 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:54:27.483 -05:00 [DBG] Authorization was successful.
2024-07-31 10:54:27.483 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:27.483 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:54:27.483 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:54:27.483 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:54:27.483 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:54:27.483 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:54:27.483 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:54:27.483 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:54:27.484 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.483 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:54:27.484 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:27.484 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:27.527 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:54:27.529 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:54:27.533 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:54:27.551 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:54:27.551 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.3272ms.
2024-07-31 10:54:27.551 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:54:27.552 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:54:27.553 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:54:27.553 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:54:27.554 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:54:27.554 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:54:27.554 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:54:27.555 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:54:27.555 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.578 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.578 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:54:27.578 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:27.578 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:27.578 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:54:27.581 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:54:27.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:27.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:27.582 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:27.582 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.582 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 10:54:27.582 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.582 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:54:27.582 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 100.2264ms.
2024-07-31 10:54:27.582 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:54:27.582 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:54:27.583 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:54:27.583 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:54:27.583 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:54:27.583 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:54:27.583 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 144.1256ms
2024-07-31 10:54:27.583 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:27.583 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:54:27.583 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.583 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:54:27.583 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 147.0119ms
2024-07-31 10:54:27.605 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.610 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:54:27.610 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:27.610 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:27.611 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:54:27.621 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:54:27.622 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.623 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:54:27.623 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.623 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:54:27.624 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 140.4464ms
2024-07-31 10:54:27.625 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:27.625 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:54:27.626 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:27.626 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:54:27.626 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 143.8128ms
2024-07-31 10:54:29.560 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:54:29.560 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:54:29.560 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:54:29.560 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:29.560 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:29.560 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:29.560 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:54:29.561 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.1912ms
2024-07-31 10:54:29.585 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:54:29.585 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:54:29.585 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:54:29.585 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:54:29.585 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:29.586 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:29.586 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:29.586 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:54:29.586 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:54:29.586 -05:00 [DBG] Authorization was successful.
2024-07-31 10:54:29.586 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:54:29.586 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:54:29.586 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:54:29.586 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:54:29.586 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:54:29.586 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:54:29.586 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:54:29.587 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:29.587 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:29.620 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:54:29.622 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:54:29.626 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:54:29.626 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:54:29.626 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:54:29.626 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:29.627 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:29.627 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:54:29.627 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:29.627 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:29.628 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:54:29.634 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.634 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.635 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.635 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:29.635 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:29.635 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:54:29.635 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:29.635 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:54:29.638 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:54:29.638 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.6217ms.
2024-07-31 10:54:29.638 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:54:29.638 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:54:29.638 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:54:29.638 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:54:29.638 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:54:29.638 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:54:29.639 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 52.0412ms
2024-07-31 10:54:29.639 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:54:29.639 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:54:29.639 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:29.639 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:54:29.639 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 54.5861ms
2024-07-31 10:54:53.369 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:54:53.369 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:53.374 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-07-31 10:54:53.374 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-07-31 10:54:53.375 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-07-31 10:54:53.375 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:54:53.375 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:53.375 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:53.375 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:53.375 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:53.375 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:53.375 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:54:53.375 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:53.375 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 6.3452ms
2024-07-31 10:54:53.375 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:53.376 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 10:54:53.376 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:53.376 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-07-31 10:54:53.376 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:54:53.376 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:54:53.376 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:54:53.376 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:54:53.377 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:54:53.377 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:54:53.377 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-07-31 10:54:53.400 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:54:53.401 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:54:53.401 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:54:53.401 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:54:53.401 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.403 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.403 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-07-31 10:54:53.403 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:54:53.413 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:53.413 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (10ms).
2024-07-31 10:54:53.413 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-07-31 10:54:53.414 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:53.414 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-07-31 10:54:53.414 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:54:53.417 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:54:53.417 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:54:53.417 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:54:53.417 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:54:53.418 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:54:53.418 -05:00 [DBG] Authorization was successful.
2024-07-31 10:54:53.418 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:53.418 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:54:53.418 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:54:53.418 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:54:53.418 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:54:53.418 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:54:53.418 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:54:53.418 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:53.419 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:54:53.448 -05:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-07-31 10:54:53.448 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:54:53.449 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:53.450 -05:00 [DBG] Consultando historial de registros de archivos...
2024-07-31 10:54:53.451 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:53.451 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:54:53.451 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.451 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:54:53.451 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.451 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:54:53.451 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.158ms.
2024-07-31 10:54:53.451 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:54:53.451 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:54:53.451 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:54:53.451 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:54:53.452 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:54:53.452 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:54:53.452 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:54:53.453 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 76.2878ms
2024-07-31 10:54:53.453 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-07-31 10:54:53.454 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:54:53.454 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.454 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:54:53.455 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 81.7675ms
2024-07-31 10:54:53.455 -05:00 [INF] Consulta de historial exitosa
2024-07-31 10:54:53.458 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9093ms.
2024-07-31 10:54:53.458 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:54:53.459 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:54:53.459 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:54:53.459 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:54:53.459 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:54:53.459 -05:00 [INF] Executing OkObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:54:53.459 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:54:53.459 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:54:53.459 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.459 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.459 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:54:53.460 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:53.460 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:54:53.460 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:54:53.472 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-07-31 10:54:53.476 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.476 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-07-31 10:54:53.476 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.476 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:54:53.476 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 57.8635ms
2024-07-31 10:54:53.476 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-07-31 10:54:53.477 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:54:53.477 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:54:53.477 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:54:53.477 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 73.9801ms
2024-07-31 10:55:00.027 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:55:00.027 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:55:00.027 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 10:55:00.027 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:55:00.027 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:55:00.027 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:55:00.027 -05:00 [DBG] The request is a preflight request.
2024-07-31 10:55:00.028 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.9996ms
2024-07-31 10:55:00.040 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 10:55:00.040 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:55:00.040 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 10:55:00.041 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:55:00.041 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 10:55:00.041 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 10:55:00.042 -05:00 [INF] CORS policy execution successful.
2024-07-31 10:55:00.043 -05:00 [DBG] Successfully validated the token.
2024-07-31 10:55:00.043 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 10:55:00.043 -05:00 [DBG] Authorization was successful.
2024-07-31 10:55:00.044 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:55:00.045 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 10:55:00.047 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 10:55:00.047 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 10:55:00.047 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 10:55:00.048 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 10:55:00.048 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 10:55:00.048 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:55:00.049 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 10:55:00.082 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 10:55:00.085 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 10:55:00.086 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 10:55:00.086 -05:00 [DBG] Creating DbConnection.
2024-07-31 10:55:00.086 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 10:55:00.086 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:55:00.086 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:55:00.086 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 10:55:00.086 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:55:00.086 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 10:55:00.086 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:55:00.090 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 10:55:00.090 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.090 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 10:55:00.091 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:55:00.091 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 10:55:00.091 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:55:00.092 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 10:55:00.094 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 10:55:00.094 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.3105ms.
2024-07-31 10:55:00.095 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 10:55:00.095 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 10:55:00.095 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 10:55:00.095 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 10:55:00.095 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 10:55:00.095 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 10:55:00.095 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 47.1268ms
2024-07-31 10:55:00.095 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 10:55:00.095 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 10:55:00.095 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 10:55:00.096 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 10:55:00.096 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 55.4892ms
2024-07-31 13:51:01.152 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-07-31 13:51:01.327 -05:00 [DBG] Hosting starting
2024-07-31 13:51:01.444 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-07-31 13:51:01.456 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-07-31 13:51:01.466 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-07-31 13:51:01.477 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-07-31 13:51:01.480 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 13:51:01.482 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-07-31 13:51:01.484 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-07-31 13:51:01.489 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-07-31 13:51:01.492 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-07-31 13:51:01.496 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-07-31 13:51:01.497 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-07-31 13:51:01.865 -05:00 [INF] Now listening on: https://localhost:7299
2024-07-31 13:51:01.865 -05:00 [INF] Now listening on: http://localhost:5219
2024-07-31 13:51:01.865 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-07-31 13:51:01.865 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-07-31 13:51:01.865 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-07-31 13:51:01.865 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-07-31 13:51:01.866 -05:00 [INF] Hosting environment: Development
2024-07-31 13:51:01.866 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-07-31 13:51:01.866 -05:00 [DBG] Hosting started
2024-07-31 13:51:02.040 -05:00 [DBG] Connection id "0HN5HI6SO1P7C" accepted.
2024-07-31 13:51:02.040 -05:00 [DBG] Connection id "0HN5HI6SO1P7D" accepted.
2024-07-31 13:51:02.044 -05:00 [DBG] Connection id "0HN5HI6SO1P7D" started.
2024-07-31 13:51:02.044 -05:00 [DBG] Connection id "0HN5HI6SO1P7C" started.
2024-07-31 13:51:02.046 -05:00 [DBG] Connection id "0HN5HI6SO1P7C" received FIN.
2024-07-31 13:51:02.046 -05:00 [DBG] Connection id "0HN5HI6SO1P7D" received FIN.
2024-07-31 13:51:02.127 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 13:51:02.127 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-07-31 13:51:02.187 -05:00 [DBG] Connection id "0HN5HI6SO1P7D" stopped.
2024-07-31 13:51:02.187 -05:00 [DBG] Connection id "0HN5HI6SO1P7C" stopped.
2024-07-31 13:51:02.190 -05:00 [DBG] Connection id "0HN5HI6SO1P7C" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 13:51:02.190 -05:00 [DBG] Connection id "0HN5HI6SO1P7D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 13:51:02.357 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" accepted.
2024-07-31 13:51:02.358 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" started.
2024-07-31 13:51:02.649 -05:00 [DBG] Connection 0HN5HI6SO1P7E established using the following protocol: "Tls12"
2024-07-31 13:51:02.839 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-07-31 13:51:03.432 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-07-31 13:51:03.505 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-07-31 13:51:03.507 -05:00 [DBG] Request did not match any endpoints
2024-07-31 13:51:03.929 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-07-31 13:51:03.931 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-07-31 13:51:04.272 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-07-31 13:51:04.273 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-07-31 13:51:04.279 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1451.0649ms
2024-07-31 13:51:04.305 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-07-31 13:51:04.305 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-07-31 13:51:04.323 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 17.7902ms
2024-07-31 13:51:04.478 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 173.1904ms
2024-07-31 13:51:04.582 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-07-31 13:51:04.582 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-07-31 13:51:04.582 -05:00 [DBG] Request did not match any endpoints
2024-07-31 13:51:04.817 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.0186ms
2024-07-31 14:24:07.443 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" accepted.
2024-07-31 14:24:07.446 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" started.
2024-07-31 14:24:07.473 -05:00 [DBG] Connection 0HN5HI6SO1P7F established using the following protocol: "Tls12"
2024-07-31 14:24:07.483 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-07-31 14:24:07.503 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 14:24:07.504 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 14:24:07.506 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 14:24:07.507 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 14:24:07.507 -05:00 [INF] CORS policy execution successful.
2024-07-31 14:24:07.508 -05:00 [DBG] The request is a preflight request.
2024-07-31 14:24:07.509 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 26.5108ms
2024-07-31 14:24:07.513 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 60
2024-07-31 14:24:07.515 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-07-31 14:24:07.519 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-07-31 14:24:07.519 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 14:24:07.520 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 14:24:07.520 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 14:24:07.520 -05:00 [INF] CORS policy execution successful.
2024-07-31 14:24:07.621 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-07-31 14:24:07.626 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 14:24:07.651 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-07-31 14:24:07.653 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 14:24:07.653 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 14:24:07.653 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 14:24:07.654 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 14:24:07.654 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 14:24:07.656 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 14:24:07.818 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-07-31 14:24:07.843 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-07-31 14:24:07.859 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 14:24:07.863 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-07-31 14:24:07.864 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-07-31 14:24:07.869 -05:00 [DBG] Connection id "0HN5HI6SO1P7F", Request id "0HN5HI6SO1P7F:00000003": started reading request body.
2024-07-31 14:24:07.869 -05:00 [DBG] Connection id "0HN5HI6SO1P7F", Request id "0HN5HI6SO1P7F:00000003": done reading request body.
2024-07-31 14:24:07.873 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-07-31 14:24:07.874 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 14:24:07.874 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 14:24:07.874 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-07-31 14:24:07.883 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-07-31 14:24:08.006 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-07-31 14:24:08.026 -05:00 [DBG] Iniciando sesión...
2024-07-31 14:24:09.039 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 14:24:09.098 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-07-31 14:24:09.404 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 14:24:09.456 -05:00 [DBG] Creating DbConnection.
2024-07-31 14:24:09.499 -05:00 [DBG] Created DbConnection. (37ms).
2024-07-31 14:24:09.504 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:09.929 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:09.932 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 14:24:09.939 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-07-31 14:24:09.951 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2024-07-31 14:24:09.960 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 14:24:10.029 -05:00 [INF] Executed DbCommand (66ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-07-31 14:24:10.083 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 14:24:10.123 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.141 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 100ms reading results.
2024-07-31 14:24:10.148 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.156 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (9ms).
2024-07-31 14:24:10.159 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-07-31 14:24:10.165 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-07-31 14:24:10.166 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.167 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.167 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 14:24:10.167 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 14:24:10.167 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 14:24:10.168 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 14:24:10.176 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-07-31 14:24:10.192 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 14:24:10.203 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 14:24:10.206 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.206 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 30ms reading results.
2024-07-31 14:24:10.206 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.206 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 14:24:10.240 -05:00 [INF] Inicio de sesión exitoso
2024-07-31 14:24:10.247 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2235.1742ms.
2024-07-31 14:24:10.251 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 14:24:10.253 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 14:24:10.254 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 14:24:10.254 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 14:24:10.255 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 14:24:10.255 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-07-31 14:24:10.268 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 2608.0662ms
2024-07-31 14:24:10.268 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-07-31 14:24:10.271 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 14:24:10.275 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.279 -05:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-07-31 14:24:10.280 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 2767.0523ms
2024-07-31 14:24:10.287 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 14:24:10.287 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 14:24:10.287 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 14:24:10.288 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 14:24:10.289 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 14:24:10.289 -05:00 [INF] CORS policy execution successful.
2024-07-31 14:24:10.289 -05:00 [DBG] The request is a preflight request.
2024-07-31 14:24:10.289 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 2.4749ms
2024-07-31 14:24:10.308 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 14:24:10.308 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 14:24:10.309 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 14:24:10.309 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 14:24:10.312 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 14:24:10.314 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 14:24:10.314 -05:00 [INF] CORS policy execution successful.
2024-07-31 14:24:10.380 -05:00 [DBG] Successfully validated the token.
2024-07-31 14:24:10.382 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 14:24:10.387 -05:00 [DBG] Authorization was successful.
2024-07-31 14:24:10.388 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 14:24:10.395 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 14:24:10.395 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 14:24:10.395 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 14:24:10.396 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 14:24:10.396 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 14:24:10.396 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 14:24:10.396 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 14:24:10.400 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 14:24:10.408 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 14:24:10.409 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 14:24:10.413 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 14:24:10.413 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 14:24:10.413 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 14:24:10.414 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 14:24:10.456 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 14:24:10.461 -05:00 [DBG] Consultando libros...
2024-07-31 14:24:10.491 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 14:24:10.509 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-07-31 14:24:10.581 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 14:24:10.583 -05:00 [DBG] Creating DbConnection.
2024-07-31 14:24:10.583 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 14:24:10.583 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.583 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.583 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 14:24:10.583 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 14:24:10.583 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 14:24:10.583 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 14:24:10.599 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 14:24:10.600 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.600 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-07-31 14:24:10.600 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.601 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 14:24:10.603 -05:00 [INF] Consulta de libros exitosa
2024-07-31 14:24:10.603 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 147.0687ms.
2024-07-31 14:24:10.604 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 14:24:10.604 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 14:24:10.604 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 14:24:10.604 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 14:24:10.604 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 14:24:10.604 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 14:24:10.612 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 215.394ms
2024-07-31 14:24:10.612 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 14:24:10.612 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 14:24:10.612 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 14:24:10.612 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 14:24:10.613 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 312.5935ms
2024-07-31 15:47:31.522 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" received FIN.
2024-07-31 15:47:31.526 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" received FIN.
2024-07-31 15:47:31.547 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" is closed. The last processed stream ID was 7.
2024-07-31 15:47:31.547 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" is closed. The last processed stream ID was 7.
2024-07-31 15:47:31.548 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 15:47:31.548 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-07-31 15:47:31.564 -05:00 [DBG] The connection queue processing loop for 0HN5HI6SO1P7E completed.
2024-07-31 15:47:31.568 -05:00 [DBG] Connection id "0HN5HI6SO1P7E" stopped.
2024-07-31 15:47:31.620 -05:00 [DBG] The connection queue processing loop for 0HN5HI6SO1P7F completed.
2024-07-31 15:47:31.621 -05:00 [DBG] Connection id "0HN5HI6SO1P7F" stopped.
2024-07-31 15:56:07.136 -05:00 [DBG] Connection id "0HN5HI6SO1P7G" accepted.
2024-07-31 15:56:07.142 -05:00 [DBG] Connection id "0HN5HI6SO1P7G" started.
2024-07-31 15:56:07.183 -05:00 [DBG] Connection 0HN5HI6SO1P7G established using the following protocol: "Tls12"
2024-07-31 15:56:07.191 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 15:56:07.192 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 15:56:07.192 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 15:56:07.193 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 15:56:07.193 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 15:56:07.193 -05:00 [INF] CORS policy execution successful.
2024-07-31 15:56:07.193 -05:00 [DBG] The request is a preflight request.
2024-07-31 15:56:07.194 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 2.946ms
2024-07-31 15:56:07.230 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-07-31 15:56:07.239 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-07-31 15:56:07.240 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-07-31 15:56:07.240 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 15:56:07.240 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 15:56:07.240 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 15:56:07.240 -05:00 [INF] CORS policy execution successful.
2024-07-31 15:56:07.243 -05:00 [DBG] Successfully validated the token.
2024-07-31 15:56:07.244 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 15:56:07.247 -05:00 [DBG] Authorization was successful.
2024-07-31 15:56:07.248 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 15:56:07.249 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-07-31 15:56:07.249 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 15:56:07.249 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 15:56:07.249 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 15:56:07.249 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 15:56:07.250 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 15:56:07.250 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 15:56:07.254 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-07-31 15:56:07.254 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 15:56:07.255 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-07-31 15:56:07.255 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 15:56:07.255 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 15:56:07.255 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-07-31 15:56:07.255 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-07-31 15:56:07.299 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-07-31 15:56:07.302 -05:00 [DBG] Consultando libros...
2024-07-31 15:56:07.380 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 15:56:07.387 -05:00 [DBG] Creating DbConnection.
2024-07-31 15:56:07.387 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 15:56:07.387 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:07.463 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:07.463 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 15:56:07.463 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 15:56:07.464 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 15:56:07.464 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 15:56:07.487 -05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-07-31 15:56:07.487 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:07.488 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-07-31 15:56:07.488 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:07.488 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 15:56:07.490 -05:00 [INF] Consulta de libros exitosa
2024-07-31 15:56:07.490 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 191.2288ms.
2024-07-31 15:56:07.491 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 15:56:07.491 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 15:56:07.491 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 15:56:07.491 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 15:56:07.491 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 15:56:07.491 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 15:56:07.492 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 241.9331ms
2024-07-31 15:56:07.492 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-07-31 15:56:07.492 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 15:56:07.492 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:07.492 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 15:56:07.492 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 276.7906ms
2024-07-31 15:56:11.668 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 15:56:11.670 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 15:56:11.671 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-07-31 15:56:11.671 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 15:56:11.671 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 15:56:11.671 -05:00 [INF] CORS policy execution successful.
2024-07-31 15:56:11.671 -05:00 [DBG] The request is a preflight request.
2024-07-31 15:56:11.671 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 3.3363ms
2024-07-31 15:56:11.679 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-07-31 15:56:11.682 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 15:56:11.682 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-07-31 15:56:11.682 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 15:56:11.682 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-07-31 15:56:11.682 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-07-31 15:56:11.682 -05:00 [INF] CORS policy execution successful.
2024-07-31 15:56:11.683 -05:00 [DBG] Successfully validated the token.
2024-07-31 15:56:11.683 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-07-31 15:56:11.688 -05:00 [DBG] Authorization was successful.
2024-07-31 15:56:11.688 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 15:56:11.692 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-07-31 15:56:11.692 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-07-31 15:56:11.692 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-07-31 15:56:11.693 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-07-31 15:56:11.693 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-07-31 15:56:11.693 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-07-31 15:56:11.693 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 15:56:11.695 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-07-31 15:56:11.745 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-07-31 15:56:11.750 -05:00 [DBG] Consultando archivos sin eliminar...
2024-07-31 15:56:11.754 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-07-31 15:56:11.758 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-07-31 15:56:11.777 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-07-31 15:56:11.791 -05:00 [DBG] Creating DbConnection.
2024-07-31 15:56:11.791 -05:00 [DBG] Created DbConnection. (0ms).
2024-07-31 15:56:11.791 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:11.792 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:11.792 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-07-31 15:56:11.792 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-07-31 15:56:11.792 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-07-31 15:56:11.792 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 15:56:11.808 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-07-31 15:56:11.820 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.844 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.844 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.844 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.844 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-07-31 15:56:11.845 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:11.845 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 36ms reading results.
2024-07-31 15:56:11.845 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:11.846 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-07-31 15:56:11.849 -05:00 [INF] Consulta de archivos exitosa
2024-07-31 15:56:11.849 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.1502ms.
2024-07-31 15:56:11.849 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-07-31 15:56:11.849 -05:00 [DBG] No information found on request to perform content negotiation.
2024-07-31 15:56:11.849 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-07-31 15:56:11.849 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-07-31 15:56:11.849 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-07-31 15:56:11.849 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-07-31 15:56:11.869 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 176.2245ms
2024-07-31 15:56:11.869 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-07-31 15:56:11.869 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-07-31 15:56:11.869 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-07-31 15:56:11.870 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-07-31 15:56:11.870 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 191.7337ms
