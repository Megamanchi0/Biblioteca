2024-08-02 16:36:02.799 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-08-02 16:36:03.074 -05:00 [DBG] Hosting starting
2024-08-02 16:36:03.378 -05:00 [INF] User profile is available. Using 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-02 16:36:03.393 -05:00 [DBG] Reading data from file 'C:\Users\spatino\AppData\Local\ASP.NET\DataProtection-Keys\key-12ed5171-7863-4d3e-a216-6f5439158e60.xml'.
2024-08-02 16:36:03.416 -05:00 [DBG] Found key {12ed5171-7863-4d3e-a216-6f5439158e60}.
2024-08-02 16:36:03.434 -05:00 [DBG] Considering key {12ed5171-7863-4d3e-a216-6f5439158e60} with expiration date 2024-09-28 19:27:42Z as default key.
2024-08-02 16:36:03.441 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-02 16:36:03.445 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-08-02 16:36:03.448 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-08-02 16:36:03.454 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-08-02 16:36:03.456 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-08-02 16:36:03.459 -05:00 [DBG] Using key {12ed5171-7863-4d3e-a216-6f5439158e60} as the default key.
2024-08-02 16:36:03.460 -05:00 [DBG] Key ring with default key {12ed5171-7863-4d3e-a216-6f5439158e60} was loaded during application startup.
2024-08-02 16:36:03.960 -05:00 [INF] Now listening on: https://localhost:7299
2024-08-02 16:36:03.960 -05:00 [INF] Now listening on: http://localhost:5219
2024-08-02 16:36:03.961 -05:00 [DBG] Loaded hosting startup assembly biblioteca-backend
2024-08-02 16:36:03.961 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-08-02 16:36:03.961 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-08-02 16:36:03.961 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-02 16:36:03.962 -05:00 [INF] Hosting environment: Development
2024-08-02 16:36:03.962 -05:00 [INF] Content root path: C:\Users\spatino\Documents\Proyeco - Biblioteca\biblioteca-backend
2024-08-02 16:36:03.962 -05:00 [DBG] Hosting started
2024-08-02 16:36:04.142 -05:00 [DBG] Connection id "0HN5J7CE733JF" accepted.
2024-08-02 16:36:04.157 -05:00 [DBG] Connection id "0HN5J7CE733JG" accepted.
2024-08-02 16:36:04.230 -05:00 [DBG] Connection id "0HN5J7CE733JF" received FIN.
2024-08-02 16:36:04.232 -05:00 [DBG] Connection id "0HN5J7CE733JG" received FIN.
2024-08-02 16:36:04.233 -05:00 [DBG] Connection id "0HN5J7CE733JF" started.
2024-08-02 16:36:04.247 -05:00 [DBG] Connection id "0HN5J7CE733JG" started.
2024-08-02 16:36:04.495 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-02 16:36:04.495 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-08-02 16:36:04.562 -05:00 [DBG] Connection id "0HN5J7CE733JF" stopped.
2024-08-02 16:36:04.562 -05:00 [DBG] Connection id "0HN5J7CE733JG" stopped.
2024-08-02 16:36:04.566 -05:00 [DBG] Connection id "0HN5J7CE733JF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-02 16:36:04.568 -05:00 [DBG] Connection id "0HN5J7CE733JG" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-08-02 16:36:05.326 -05:00 [DBG] Connection id "0HN5J7CE733JH" accepted.
2024-08-02 16:36:05.327 -05:00 [DBG] Connection id "0HN5J7CE733JH" started.
2024-08-02 16:36:06.358 -05:00 [DBG] Connection 0HN5J7CE733JH established using the following protocol: "Tls12"
2024-08-02 16:36:06.877 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/index.html - null null
2024-08-02 16:36:07.674 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-08-02 16:36:07.727 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-08-02 16:36:07.728 -05:00 [DBG] Request did not match any endpoints
2024-08-02 16:36:07.962 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-08-02 16:36:07.965 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-08-02 16:36:08.080 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-08-02 16:36:08.082 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-08-02 16:36:08.091 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/index.html - 200 null text/html;charset=utf-8 1224.2664ms
2024-08-02 16:36:08.270 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - null null
2024-08-02 16:36:08.293 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/_vs/browserLink - null null
2024-08-02 16:36:08.297 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_framework/aspnetcore-browser-refresh.js - 200 13772 application/javascript; charset=utf-8 27.0787ms
2024-08-02 16:36:08.541 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/_vs/browserLink - 200 null text/javascript; charset=UTF-8 247.9013ms
2024-08-02 16:36:08.809 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - null null
2024-08-02 16:36:08.810 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-08-02 16:36:08.810 -05:00 [DBG] Request did not match any endpoints
2024-08-02 16:36:09.252 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 443.6153ms
2024-08-02 16:44:50.723 -05:00 [DBG] Connection id "0HN5J7CE733JI" accepted.
2024-08-02 16:44:50.742 -05:00 [DBG] Connection id "0HN5J7CE733JI" started.
2024-08-02 16:44:50.756 -05:00 [DBG] Connection 0HN5J7CE733JI established using the following protocol: "Tls12"
2024-08-02 16:44:50.775 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-08-02 16:44:50.786 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:44:50.787 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:44:50.791 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:50.795 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:50.796 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:50.797 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:44:50.798 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 23.3585ms
2024-08-02 16:44:50.801 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-08-02 16:44:50.805 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:44:50.808 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-08-02 16:44:50.808 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:44:50.809 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:50.810 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:50.810 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:50.949 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-02 16:44:50.951 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:44:50.981 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-08-02 16:44:50.983 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:44:50.983 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:44:50.983 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:44:50.984 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:44:50.984 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:44:50.988 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:44:51.242 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-08-02 16:44:51.288 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:44:51.318 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:44:51.323 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-08-02 16:44:51.325 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-02 16:44:51.345 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000003": started reading request body.
2024-08-02 16:44:51.345 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000003": done reading request body.
2024-08-02 16:44:51.352 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-08-02 16:44:51.353 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:44:51.353 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:44:51.354 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:44:51.371 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:44:51.621 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:44:51.654 -05:00 [DBG] Iniciando sesión...
2024-08-02 16:44:53.278 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:44:53.389 -05:00 [DBG] Compiling query expression: 
'DbSet<Perfil>()
    .FirstOrDefault(p => p.Correo == __8__locals1_logInModel_Correo_0 && p.Contrasena == __claveCifrada_1)'
2024-08-02 16:44:53.716 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Perfil>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Perfil.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Perfil.Apellido (string) Required, 1], [Property: Perfil.Contrasena (string) Required, 2], [Property: Perfil.Correo (string) Required, 3], [Property: Perfil.Direccion (string) Required, 4], [Property: Perfil.IdRol (int) Required FK Index, 5], [Property: Perfil.Nombre (string) Required, 6], [Property: Perfil.Telefono (string) Required, 7] }
        SELECT TOP(1) p.Id, p.Apellido, p.Contrasena, p.Correo, p.Direccion, p.IdRol, p.Nombre, p.Telefono
        FROM Perfil AS p
        WHERE (p.Correo == @__8__locals1_logInModel_Correo_0) && (p.Contrasena == @__claveCifrada_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Perfil>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-08-02 16:44:53.766 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:44:53.799 -05:00 [DBG] Created DbConnection. (33ms).
2024-08-02 16:44:53.803 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.277 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.281 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:44:54.290 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-08-02 16:44:54.302 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2024-08-02 16:44:54.322 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:44:54.389 -05:00 [INF] Executed DbCommand (76ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:44:54.454 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:54.505 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.525 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 124ms reading results.
2024-08-02 16:44:54.531 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.538 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (7ms).
2024-08-02 16:44:54.541 -05:00 [DBG] Compiling query expression: 
'DbSet<Rol>()
    .FirstOrDefault(r => r.Id == ___perfil_IdRol_0)'
2024-08-02 16:44:54.549 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Rol>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Rol.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Rol.Nombre (string) Required, 1] }
        SELECT TOP(1) r.Id, r.Nombre
        FROM Rol AS r
        WHERE r.Id == @___perfil_IdRol_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Rol>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-08-02 16:44:54.550 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.553 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.553 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:44:54.553 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:54.553 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:54.554 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:44:54.562 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:44:54.586 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:54.599 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:54.605 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.605 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 42ms reading results.
2024-08-02 16:44:54.605 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.605 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:44:54.646 -05:00 [INF] Inicio de sesión exitoso
2024-08-02 16:44:54.654 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3027.5057ms.
2024-08-02 16:44:54.659 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:44:54.662 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:44:54.663 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:44:54.663 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:44:54.665 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:44:54.666 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:44:54.677 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 3687.3713ms
2024-08-02 16:44:54.678 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:44:54.721 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:44:54.739 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-02 16:44:54.740 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:44:54.740 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:44:54.740 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:54.741 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:54.741 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:54.741 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:44:54.741 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 2.309ms
2024-08-02 16:44:54.741 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-08-02 16:44:54.741 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-02 16:44:54.742 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:44:54.742 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:54.742 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:54.742 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:54.742 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:44:54.742 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.7284ms
2024-08-02 16:44:54.751 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-02 16:44:54.752 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:44:54.756 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:54.768 -05:00 [DBG] Disposed connection to database '' on server '' (15ms).
2024-08-02 16:44:54.752 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-02 16:44:54.772 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 3971.506ms
2024-08-02 16:44:54.773 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:44:54.773 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-08-02 16:44:54.775 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-02 16:44:54.780 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-08-02 16:44:54.780 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:44:54.781 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:54.781 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:54.781 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:54.781 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:44:54.782 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:44:54.782 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:44:54.898 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:44:54.900 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:44:54.901 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:44:54.902 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:44:54.919 -05:00 [DBG] Authorization was successful.
2024-08-02 16:44:54.919 -05:00 [DBG] Authorization was successful.
2024-08-02 16:44:54.920 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:44:54.931 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:44:54.932 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-08-02 16:44:54.932 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:44:54.932 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:44:54.933 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:44:54.933 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:44:54.933 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:44:54.933 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-02 16:44:54.934 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-02 16:44:54.934 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:44:54.934 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:44:54.934 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:44:54.934 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:44:54.934 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:44:54.935 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-02 16:44:54.935 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:44:54.936 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:44:55.014 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:44:55.014 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:44:55.015 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-02 16:44:55.017 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:44:55.017 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:44:55.017 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:44:55.017 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:44:55.050 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:44:55.061 -05:00 [DBG] Consultando libros...
2024-08-02 16:44:55.078 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:44:55.082 -05:00 [DBG] Compiling query expression: 
'DbSet<Genero>()'
2024-08-02 16:44:55.087 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Genero>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Genero.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Genero.Nombre (string) Required, 1] }
        SELECT g.Id, g.Nombre
        FROM Genero AS g), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Genero>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:44:55.097 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:44:55.102 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:44:55.102 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:44:55.105 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.107 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.107 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:44:55.107 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:55.108 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:55.108 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-02 16:44:55.114 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-08-02 16:44:55.170 -05:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-02 16:44:55.190 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.197 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.197 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.198 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.199 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.199 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.199 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:44:55.204 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.204 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 34ms reading results.
2024-08-02 16:44:55.207 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.208 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:44:55.211 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 197.1024ms.
2024-08-02 16:44:55.214 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:44:55.214 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:44:55.214 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:44:55.214 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:44:55.214 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:44:55.215 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:44:55.217 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:44:55.219 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:44:55.219 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:44:55.219 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.219 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.219 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:44:55.219 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:55.220 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:44:55.220 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 286.6924ms
2024-08-02 16:44:55.220 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-02 16:44:55.220 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:44:55.222 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:44:55.223 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.223 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:44:55.224 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 450.3743ms
2024-08-02 16:44:55.247 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-02 16:44:55.249 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.250 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:44:55.250 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.250 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:44:55.252 -05:00 [INF] Consulta de libros exitosa
2024-08-02 16:44:55.253 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 202.5382ms.
2024-08-02 16:44:55.253 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:44:55.253 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:44:55.253 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:44:55.253 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:44:55.253 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:44:55.254 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:44:55.261 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 326.2372ms
2024-08-02 16:44:55.261 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:44:55.261 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:44:55.261 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:44:55.261 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:44:55.262 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 510.5712ms
2024-08-02 16:45:19.486 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:45:19.486 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:45:19.486 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:45:19.486 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:45:19.487 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:45:19.487 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:45:19.487 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:45:19.487 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.5622ms
2024-08-02 16:45:19.490 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:45:19.495 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:45:19.495 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:45:19.495 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:45:19.495 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:45:19.496 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:45:19.496 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:45:19.499 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:45:19.499 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:45:19.501 -05:00 [DBG] Authorization was successful.
2024-08-02 16:45:19.501 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:45:19.506 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:45:19.507 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:45:19.507 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:45:19.507 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:45:19.508 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:45:19.508 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:45:19.512 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:45:19.515 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:45:19.549 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:45:19.554 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:45:19.665 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:45:19.668 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)
    .OrderByDescending(A => A.FechaCarga)'
2024-08-02 16:45:19.715 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL
        ORDER BY a.FechaCarga DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:45:19.732 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:45:19.732 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:45:19.732 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:19.733 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:19.733 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:45:19.733 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:45:19.733 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:45:19.733 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:45:19.763 -05:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:45:19.779 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.802 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.803 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:19.803 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:19.803 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 39ms reading results.
2024-08-02 16:45:19.803 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:19.803 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:45:19.805 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:45:19.806 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 256.9012ms.
2024-08-02 16:45:19.806 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:45:19.806 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:45:19.806 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:45:19.806 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:45:19.806 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:45:19.806 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:45:19.832 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 323.618ms
2024-08-02 16:45:19.832 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:45:19.832 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:45:19.832 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:19.832 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:45:19.832 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 343.1869ms
2024-08-02 16:45:42.901 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-08-02 16:45:42.901 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:45:42.901 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:45:42.901 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:45:42.901 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:45:42.901 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:45:42.901 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:45:42.902 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 0.761ms
2024-08-02 16:45:42.912 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundaryci4XgdGBhxopRABQ 60731
2024-08-02 16:45:42.913 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:45:42.913 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:45:42.913 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:45:42.913 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:45:42.913 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:45:42.913 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:45:42.914 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:45:42.914 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:45:42.914 -05:00 [DBG] Authorization was successful.
2024-08-02 16:45:42.914 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:45:42.922 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:45:42.922 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:45:42.922 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-02 16:45:42.923 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:45:42.923 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:45:42.923 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:45:42.924 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:45:42.925 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:45:42.933 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000013": started reading request body.
2024-08-02 16:45:42.933 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000013": done reading request body.
2024-08-02 16:45:42.949 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-02 16:45:42.952 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-08-02 16:45:42.954 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:45:42.955 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:45:42.955 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-02 16:45:42.956 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:45:42.956 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:45:42.957 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:45:42.959 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:45:42.959 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:45:42.959 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:45:42.959 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:45:43.022 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:45:43.037 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-08-02 16:45:43.045 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:45:43.046 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.RutaDocumento == __ruta_0 && A.FechaEliminacion == null)'
2024-08-02 16:45:43.054 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE (a.RutaDocumento == @__ruta_0) && (a.FechaEliminacion == NULL)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-02 16:45:43.061 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:45:43.062 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:45:43.062 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:43.062 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:43.062 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:45:43.062 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:45:43.062 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:45:43.062 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-02 16:45:43.066 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-02 16:45:43.066 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:45:43.067 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:43.068 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:45:43.068 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:43.068 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:45:43.080 -05:00 [WRN] Ya existe un archivo con el mismo nombre
2024-08-02 16:45:43.091 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.4625ms.
2024-08-02 16:45:43.092 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:45:43.092 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:45:43.092 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:45:43.092 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:45:43.093 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:45:43.093 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:45:43.095 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 172.2316ms
2024-08-02 16:45:43.095 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:45:43.098 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:45:43.099 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:45:43.099 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:45:43.099 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 186.5745ms
2024-08-02 16:46:04.219 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:46:04.219 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:46:04.219 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:46:04.219 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:46:04.219 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:46:04.220 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:46:04.220 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:46:04.220 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.1827ms
2024-08-02 16:46:04.228 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:46:04.228 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:46:04.228 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:46:04.228 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:04.228 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:46:04.228 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:46:04.228 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:46:04.229 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:46:04.229 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:46:04.230 -05:00 [DBG] Authorization was successful.
2024-08-02 16:46:04.230 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:04.231 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:46:04.231 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:46:04.231 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:46:04.231 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:46:04.231 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:46:04.231 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:46:04.231 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:04.232 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:04.288 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:46:04.298 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:46:04.299 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:46:04.313 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:46:04.313 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:46:04.313 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:04.313 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:04.313 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:46:04.313 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:04.314 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:04.314 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:46:04.320 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:46:04.320 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.321 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.322 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.322 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.322 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:04.322 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:04.322 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:46:04.322 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:04.322 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:46:04.328 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:46:04.328 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 39.655ms.
2024-08-02 16:46:04.328 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:46:04.328 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:46:04.328 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:46:04.328 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:46:04.328 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:46:04.329 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:46:04.329 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 97.5565ms
2024-08-02 16:46:04.329 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:04.329 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:46:04.329 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:04.329 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:46:04.330 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 102.515ms
2024-08-02 16:46:07.758 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - null null
2024-08-02 16:46:07.758 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:46:07.758 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:46:07.758 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:46:07.758 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:46:07.758 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:46:07.758 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:46:07.759 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - 204 null null 0.9811ms
2024-08-02 16:46:07.761 -05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - null null
2024-08-02 16:46:07.761 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:46:07.761 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:46:07.761 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-02 16:46:07.761 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:46:07.762 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:46:07.762 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:46:07.762 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:46:07.762 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:46:07.763 -05:00 [DBG] Authorization was successful.
2024-08-02 16:46:07.763 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-02 16:46:07.769 -05:00 [INF] Route matched with {action = "EliminarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:46:07.769 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:46:07.769 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:46:07.769 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:46:07.769 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:46:07.769 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:46:07.770 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:07.770 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:07.770 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:46:07.770 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:46:07.770 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:46:07.770 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:46:07.770 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:46:07.770 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:46:07.770 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:46:07.770 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:46:07.770 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:46:07.771 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:46:07.771 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:46:07.771 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:46:07.810 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:46:07.817 -05:00 [DBG] Eliminando archivo con id: $22...
2024-08-02 16:46:07.818 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:46:07.819 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(a => a.Id == __idArchivo_0)'
2024-08-02 16:46:07.826 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-02 16:46:07.826 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:46:07.826 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:46:07.826 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:07.827 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:07.827 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:46:07.827 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:07.827 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:07.827 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:46:07.832 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:46:07.833 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:07.833 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:07.833 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:46:07.833 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:07.833 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:46:07.854 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:07.864 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:46:07.870 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:46:07.901 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:46:08.050 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.050 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.054 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:46:08.054 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.055 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.055 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:46:08.063 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:46:08.073 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.073 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 9ms reading results.
2024-08-02 16:46:08.075 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.075 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:46:08.084 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.088 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:46:08.168 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.189 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.199 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.202 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:46:08.202 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:46:08.213 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:46:08.258 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.258 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.259 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:46:08.259 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.259 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.259 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:46:08.278 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:46:08.304 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:46:08.313 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.313 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 34ms reading results.
2024-08-02 16:46:08.313 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.313 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:46:08.317 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.317 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:46:08.320 -05:00 [INF] Archivo eliminado exitosamente
2024-08-02 16:46:08.320 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 510.4807ms.
2024-08-02 16:46:08.321 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:46:08.321 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:46:08.321 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:46:08.321 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:46:08.321 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:46:08.321 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:46:08.321 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend) in 551.6575ms
2024-08-02 16:46:08.321 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.EliminarDocumento (biblioteca-backend)'
2024-08-02 16:46:08.321 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:46:08.321 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.322 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:46:08.322 -05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7299/api/Archivos?idArchivo=22&idPerfil=31 - 200 null application/json; charset=utf-8 560.9535ms
2024-08-02 16:46:08.370 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:46:08.370 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:46:08.371 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:46:08.371 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:08.371 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:46:08.371 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:46:08.371 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:46:08.371 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:46:08.371 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:46:08.371 -05:00 [DBG] Authorization was successful.
2024-08-02 16:46:08.371 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:08.372 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:46:08.372 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:46:08.372 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:46:08.372 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:46:08.372 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:46:08.372 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:46:08.372 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:08.377 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:46:08.429 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:46:08.443 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:46:08.445 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:46:08.446 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:46:08.446 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:46:08.446 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.446 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.446 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:46:08.446 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.446 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:46:08.446 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:46:08.451 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.452 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.453 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:46:08.453 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.453 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:46:08.453 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.453 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:46:08.492 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:46:08.493 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.2523ms.
2024-08-02 16:46:08.493 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:46:08.493 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:46:08.493 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:46:08.493 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:46:08.493 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:46:08.493 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:46:08.493 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 121.3245ms
2024-08-02 16:46:08.493 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:46:08.494 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:46:08.494 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:46:08.494 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:46:08.494 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 123.9633ms
2024-08-02 16:48:20.850 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - null null
2024-08-02 16:48:20.851 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:48:20.851 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:48:20.851 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:20.851 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:20.851 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:20.851 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:48:20.852 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idPerfil=31 - 204 null null 1.9189ms
2024-08-02 16:48:20.856 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - multipart/form-data; boundary=----WebKitFormBoundary8CJuzDsnkxb5nwjy 60169
2024-08-02 16:48:20.857 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:48:20.857 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:48:20.857 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:48:20.857 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:20.857 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:20.857 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:20.859 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:48:20.859 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:48:20.859 -05:00 [DBG] Authorization was successful.
2024-08-02 16:48:20.859 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:48:20.859 -05:00 [INF] Route matched with {action = "CargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CargarDocumento(Microsoft.AspNetCore.Http.IFormFile, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:48:20.859 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:48:20.859 -05:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2024-08-02 16:48:20.859 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:48:20.859 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:48:20.860 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:48:20.860 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:20.860 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:20.861 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000021": started reading request body.
2024-08-02 16:48:20.861 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000021": done reading request body.
2024-08-02 16:48:20.862 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-02 16:48:20.862 -05:00 [DBG] Attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'archivo' in request data ...
2024-08-02 16:48:20.862 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:48:20.862 -05:00 [DBG] Done attempting to bind parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:48:20.862 -05:00 [DBG] Attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile' ...
2024-08-02 16:48:20.863 -05:00 [DBG] Done attempting to validate the bound parameter 'archivo' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-08-02 16:48:20.863 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:48:20.863 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:48:20.863 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:20.863 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:20.863 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:48:20.863 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:20.906 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:48:20.912 -05:00 [DBG] Cargando archivo nuevo al sistema...
2024-08-02 16:48:20.913 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:48:20.913 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:48:20.913 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:48:20.913 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.913 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.913 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:20.913 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.914 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.914 -05:00 [DBG] Executing DbCommand [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-02 16:48:20.915 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ruta_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[RutaDocumento] = @__ruta_0 AND [a].[FechaEliminacion] IS NULL
2024-08-02 16:48:20.916 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.917 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:48:20.917 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.917 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:20.921 -05:00 [DBG] Creando archivo en la ruta: $Archivos\2. FDE-074-Guia-No-1-Funciones-o-competencias-de-desempeño-RV V8.docx...
2024-08-02 16:48:20.926 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'Archivo.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.947 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.947 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:20.947 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:20.947 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:48:20.949 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.949 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.949 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:20.949 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.949 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.949 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-02 16:48:20.954 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Archivo] ([FechaCarga], [FechaEliminacion], [Nombre], [NumeroDescargas], [RutaDocumento])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-02 16:48:20.955 -05:00 [DBG] The foreign key property 'Archivo.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:48:20.957 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.957 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-08-02 16:48:20.957 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.957 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:20.958 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.958 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:48:20.960 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.960 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.960 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.960 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:20.961 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:20.961 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:48:20.961 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.962 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.962 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:20.962 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.962 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:20.962 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:48:20.973 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:48:20.974 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:48:20.974 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.974 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:48:20.974 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.974 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:20.974 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:20.974 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:48:20.982 -05:00 [INF] Archivo cargado exitosamente
2024-08-02 16:48:20.982 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.2575ms.
2024-08-02 16:48:20.983 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:48:20.983 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:48:20.983 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:48:20.983 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:48:20.984 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:48:20.984 -05:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType10`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:48:20.984 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend) in 124.5921ms
2024-08-02 16:48:20.984 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.CargarDocumento (biblioteca-backend)'
2024-08-02 16:48:20.985 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:48:20.985 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:20.985 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:48:20.985 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Archivos?idPerfil=31 - 200 null application/json; charset=utf-8 129.0029ms
2024-08-02 16:48:29.077 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:48:29.077 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:29.077 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:48:29.077 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:29.077 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:29.077 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:29.077 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:48:29.078 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 1.8162ms
2024-08-02 16:48:29.081 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:48:29.081 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:29.081 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:29.082 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:29.082 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:29.082 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:29.082 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:29.089 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:48:29.089 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:48:29.091 -05:00 [DBG] Authorization was successful.
2024-08-02 16:48:29.091 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:29.092 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:48:29.092 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:48:29.092 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:48:29.092 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:48:29.092 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:48:29.092 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:48:29.092 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:29.093 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:29.164 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:48:29.171 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:48:29.172 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:48:29.172 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:48:29.172 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:48:29.172 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:29.172 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:29.172 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:29.172 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:29.172 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:29.172 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:48:29.179 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:48:29.179 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:29.180 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:29.180 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:48:29.180 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:29.180 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:29.186 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:48:29.186 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2806ms.
2024-08-02 16:48:29.186 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:48:29.186 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:48:29.186 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:48:29.186 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:48:29.187 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:48:29.187 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:48:29.187 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 95.2101ms
2024-08-02 16:48:29.188 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:29.188 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:48:29.188 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:29.188 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:48:29.188 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 107.2849ms
2024-08-02 16:48:43.431 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:48:43.432 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:48:43.432 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:48:43.432 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:43.432 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:43.432 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:43.433 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:48:43.433 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 204 null null 2.6346ms
2024-08-02 16:48:43.441 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:48:43.442 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:48:43.442 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:48:43.442 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:48:43.442 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:43.442 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:43.442 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:43.443 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:48:43.443 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:48:43.443 -05:00 [DBG] Authorization was successful.
2024-08-02 16:48:43.443 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:48:43.447 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:48:43.447 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:48:43.447 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:48:43.447 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:48:43.447 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:48:43.447 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:48:43.448 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:43.448 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:43.448 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:48:43.448 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:48:43.448 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:48:43.448 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:48:43.449 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:48:43.449 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:48:43.449 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:48:43.449 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:48:43.449 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:43.449 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:43.449 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:48:43.449 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:48:43.482 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:48:43.488 -05:00 [DBG] Descargando archivo...
2024-08-02 16:48:43.489 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:48:43.490 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .FirstOrDefault(A => A.Id == __idArchivo_0)'
2024-08-02 16:48:43.495 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Archivo>(
    asyncEnumerable: new SingleQueryingEnumerable<Archivo>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
            SELECT TOP(1) a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
            FROM Archivo AS a
            WHERE a.Id == @__idArchivo_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
        biblioteca_backend.DBBibliotecaContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-08-02 16:48:43.495 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:48:43.495 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:48:43.495 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.495 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.495 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:43.495 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.495 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.496 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:48:43.502 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:48:43.502 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.502 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.502 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:48:43.502 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.503 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:43.503 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.503 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.504 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.504 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:43.504 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:43.504 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:48:43.504 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.504 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.504 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:43.504 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.504 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.505 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:48:43.506 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:48:43.506 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:48:43.506 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.506 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:48:43.506 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.506 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:43.506 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.506 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:48:43.507 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.507 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:43.507 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:48:43.507 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:48:43.507 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.507 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.508 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:43.508 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.508 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.508 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:48:43.509 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:48:43.510 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.510 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:48:43.510 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.510 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:43.510 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.510 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:48:43.513 -05:00 [INF] Archivo descargado exitosamente
2024-08-02 16:48:43.513 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 30.8932ms.
2024-08-02 16:48:43.514 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:48:43.519 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:48:43.543 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 94.9555ms
2024-08-02 16:48:43.543 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:48:43.543 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:48:43.543 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.543 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:48:43.543 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 200 59861 application/octet-stream 102.2885ms
2024-08-02 16:48:43.555 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:48:43.555 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:43.556 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:48:43.556 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:43.556 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:43.556 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:43.556 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:48:43.557 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.9089ms
2024-08-02 16:48:43.585 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:48:43.585 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:43.585 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:48:43.585 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:43.585 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:48:43.586 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:48:43.586 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:48:43.586 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:48:43.586 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:48:43.586 -05:00 [DBG] Authorization was successful.
2024-08-02 16:48:43.587 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:43.587 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:48:43.587 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:48:43.587 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:48:43.587 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:48:43.587 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:48:43.587 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:48:43.587 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:43.588 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:48:43.621 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:48:43.624 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:48:43.625 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:48:43.626 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:48:43.626 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:48:43.626 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.626 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.626 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:48:43.626 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.626 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:48:43.626 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:48:43.629 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:48:43.630 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.630 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.630 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:48:43.631 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.631 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:48:43.632 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.632 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:48:43.635 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:48:43.635 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.0527ms.
2024-08-02 16:48:43.635 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:48:43.636 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:48:43.636 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:48:43.636 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:48:43.636 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:48:43.636 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:48:43.636 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 48.7543ms
2024-08-02 16:48:43.636 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:48:43.636 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:48:43.636 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:48:43.637 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:48:43.637 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 51.7679ms
2024-08-02 16:49:00.789 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:00.789 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:00.789 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:49:00.790 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:00.790 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:00.790 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:00.790 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:49:00.790 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 204 null null 1.1774ms
2024-08-02 16:49:00.793 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:00.793 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:00.794 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:49:00.794 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:00.794 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:00.794 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:00.794 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:00.794 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:00.794 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:00.794 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:00.794 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:00.794 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:00.794 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:00.794 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:00.795 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:00.795 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:00.795 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:00.795 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:00.795 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:00.795 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:00.795 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:00.862 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:00.865 -05:00 [DBG] Descargando archivo...
2024-08-02 16:49:00.867 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:00.868 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:00.868 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:00.868 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.868 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.868 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:00.868 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.868 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.869 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:00.872 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:00.872 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.872 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.873 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:00.873 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.873 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:00.873 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.873 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.873 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.873 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:00.873 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:00.874 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:00.874 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.875 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.875 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:00.875 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.875 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.875 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:00.877 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:00.877 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:49:00.877 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.877 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:00.877 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.878 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:00.878 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.878 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:00.878 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.878 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:00.878 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:00.878 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:00.879 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.879 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.879 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:00.879 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.879 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:00.880 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:00.883 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:00.883 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.883 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:00.883 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.884 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:00.884 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:00.884 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:00.888 -05:00 [INF] Archivo descargado exitosamente
2024-08-02 16:49:00.888 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 26.1408ms.
2024-08-02 16:49:00.889 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:49:00.889 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:49:00.896 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 101.4285ms
2024-08-02 16:49:00.896 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:00.896 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:00.896 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:00.897 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:00.897 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 200 59861 application/octet-stream 103.6709ms
2024-08-02 16:49:01.320 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:49:01.320 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:01.320 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:49:01.320 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:01.320 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:01.320 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:01.320 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:49:01.320 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 0.6266ms
2024-08-02 16:49:01.373 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:49:01.388 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:01.389 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:01.390 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:01.390 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:01.390 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:01.390 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:01.390 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:01.390 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:01.390 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:01.390 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:01.390 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:01.391 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:01.391 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:01.391 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:01.391 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:01.391 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:01.391 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:01.391 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:01.539 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:01.560 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:49:01.561 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:01.562 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:01.562 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:01.562 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:01.562 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:01.562 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:01.563 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:01.563 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:01.563 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:01.969 -05:00 [INF] Executed DbCommand (406ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:01.969 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.970 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.971 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:01.971 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:01.971 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:49:01.971 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:01.971 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:01.980 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:49:01.981 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 441.368ms.
2024-08-02 16:49:01.981 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:49:01.982 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:49:01.982 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:49:01.982 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:49:01.982 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:49:01.982 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:49:01.982 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 591.6087ms
2024-08-02 16:49:01.983 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:01.983 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:01.983 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:01.983 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:01.983 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 610.8546ms
2024-08-02 16:49:02.642 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:02.642 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:02.642 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:49:02.643 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:02.643 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:02.643 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:02.643 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:02.643 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:02.643 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:02.643 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:02.643 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:02.643 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:02.644 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:02.644 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:02.644 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:02.644 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:02.644 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:02.644 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:02.644 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:02.645 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:02.645 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:02.768 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:02.775 -05:00 [DBG] Descargando archivo...
2024-08-02 16:49:02.776 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:02.776 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:02.776 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:02.776 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.776 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.776 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:02.777 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.777 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.777 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:02.786 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:02.787 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.788 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.791 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-08-02 16:49:02.791 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.791 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:02.792 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.792 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.792 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.792 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:02.792 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:02.792 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:02.793 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.793 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.793 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:02.793 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.793 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.793 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:02.813 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:02.813 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:49:02.813 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.813 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:02.813 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.814 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:02.814 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.814 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:02.816 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.816 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:02.816 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:02.816 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:02.817 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.817 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.817 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:02.817 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.818 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:02.818 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:02.823 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:02.823 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.823 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:02.823 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.823 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:02.824 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:02.824 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:02.829 -05:00 [INF] Archivo descargado exitosamente
2024-08-02 16:49:02.829 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 61.1799ms.
2024-08-02 16:49:02.829 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:49:02.829 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:49:02.833 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 188.8508ms
2024-08-02 16:49:02.833 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:02.833 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:02.833 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:02.833 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:02.833 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 200 59861 application/octet-stream 191.1738ms
2024-08-02 16:49:03.260 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:49:03.260 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:03.260 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:03.260 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:03.260 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:03.260 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:03.260 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:03.260 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:03.260 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:03.261 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:03.261 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:03.261 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:03.261 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:03.261 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:03.261 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:03.261 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:03.261 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:03.261 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:03.262 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:03.519 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:03.811 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:49:03.811 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:03.812 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:03.812 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:03.812 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:03.812 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:03.812 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:03.812 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:03.812 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:03.813 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:03.869 -05:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.870 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.871 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.871 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.871 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:03.871 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:03.871 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:49:03.871 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:03.871 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:03.883 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:49:03.883 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 363.2224ms.
2024-08-02 16:49:03.883 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:49:03.883 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:49:03.883 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:49:03.883 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:49:03.883 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:49:03.883 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:49:03.884 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 622.3746ms
2024-08-02 16:49:03.884 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:03.884 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:03.884 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:03.884 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:03.884 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 624.6321ms
2024-08-02 16:49:04.387 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:04.387 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:04.389 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:49:04.389 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:04.389 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:04.389 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:04.389 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:04.389 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:04.389 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:04.390 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:04.390 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:04.390 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:04.390 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:04.390 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:04.390 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:04.390 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:04.390 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:04.390 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:04.391 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:04.391 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:04.391 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:49:04.391 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:04.391 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:04.391 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:04.391 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:04.391 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:04.391 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:49:04.391 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:04.392 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:04.392 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:04.392 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:04.555 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:04.561 -05:00 [DBG] Descargando archivo...
2024-08-02 16:49:04.561 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:04.562 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:04.562 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:04.562 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.562 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.562 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:04.562 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.562 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.562 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:04.564 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:04.565 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.565 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.566 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:04.566 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.566 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:04.566 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.566 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.566 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.566 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:04.567 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:04.567 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:04.567 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.568 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.568 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:04.568 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.568 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.568 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:04.570 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:04.571 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:49:04.571 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.571 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:04.571 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.571 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:04.571 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.571 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:04.571 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.572 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:04.572 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:04.572 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:04.572 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.572 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.572 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:04.572 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.573 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:04.573 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:04.579 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:04.579 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.579 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:04.579 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.580 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:04.580 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:04.580 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:04.585 -05:00 [INF] Archivo descargado exitosamente
2024-08-02 16:49:04.585 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 29.2692ms.
2024-08-02 16:49:04.585 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:49:04.585 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:49:04.586 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 196.0736ms
2024-08-02 16:49:04.587 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:04.587 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:04.587 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:04.587 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:04.587 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 200 59861 application/octet-stream 206.4717ms
2024-08-02 16:49:04.595 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:49:04.595 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:04.596 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:04.596 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:04.596 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:04.596 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:04.596 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:04.596 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:04.599 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:04.600 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:04.600 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:04.600 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:04.600 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:04.600 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:04.600 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:04.600 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:04.600 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:04.600 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:04.601 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:04.906 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:05.195 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:49:05.196 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:05.197 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:05.197 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:05.197 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:05.197 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:05.198 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:05.198 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:05.198 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:05.199 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:05.245 -05:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.246 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.247 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.247 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.247 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:05.247 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:05.247 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:49:05.249 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:05.249 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:05.331 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:49:05.332 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 425.2665ms.
2024-08-02 16:49:05.332 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:49:05.332 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:49:05.332 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:49:05.332 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:49:05.332 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:49:05.332 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:49:05.332 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 732.0935ms
2024-08-02 16:49:05.333 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:05.333 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:05.333 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:05.333 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:05.333 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 738.2068ms
2024-08-02 16:49:05.956 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:05.956 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:05.956 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:49:05.956 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:05.956 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:05.956 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:05.956 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:49:05.957 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 204 null null 0.728ms
2024-08-02 16:49:05.963 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - null null
2024-08-02 16:49:05.964 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos'
2024-08-02 16:49:05.964 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)' with route pattern 'api/Archivos' is valid for the request path '/api/Archivos'
2024-08-02 16:49:05.964 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:05.964 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:05.964 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:05.964 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:05.971 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:05.971 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:05.971 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:05.972 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:05.972 -05:00 [INF] Route matched with {action = "DescargarDocumento", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DescargarDocumento(Int32, Int32) on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:05.972 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:05.972 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:05.972 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:05.972 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:05.972 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:05.972 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:05.973 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:05.973 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:05.973 -05:00 [DBG] Attempting to bind parameter 'idArchivo' of type 'System.Int32' using the name 'idArchivo' in request data ...
2024-08-02 16:49:05.973 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:05.973 -05:00 [DBG] Done attempting to bind parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:05.975 -05:00 [DBG] Attempting to validate the bound parameter 'idArchivo' of type 'System.Int32' ...
2024-08-02 16:49:05.975 -05:00 [DBG] Done attempting to validate the bound parameter 'idArchivo' of type 'System.Int32'.
2024-08-02 16:49:05.975 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:05.976 -05:00 [DBG] Attempting to bind parameter 'idPerfil' of type 'System.Int32' using the name 'idPerfil' in request data ...
2024-08-02 16:49:05.976 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:05.976 -05:00 [DBG] Done attempting to bind parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:05.976 -05:00 [DBG] Attempting to validate the bound parameter 'idPerfil' of type 'System.Int32' ...
2024-08-02 16:49:05.976 -05:00 [DBG] Done attempting to validate the bound parameter 'idPerfil' of type 'System.Int32'.
2024-08-02 16:49:06.133 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:06.136 -05:00 [DBG] Descargando archivo...
2024-08-02 16:49:06.137 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:06.137 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:06.137 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:06.137 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.137 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.137 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:06.137 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.138 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.138 -05:00 [DBG] Executing DbCommand [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:06.142 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__idArchivo_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[Id] = @__idArchivo_0
2024-08-02 16:49:06.142 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.142 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.142 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:06.142 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.143 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:06.143 -05:00 [DBG] 'DBBibliotecaContext' generated a temporary value for the property 'RegistroArchivoPerfil.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.143 -05:00 [DBG] The navigation 'RegistroArchivoPerfil.Archivo' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.143 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'RegistroArchivoPerfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.143 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:06.143 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:06.143 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:06.144 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.144 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.145 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:06.145 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.145 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.145 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:06.147 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RegistroArchivoPerfil] ([Fecha], [IdAccion], [IdArchivo], [IdPerfil])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-08-02 16:49:06.148 -05:00 [DBG] The foreign key property 'RegistroArchivoPerfil.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-08-02 16:49:06.148 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.148 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:06.148 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.149 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:06.149 -05:00 [DBG] An entity of type 'RegistroArchivoPerfil' tracked by 'DBBibliotecaContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.149 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:06.150 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.150 -05:00 [DBG] SaveChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:06.150 -05:00 [DBG] DetectChanges starting for 'DBBibliotecaContext'.
2024-08-02 16:49:06.150 -05:00 [DBG] DetectChanges completed for 'DBBibliotecaContext'.
2024-08-02 16:49:06.151 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.151 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.151 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:06.152 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.152 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.152 -05:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:06.155 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Archivo] SET [FechaCarga] = @p0, [FechaEliminacion] = @p1, [Nombre] = @p2, [NumeroDescargas] = @p3, [RutaDocumento] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-02 16:49:06.155 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.155 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:49:06.155 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.155 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:06.155 -05:00 [DBG] An entity of type 'Archivo' tracked by 'DBBibliotecaContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.155 -05:00 [DBG] SaveChanges completed for 'DBBibliotecaContext' with 1 entities written to the database.
2024-08-02 16:49:06.160 -05:00 [INF] Archivo descargado exitosamente
2024-08-02 16:49:06.160 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 26.9376ms.
2024-08-02 16:49:06.160 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:49:06.160 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:49:06.164 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend) in 192.0914ms
2024-08-02 16:49:06.165 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.DescargarDocumento (biblioteca-backend)'
2024-08-02 16:49:06.165 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:06.165 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.165 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:06.165 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos?idArchivo=23&idPerfil=31 - 200 59861 application/octet-stream 202.0829ms
2024-08-02 16:49:06.192 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:49:06.194 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:06.194 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:49:06.194 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:06.194 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:49:06.194 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:49:06.195 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:49:06.195 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:49:06.195 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:49:06.195 -05:00 [DBG] Authorization was successful.
2024-08-02 16:49:06.195 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:06.195 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:49:06.195 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:49:06.196 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:49:06.196 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:49:06.196 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:49:06.196 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:49:06.196 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:06.197 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:49:06.342 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:49:06.597 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:49:06.602 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:49:06.602 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:49:06.602 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:49:06.602 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.603 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.603 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:49:06.603 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.603 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:49:06.603 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:06.982 -05:00 [INF] Executed DbCommand (379ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:49:06.982 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.985 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.986 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.986 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:49:06.986 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.986 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-08-02 16:49:06.986 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:06.986 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:49:07.103 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:49:07.103 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 761.2434ms.
2024-08-02 16:49:07.103 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:49:07.103 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:49:07.104 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:49:07.104 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:49:07.104 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:49:07.104 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:49:07.104 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 907.8942ms
2024-08-02 16:49:07.104 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:49:07.104 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:49:07.104 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:49:07.104 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:49:07.104 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 912.2188ms
2024-08-02 16:52:45.098 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-08-02 16:52:45.099 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:52:45.099 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:52:45.099 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:52:45.099 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:52:45.099 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:52:45.100 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:52:45.100 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 2.5128ms
2024-08-02 16:52:45.115 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 60
2024-08-02 16:52:45.115 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:52:45.118 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-08-02 16:52:45.118 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:52:45.118 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:52:45.118 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:52:45.118 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:52:45.118 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-02 16:52:45.118 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:52:45.119 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-08-02 16:52:45.119 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:52:45.119 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:52:45.119 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:52:45.119 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:52:45.119 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:52:45.119 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:52:45.119 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:52:45.120 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:52:45.120 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-08-02 16:52:45.120 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-02 16:52:45.120 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000047": started reading request body.
2024-08-02 16:52:45.120 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000047": done reading request body.
2024-08-02 16:52:45.120 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-08-02 16:52:45.120 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:52:45.121 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:52:45.121 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:52:45.121 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:52:45.174 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:52:45.177 -05:00 [DBG] Iniciando sesión...
2024-08-02 16:52:45.177 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:52:45.178 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:52:45.178 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:52:45.178 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.178 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.178 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:52:45.178 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.179 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.179 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:52:45.179 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:52:45.179 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:52:45.179 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.180 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:52:45.180 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.180 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:52:45.180 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.180 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.180 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:52:45.180 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.180 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.181 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:52:45.181 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:52:45.181 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:52:45.182 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:52:45.182 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.182 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:52:45.182 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.182 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:52:45.185 -05:00 [INF] Inicio de sesión exitoso
2024-08-02 16:52:45.185 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 10.7288ms.
2024-08-02 16:52:45.185 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:52:45.185 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:52:45.185 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:52:45.185 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:52:45.185 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:52:45.185 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:52:45.186 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 66.6522ms
2024-08-02 16:52:45.186 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:52:45.186 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:52:45.186 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.186 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:52:45.186 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 71.1042ms
2024-08-02 16:52:45.209 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-08-02 16:52:45.210 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:52:45.210 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:52:45.210 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:52:45.210 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:52:45.210 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:52:45.210 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:52:45.210 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=true - 204 null null 0.9223ms
2024-08-02 16:52:45.235 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - null null
2024-08-02 16:52:45.235 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:52:45.235 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-02 16:52:45.235 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:52:45.235 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:52:45.235 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:52:45.235 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:52:45.236 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:52:45.236 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:52:45.236 -05:00 [DBG] Authorization was successful.
2024-08-02 16:52:45.236 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:52:45.236 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-02 16:52:45.236 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:52:45.236 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:52:45.236 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:52:45.236 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:52:45.236 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:52:45.237 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:52:45.237 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:52:45.237 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:52:45.237 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-02 16:52:45.237 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:52:45.237 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:52:45.237 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:52:45.237 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:52:45.275 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:52:45.279 -05:00 [DBG] Consultando libros...
2024-08-02 16:52:45.280 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:52:45.280 -05:00 [DBG] Compiling query expression: 
'DbSet<Libro>()
    .Join(
        inner: DbSet<Genero>(), 
        outerKeySelector: L => L.IdGenero, 
        innerKeySelector: G => G.Id, 
        resultSelector: (L, G) => new { 
            L = L, 
            G = G
         })
    .Where(<>h__TransparentIdentifier0 => True && <>h__TransparentIdentifier0.L.Activo == True || False)
    .Select(<>h__TransparentIdentifier0 => new { 
        id = <>h__TransparentIdentifier0.L.Id, 
        titulo = <>h__TransparentIdentifier0.L.Titulo, 
        autor = <>h__TransparentIdentifier0.L.Autor, 
        anio = <>h__TransparentIdentifier0.L.Anio, 
        idGenero = <>h__TransparentIdentifier0.L.IdGenero, 
        genero = <>h__TransparentIdentifier0.G.Nombre, 
        activo = <>h__TransparentIdentifier0.L.Activo
     })'
2024-08-02 16:52:45.284 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType5<int, string, string, int, int, string, bool>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            titulo -> 1
            autor -> 2
            anio -> 3
            idGenero -> 4
            genero -> 5
            activo -> 6
        SELECT l.Id AS id, l.Titulo AS titulo, l.Autor AS autor, l.Anio AS anio, l.IdGenero AS idGenero, g.Nombre AS genero, l.Activo AS activo
        FROM Libro AS l
        INNER JOIN Genero AS g ON l.IdGenero == g.Id
        WHERE (CAST(1 AS bit) && (l.Activo == CAST(1 AS bit))) || CAST(0 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType5<int, string, string, int, int, string, bool>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:52:45.285 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:52:45.285 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:52:45.285 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.285 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.285 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:52:45.285 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.285 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:52:45.285 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-08-02 16:52:45.291 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
WHERE [l].[Activo] = CAST(1 AS bit)
2024-08-02 16:52:45.291 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.291 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:52:45.291 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.291 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:52:45.294 -05:00 [INF] Consulta de libros exitosa
2024-08-02 16:52:45.294 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.6095ms.
2024-08-02 16:52:45.294 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:52:45.294 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:52:45.294 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:52:45.294 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:52:45.294 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:52:45.294 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:52:45.294 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 57.7171ms
2024-08-02 16:52:45.294 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:52:45.294 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:52:45.294 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:52:45.295 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:52:45.295 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=true - 200 null application/json; charset=utf-8 60.1051ms
2024-08-02 16:53:01.619 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:53:01.619 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:53:01.619 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:53:01.619 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:53:01.619 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:53:01.619 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:53:01.620 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:53:01.621 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentos - 204 null null 2.4905ms
2024-08-02 16:53:01.628 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - null null
2024-08-02 16:53:01.629 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:53:01.629 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentos' is valid for the request path '/api/Archivos/ConsultarDocumentos'
2024-08-02 16:53:01.629 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:53:01.629 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:53:01.629 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:53:01.629 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:53:01.629 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:53:01.629 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:53:01.629 -05:00 [DBG] Authorization was successful.
2024-08-02 16:53:01.629 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:53:01.630 -05:00 [INF] Route matched with {action = "ConsultarTodos", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodos() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:53:01.630 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:53:01.630 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:53:01.630 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:53:01.630 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:53:01.630 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:53:01.630 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:53:01.630 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:53:01.694 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:53:01.697 -05:00 [DBG] Consultando archivos sin eliminar...
2024-08-02 16:53:01.698 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:53:01.698 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:53:01.698 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:53:01.698 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:53:01.698 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:53:01.699 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:53:01.699 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:53:01.699 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:53:01.699 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:53:01.701 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
ORDER BY [a].[FechaCarga] DESC
2024-08-02 16:53:01.707 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.707 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:53:01.708 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:53:01.709 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 7ms reading results.
2024-08-02 16:53:01.709 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:53:01.709 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:53:01.716 -05:00 [INF] Consulta de archivos exitosa
2024-08-02 16:53:01.716 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.2882ms.
2024-08-02 16:53:01.716 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:53:01.716 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:53:01.716 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:53:01.716 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:53:01.716 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:53:01.716 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Archivo, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:53:01.717 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend) in 86.5927ms
2024-08-02 16:53:01.717 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodos (biblioteca-backend)'
2024-08-02 16:53:01.717 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:53:01.717 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:53:01.717 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:53:01.718 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentos - 200 null application/json; charset=utf-8 88.9915ms
2024-08-02 16:54:36.267 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-08-02 16:54:36.268 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-02 16:54:36.268 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:54:36.268 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:54:36.268 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:54:36.268 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:54:36.268 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:54:36.268 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 204 null null 1.0129ms
2024-08-02 16:54:36.289 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - null null
2024-08-02 16:54:36.289 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-02 16:54:36.289 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarDocumentosZip' is valid for the request path '/api/Archivos/ConsultarDocumentosZip'
2024-08-02 16:54:36.289 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-02 16:54:36.290 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:54:36.290 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:54:36.290 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:54:36.290 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:54:36.290 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:54:36.291 -05:00 [DBG] Authorization was successful.
2024-08-02 16:54:36.291 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-02 16:54:36.295 -05:00 [INF] Route matched with {action = "ConsultarTodosZip", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarTodosZip() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:54:36.295 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:54:36.295 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:54:36.295 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:54:36.296 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:54:36.296 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:54:36.296 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:54:36.296 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:54:36.341 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:54:36.359 -05:00 [DBG] Consultando archivos en una lista...
2024-08-02 16:54:36.360 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:54:36.360 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Where(A => A.FechaEliminacion == null)'
2024-08-02 16:54:36.367 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Archivo>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Archivo.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Archivo.FechaCarga (DateTime) Required, 1], [Property: Archivo.FechaEliminacion (DateTime?), 2], [Property: Archivo.Nombre (string) Required, 3], [Property: Archivo.NumeroDescargas (int) Required, 4], [Property: Archivo.RutaDocumento (string) Required, 5] }
        SELECT a.Id, a.FechaCarga, a.FechaEliminacion, a.Nombre, a.NumeroDescargas, a.RutaDocumento
        FROM Archivo AS a
        WHERE a.FechaEliminacion == NULL), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Archivo>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:54:36.368 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:54:36.368 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:54:36.368 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:54:36.368 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:54:36.368 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:54:36.368 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:54:36.369 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:54:36.369 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-08-02 16:54:36.377 -05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[FechaCarga], [a].[FechaEliminacion], [a].[Nombre], [a].[NumeroDescargas], [a].[RutaDocumento]
FROM [Archivo] AS [a]
WHERE [a].[FechaEliminacion] IS NULL
2024-08-02 16:54:36.377 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.377 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.377 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Archivo' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:54:36.378 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:54:36.378 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-08-02 16:54:36.379 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:54:36.379 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:54:36.436 -05:00 [DBG] Comprimiendo archivos en un archivo .zip...
2024-08-02 16:54:36.580 -05:00 [INF] Archivos comprimidos exitosamente
2024-08-02 16:54:36.586 -05:00 [INF] Consulta de archivos comprimidos exitosa
2024-08-02 16:54:36.586 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 245.4674ms.
2024-08-02 16:54:36.586 -05:00 [INF] Executing FileContentResult, sending file with download name '' ...
2024-08-02 16:54:36.586 -05:00 [DBG] The file result has not been enabled for processing range requests. To enable it, set the EnableRangeProcessing property on the result to 'true'.
2024-08-02 16:54:36.627 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend) in 330.8788ms
2024-08-02 16:54:36.627 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarTodosZip (biblioteca-backend)'
2024-08-02 16:54:36.627 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:54:36.627 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:54:36.628 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:54:36.629 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarDocumentosZip - 200 460396 application/zip 339.3917ms
2024-08-02 16:55:25.774 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - null null
2024-08-02 16:55:25.774 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:55:25.774 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:55:25.774 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.775 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.775 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.775 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:55:25.775 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Perfiles/ - 204 null null 1.8802ms
2024-08-02 16:55:25.789 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7299/api/Perfiles/ - application/json 54
2024-08-02 16:55:25.790 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Perfiles/'
2024-08-02 16:55:25.790 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)' with route pattern 'api/Perfiles' is valid for the request path '/api/Perfiles/'
2024-08-02 16:55:25.790 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:55:25.790 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.790 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.790 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.790 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-02 16:55:25.791 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:55:25.791 -05:00 [INF] Route matched with {action = "Post", controller = "Perfiles"}. Executing controller action with signature System.Object Post(biblioteca_backend.Models.DTOs.LogInModel) on controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend).
2024-08-02 16:55:25.791 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:55:25.791 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:55:25.791 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:55:25.791 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:55:25.791 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:55:25.791 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:55:25.791 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.PerfilesController (biblioteca-backend)
2024-08-02 16:55:25.792 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:55:25.792 -05:00 [DBG] Attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' using the name '' in request data ...
2024-08-02 16:55:25.792 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-08-02 16:55:25.792 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000057": started reading request body.
2024-08-02 16:55:25.792 -05:00 [DBG] Connection id "0HN5J7CE733JI", Request id "0HN5J7CE733JI:00000057": done reading request body.
2024-08-02 16:55:25.792 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'biblioteca_backend.Models.DTOs.LogInModel'
2024-08-02 16:55:25.792 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:55:25.792 -05:00 [DBG] Done attempting to bind parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:55:25.792 -05:00 [DBG] Attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel' ...
2024-08-02 16:55:25.792 -05:00 [DBG] Done attempting to validate the bound parameter 'logInModel' of type 'biblioteca_backend.Models.DTOs.LogInModel'.
2024-08-02 16:55:25.829 -05:00 [INF] Executing action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:55:25.833 -05:00 [DBG] Iniciando sesión...
2024-08-02 16:55:25.834 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:55:25.835 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:55:25.835 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:55:25.835 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.835 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.835 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:25.835 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:25.835 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:25.835 -05:00 [DBG] Executing DbCommand [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:55:25.836 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_logInModel_Correo_0='?' (Size = 4000), @__claveCifrada_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Apellido], [p].[Contrasena], [p].[Correo], [p].[Direccion], [p].[IdRol], [p].[Nombre], [p].[Telefono]
FROM [Perfil] AS [p]
WHERE [p].[Correo] = @__8__locals1_logInModel_Correo_0 AND [p].[Contrasena] = @__claveCifrada_1
2024-08-02 16:55:25.837 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Perfil' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:25.837 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.837 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:55:25.837 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.837 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:25.838 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.838 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.838 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:25.838 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:25.838 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:25.838 -05:00 [DBG] Executing DbCommand [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:55:25.839 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@___perfil_IdRol_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Nombre]
FROM [Rol] AS [r]
WHERE [r].[Id] = @___perfil_IdRol_0
2024-08-02 16:55:25.839 -05:00 [DBG] The navigation 'Perfil.Rol' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:25.839 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Rol' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:25.839 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.840 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:55:25.840 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.840 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:25.843 -05:00 [INF] Inicio de sesión exitoso
2024-08-02 16:55:25.843 -05:00 [INF] Executed action method biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.9128ms.
2024-08-02 16:55:25.844 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:55:25.844 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:55:25.844 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:55:25.844 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:55:25.844 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:55:25.844 -05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-02 16:55:25.844 -05:00 [INF] Executed action biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend) in 52.7714ms
2024-08-02 16:55:25.844 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.PerfilesController.Post (biblioteca-backend)'
2024-08-02 16:55:25.844 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:55:25.844 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:25.844 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:55:25.845 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7299/api/Perfiles/ - 200 null application/json; charset=utf-8 55.1873ms
2024-08-02 16:55:25.874 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-02 16:55:25.884 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:55:25.884 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:55:25.884 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Generos - null null
2024-08-02 16:55:25.884 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.884 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-02 16:55:25.884 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.884 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:55:25.884 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.884 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.884 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:55:25.884 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.884 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.884 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Libros/?mostrarActivos=false - 204 null null 10.0822ms
2024-08-02 16:55:25.884 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:55:25.884 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Generos - 204 null null 0.5747ms
2024-08-02 16:55:25.894 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Generos - null null
2024-08-02 16:55:25.894 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - null null
2024-08-02 16:55:25.894 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Generos'
2024-08-02 16:55:25.894 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Libros/'
2024-08-02 16:55:25.894 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)' with route pattern 'api/Generos' is valid for the request path '/api/Generos'
2024-08-02 16:55:25.894 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)' with route pattern 'api/Libros' is valid for the request path '/api/Libros/'
2024-08-02 16:55:25.894 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:55:25.894 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:55:25.894 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.894 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:25.894 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.894 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:25.894 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.895 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:25.895 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:55:25.895 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:55:25.895 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:55:25.895 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:55:25.895 -05:00 [DBG] Authorization was successful.
2024-08-02 16:55:25.895 -05:00 [DBG] Authorization was successful.
2024-08-02 16:55:25.895 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:55:25.895 -05:00 [INF] Route matched with {action = "Get", controller = "Generos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend).
2024-08-02 16:55:25.895 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:55:25.895 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:55:25.896 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:55:25.896 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:55:25.896 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:55:25.896 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-02 16:55:25.896 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.GenerosController (biblioteca-backend)
2024-08-02 16:55:25.895 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:55:25.991 -05:00 [INF] Route matched with {action = "Get", controller = "Libros"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get(Boolean) on controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend).
2024-08-02 16:55:25.991 -05:00 [INF] Executing action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:55:25.991 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:55:25.991 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:55:25.991 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:55:25.991 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:55:25.991 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:55:25.991 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:55:25.992 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.LibrosController (biblioteca-backend)
2024-08-02 16:55:25.992 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:55:25.992 -05:00 [DBG] Attempting to bind parameter 'mostrarActivos' of type 'System.Boolean' using the name 'mostrarActivos' in request data ...
2024-08-02 16:55:25.992 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:55:25.992 -05:00 [DBG] Done attempting to bind parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:55:25.992 -05:00 [DBG] Attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean' ...
2024-08-02 16:55:25.992 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:55:25.992 -05:00 [DBG] Done attempting to validate the bound parameter 'mostrarActivos' of type 'System.Boolean'.
2024-08-02 16:55:25.995 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:55:25.995 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:55:26.046 -05:00 [INF] Executing action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:55:26.046 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.051 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.051 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:26.052 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:26.052 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-08-02 16:55:26.052 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-02 16:55:26.053 -05:00 [DBG] Consultando libros...
2024-08-02 16:55:26.055 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Nombre]
FROM [Genero] AS [g]
2024-08-02 16:55:26.055 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:55:26.055 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.055 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.057 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:55:26.057 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:55:26.057 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.061 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.062 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.062 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Genero' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:26.062 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.062 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 6ms reading results.
2024-08-02 16:55:26.062 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.062 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:26.063 -05:00 [INF] Executed action method biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71.5697ms.
2024-08-02 16:55:26.063 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:55:26.063 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:55:26.063 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:55:26.063 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:55:26.065 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:55:26.065 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Genero, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:55:26.065 -05:00 [INF] Executed action biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend) in 169.673ms
2024-08-02 16:55:26.066 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.GenerosController.Get (biblioteca-backend)'
2024-08-02 16:55:26.066 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:55:26.066 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.066 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:55:26.066 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Generos - 200 null application/json; charset=utf-8 172.576ms
2024-08-02 16:55:26.067 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.067 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:26.067 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:26.067 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:26.067 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-02 16:55:26.069 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id] AS [id], [l].[Titulo] AS [titulo], [l].[Autor] AS [autor], [l].[Anio] AS [anio], [l].[IdGenero] AS [idGenero], [g].[Nombre] AS [genero], [l].[Activo] AS [activo]
FROM [Libro] AS [l]
INNER JOIN [Genero] AS [g] ON [l].[IdGenero] = [g].[Id]
2024-08-02 16:55:26.070 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.070 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-08-02 16:55:26.070 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.070 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:26.085 -05:00 [INF] Consulta de libros exitosa
2024-08-02 16:55:26.085 -05:00 [INF] Executed action method biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.6444ms.
2024-08-02 16:55:26.085 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:55:26.086 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:55:26.086 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:55:26.086 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:55:26.086 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:55:26.086 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType5`7[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:55:26.086 -05:00 [INF] Executed action biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend) in 94.8779ms
2024-08-02 16:55:26.086 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.LibrosController.Get (biblioteca-backend)'
2024-08-02 16:55:26.086 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:55:26.086 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:26.087 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:55:26.087 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Libros/?mostrarActivos=false - 200 null application/json; charset=utf-8 192.6943ms
2024-08-02 16:55:28.036 -05:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-02 16:55:28.037 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-02 16:55:28.037 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-08-02 16:55:28.037 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:28.037 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:28.037 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:28.037 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Acciones - null null
2024-08-02 16:55:28.037 -05:00 [DBG] The request is a preflight request.
2024-08-02 16:55:28.037 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Acciones'
2024-08-02 16:55:28.037 -05:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7299/api/Archivos/ConsultarHistorial - 204 null null 1.0475ms
2024-08-02 16:55:28.037 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)' with route pattern 'api/Acciones' is valid for the request path '/api/Acciones'
2024-08-02 16:55:28.038 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-02 16:55:28.038 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:28.038 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:28.038 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:28.038 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-08-02 16:55:28.038 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-02 16:55:28.044 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - null null
2024-08-02 16:55:28.044 -05:00 [DBG] 1 candidate(s) found for the request path '/api/Archivos/ConsultarHistorial'
2024-08-02 16:55:28.044 -05:00 [INF] Route matched with {action = "Get", controller = "Acciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend).
2024-08-02 16:55:28.044 -05:00 [DBG] Endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)' with route pattern 'api/Archivos/ConsultarHistorial' is valid for the request path '/api/Archivos/ConsultarHistorial'
2024-08-02 16:55:28.044 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:55:28.044 -05:00 [DBG] Request matched endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-02 16:55:28.044 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:55:28.044 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-08-02 16:55:28.044 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:55:28.044 -05:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-08-02 16:55:28.044 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:55:28.044 -05:00 [INF] CORS policy execution successful.
2024-08-02 16:55:28.044 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:55:28.044 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-02 16:55:28.045 -05:00 [DBG] Successfully validated the token.
2024-08-02 16:55:28.045 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-08-02 16:55:28.045 -05:00 [DBG] Authorization was successful.
2024-08-02 16:55:28.045 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.AccionesController (biblioteca-backend)
2024-08-02 16:55:28.045 -05:00 [INF] Executing endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-02 16:55:28.102 -05:00 [INF] Executing action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:55:28.104 -05:00 [INF] Route matched with {action = "ConsultarHistorial", controller = "Archivos"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConsultarHistorial() on controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend).
2024-08-02 16:55:28.104 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-08-02 16:55:28.104 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-08-02 16:55:28.104 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-08-02 16:55:28.104 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-08-02 16:55:28.104 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-08-02 16:55:28.104 -05:00 [DBG] Executing controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:55:28.105 -05:00 [DBG] Executed controller factory for controller biblioteca_backend.Controllers.ArchivosController (biblioteca-backend)
2024-08-02 16:55:28.134 -05:00 [INF] Executing action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) - Validation state: "Valid"
2024-08-02 16:55:28.136 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:55:28.136 -05:00 [DBG] Compiling query expression: 
'DbSet<Accion>()'
2024-08-02 16:55:28.142 -05:00 [DBG] Consultando historial de registros de archivos...
2024-08-02 16:55:28.143 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Accion>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Accion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Accion.Nombre (string) Required, 1] }
        SELECT a.Id, a.Nombre
        FROM Accion AS a), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Accion>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:55:28.144 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:55:28.144 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:55:28.144 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.144 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.144 -05:00 [DBG] Entity Framework Core 8.0.6 initialized 'DBBibliotecaContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.6' with options: None
2024-08-02 16:55:28.144 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:28.144 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:28.144 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:28.144 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-02 16:55:28.149 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Nombre]
FROM [Accion] AS [a]
2024-08-02 16:55:28.158 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:28.160 -05:00 [DBG] Compiling query expression: 
'DbSet<Archivo>()
    .Join(
        inner: DbSet<RegistroArchivoPerfil>(), 
        outerKeySelector: A => A.Id, 
        innerKeySelector: RA => RA.IdArchivo, 
        resultSelector: (A, RA) => new { 
            A = A, 
            RA = RA
         })
    .Join(
        inner: DbSet<Perfil>(), 
        outerKeySelector: <>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.RA.IdPerfil, 
        innerKeySelector: P => P.Id, 
        resultSelector: (<>h__TransparentIdentifier0, P) => new { 
            <>h__TransparentIdentifier0 = <>h__TransparentIdentifier0, 
            P = P
         })
    .Join(
        inner: DbSet<Accion>(), 
        outerKeySelector: <>h__TransparentIdentifier1 => <>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.IdAccion, 
        innerKeySelector: AC => AC.Id, 
        resultSelector: (<>h__TransparentIdentifier1, AC) => new { 
            <>h__TransparentIdentifier1 = <>h__TransparentIdentifier1, 
            AC = AC
         })
    .OrderByDescending(<>h__TransparentIdentifier2 => <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha)
    .Select(<>h__TransparentIdentifier2 => new { 
        id = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Id, 
        nombreArchivo = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.A.Nombre, 
        idAccion = <>h__TransparentIdentifier2.AC.Id, 
        accion = <>h__TransparentIdentifier2.AC.Nombre, 
        nombreUsuario = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Nombre + (object)  + <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.P.Apellido, 
        fechaAccion = <>h__TransparentIdentifier2.<>h__TransparentIdentifier1.<>h__TransparentIdentifier0.RA.Fecha
     })'
2024-08-02 16:55:28.170 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:28.170 -05:00 [DBG] Context 'DBBibliotecaContext' started tracking 'Accion' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-08-02 16:55:28.172 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.172 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 22ms reading results.
2024-08-02 16:55:28.172 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.172 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:28.173 -05:00 [INF] Executed action method biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.6664ms.
2024-08-02 16:55:28.173 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:55:28.173 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:55:28.173 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:55:28.173 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:55:28.173 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:55:28.173 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[biblioteca_backend.Models.Accion, biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:55:28.175 -05:00 [INF] Executed action biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend) in 130.9669ms
2024-08-02 16:55:28.176 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.AccionesController.Get (biblioteca-backend)'
2024-08-02 16:55:28.176 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:55:28.176 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.176 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:55:28.177 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Acciones - 200 null application/json; charset=utf-8 139.1154ms
2024-08-02 16:55:28.240 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<<>f__AnonymousType3<int, string, int, string, string, DateTime>>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            id -> 0
            nombreArchivo -> 1
            idAccion -> 2
            accion -> 3
            nombreUsuario -> 4
            fechaAccion -> 5
        SELECT r.Id AS id, a.Nombre AS nombreArchivo, a0.Id AS idAccion, a0.Nombre AS accion, (p.Nombre + CAST(N' ' AS nvarchar(max))) + p.Apellido AS nombreUsuario, r.Fecha AS fechaAccion
        FROM Archivo AS a
        INNER JOIN RegistroArchivoPerfil AS r ON a.Id == r.IdArchivo
        INNER JOIN Perfil AS p ON r.IdPerfil == p.Id
        INNER JOIN Accion AS a0 ON r.IdAccion == a0.Id
        ORDER BY r.Fecha DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, <>f__AnonymousType3<int, string, int, string, string, DateTime>>, 
    biblioteca_backend.DBBibliotecaContext, 
    False, 
    False, 
    True
)'
2024-08-02 16:55:28.241 -05:00 [DBG] Creating DbConnection.
2024-08-02 16:55:28.241 -05:00 [DBG] Created DbConnection. (0ms).
2024-08-02 16:55:28.241 -05:00 [DBG] Opening connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.241 -05:00 [DBG] Opened connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.241 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-08-02 16:55:28.241 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:28.241 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-08-02 16:55:28.241 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-02 16:55:28.251 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id] AS [id], [a].[Nombre] AS [nombreArchivo], [a0].[Id] AS [idAccion], [a0].[Nombre] AS [accion], [p].[Nombre] + CAST(N' ' AS nvarchar(max)) + [p].[Apellido] AS [nombreUsuario], [r].[Fecha] AS [fechaAccion]
FROM [Archivo] AS [a]
INNER JOIN [RegistroArchivoPerfil] AS [r] ON [a].[Id] = [r].[IdArchivo]
INNER JOIN [Perfil] AS [p] ON [r].[IdPerfil] = [p].[Id]
INNER JOIN [Accion] AS [a0] ON [r].[IdAccion] = [a0].[Id]
ORDER BY [r].[Fecha] DESC
2024-08-02 16:55:28.256 -05:00 [DBG] Closing data reader to 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.256 -05:00 [DBG] A data reader for 'DBBiblioteca' on server '(local)\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-08-02 16:55:28.256 -05:00 [DBG] Closing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.256 -05:00 [DBG] Closed connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS' (0ms).
2024-08-02 16:55:28.259 -05:00 [INF] Consulta de historial exitosa
2024-08-02 16:55:28.259 -05:00 [INF] Executed action method biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 124.4005ms.
2024-08-02 16:55:28.259 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-08-02 16:55:28.259 -05:00 [DBG] No information found on request to perform content negotiation.
2024-08-02 16:55:28.259 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-08-02 16:55:28.259 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-08-02 16:55:28.259 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-08-02 16:55:28.260 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`6[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], biblioteca-backend, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-02 16:55:28.268 -05:00 [INF] Executed action biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend) in 164.0455ms
2024-08-02 16:55:28.269 -05:00 [INF] Executed endpoint 'biblioteca_backend.Controllers.ArchivosController.ConsultarHistorial (biblioteca-backend)'
2024-08-02 16:55:28.269 -05:00 [DBG] 'DBBibliotecaContext' disposed.
2024-08-02 16:55:28.269 -05:00 [DBG] Disposing connection to database 'DBBiblioteca' on server '(local)\SQLEXPRESS'.
2024-08-02 16:55:28.269 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-08-02 16:55:28.269 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7299/api/Archivos/ConsultarHistorial - 200 null application/json; charset=utf-8 225.0776ms
